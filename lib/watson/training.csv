validity,issue,url
4,"TITLE: test for ""w"" syntax support in <img srcset> BODY: This would be really useful. Generic srcset support test doesn't distinguish between the ""x"" and the ""w"" syntax. And if an author just uses the ""w"" syntax on a srcset-supporting but non-""w"" supporting browser (e.g. Safari 8), the user gets no image, not even the legacy ""src"".

I have some idea for how to do this but I don't want to reinvent the wheel. Anyone?
",https://github.com/Modernizr/Modernizr/issues/1448
1,"TITLE: Add test CSS Transform support in SVG BODY: Add a test if CSS Transform on SVG element is supported. Test `""transform"" in svgelement.style` return a false positive on IE 9-11+ (see [""Known issues"" tab for ""CSS3 Transforms"" post on ""Can I use""](http://caniuse.com/#feat=transforms2d)).

The following function works as expected:

```
function testSupport(svgRoot){
    // Don't forget the SVG namespace
    var g = document.createElementNS(""http://www.w3.org/2000/svg"", ""g""), style = g.style;
    svgRoot.appendChild(g);
    // Get the current position
    var left = g.getBoundingClientRect().left;
    style.msTransform = style.webkitTransform = style.transform = ""translate(100px,0)"";
    // Get the current position again to compare transform setting impact
    var newleft = g.getBoundingClientRect().left;
    g.parentNode.removeChild(g);
    // Compare positions. Should be different if CSS transform was applied
    return left != newleft;
}
```
",https://github.com/Modernizr/Modernizr/issues/1453
2,"TITLE: Detect support for scrollIntoView(scrollIntoViewOptions) BODY: no idea _how_, but it would be useful to just use [`element.scrollIntoView({behavior: ""smooth""})`](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView) if available and else some polyfill for smooth scrolling via JS.
",https://github.com/Modernizr/Modernizr/issues/1568
2,"TITLE: cssvwunit/cssvhunit tests give false negative in some browser zoom/widths BODY: To reproduce (all latest browsers except Safari, more on that below):
1. Set your browser to 961px width
2. Zoom to 110%
3. http://jsfiddle.net/6L7n2243/show/

`window.innerWidth` and `window.innerHeight` appear to be _rounded_ by the browser based on the calculated viewport size after a zoom, rather than _floored_ like we're used to.

If the window is 961px wide and the zoom is 110%, the viewport width is 961 \* 1/1.1 = 873.63, and the innerWidth is 874. The test div with 50vw would then be 873.63/2 = 436.815. Which when floored is one less than innerWidth/2 because `floor(round(n)/2) == floor(n/2)` is not true for every n. There are several other zoom level/window width combinations to make this happen.

Problem is, Safari DOES floor innerWidth and innerHeight (which I think is right). That makes it impossible to just do `round(testDivWidthFloat * 2) == innerWidth` which would be really nice. The other solution I'm exploring is using `getComputedStyle(document.documentElement).width` which gives you the fractional value of the viewport, rather than `innerWidth`, but I can't find enough information to know if that is reliable or not.
",https://github.com/Modernizr/Modernizr/issues/1569
2,"TITLE: False positive on pointer lock BODY: Hi,

It seems that current Chrome Android has a `document.pointerLockElement` property even though the feature is unsupported (per [this](https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/XE-5S1As-Lk) at least). So pointer lock gets reported as supported.

I don't suppose anyone can think of a better way to check? The browser also has `el.requestPointerLock()` methods, though they don't appear to do anything, so I'm not sure there's any way to correctly check.
",https://github.com/Modernizr/Modernizr/issues/1591
1,"TITLE: Double font file loading (via google API) in Firefox when modernizr is loaded at end of body BODY: When loading modernizr at the end of the body tag instead of head tag, font file requests from the google API seem to be duplicated in Firefox. It works fine in Chrome though.

Is there anything specific about Firefox? Or can anything be done against it, respectively?
",https://github.com/Modernizr/Modernizr/issues/1603
3,"TITLE: CORS detection in Chrome when on file protocol BODY: I am in a current dev of a d3.js based html page that needs to load external files via xmlhttprequest (called in d3.xhr functions).

When testing the files locally, it works fine in Safari and Firefox on OSX 10.10.3, but Chrome won't allow xmlhttprequest with _file protocol_ for security reasons, but Modernizr.cors = true. Console error message:

> Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https, chrome-extension-resource.

Is there a way to test that in Modernizr.cors, or maybe create another Modernizr.cors__file_?
",https://github.com/Modernizr/Modernizr/issues/1604
4,"TITLE: video autoplay gives incorrect value in IE and Edge BODY: Using 3 videos on one page at a time to three different sources, all mp4 with autoplay enabled like so:
<video style=""width:100%; height:100%;"" autoplay loop muted>
<source src=""whatever.mp4"">
</video>

The video autoplays on the screen, however running the test like so:
function runTest() {
            console.debug(Modernizr);
            Modernizr.on('videoautoplay', function (result) {
                console.debug(result);
                if (result) { $('#result').html('Autoplay is supported'); }
                else { $('#result').html('Autoplay is NOT supported'); }
            });
        }
(called on button click)
- gives the message that Autoplay is NOT supported, despite the videos autoplaying before my eyes.

It does work correctly in Chrome.  I didn't get as far as testing it on iPhone as it failed this early.
Thank you for your attention!
",https://github.com/Modernizr/Modernizr/issues/1619
2,"TITLE: softhyphensfind bug BODY: softhyphensfind test scroll on top body if page refresh in Google Chrome 44.0.2403.155 (64-bit) 
",https://github.com/Modernizr/Modernizr/issues/1632
4,"TITLE: Occasional 'Aw, Snap!' in Chrome when devtools open BODY: We've been experiencing an occasional Aw, Snap (tab crash) in Chrome.  
- it only occurs when devtools are open
  - which devtools panel doesn't seem to matter
- it occurs roughly one in every 10 page reloads
  - sometimes less, sometimes more.  occurs every time when you're trying to show someone something ;)
  - the variation may be due to asynchronous loading of Modernizr with an AMD loader (RequireJS)
- we're using the development build of Modernizr, all tests included
- happens in Chrome in Linux and Macs, have not tested Windows
  - not sure on specific versions, but has been happening for about a year, and continues to happen in Chrome unstable (currently 44.0.2391.0 for me)

I just discovered this morning that Modernizr is the cause of these, so I'm pretty excited to finally bury this annoying development bug.  I see that there were some issues way back in Chrome 10 with Aw Snaps relating to the webgl test.  I'm going to try turning off all the tests we don't use and see if that helps.  I'll post here when more info surfaces.
",https://github.com/Modernizr/Modernizr/issues/1637
1,"TITLE: testAllProps set twice BODY: `ModernizrProto.testAllProps = testPropsAll;`, and then a few lines later, `ModernizrProto.testAllProps = testAllProps;` (or in a minified version, I have `…,w.testAllProps=v,w.testAllProps=y,…`). Sorry if I've misunderstood something, but it doesn't seem right - especially as the function has a different signature each time.
",https://github.com/Modernizr/Modernizr/issues/1645
1,"TITLE: chunit test false positive for MSIE BODY: While Internet Explorer actually does support the `ch` unit, the test should always report negative.
The `ch` unit is worded in the CSS Values and Units Module Level 3 as:

> Equal to the used advance measure of the ""0"" (ZERO, U+0030) glyph found in the font used to render it.
> &mdash; http://www.w3.org/TR/css3-values/#font-relative-lengths

The advance measure (or advance width, or simply advance) of a font glyph consists of the distance between the glyph's initial pen position and the next glyph's initial pen position.

By that definition `1ch` is equal the width of the ZERO glyph itself and the width of the sidebearings (the amount of space that pads the glyph outline on either side).

In Internet Explorer (and possibly Edge, I have not tested yet) the `ch` unit is based on only the width of the ZERO glyph itself. This results in `1ch` representing a drastically shorter distance than should be and makes it essentially useless for scenarios where one would otherwise intend to use the `ch` unit. (E.g. carefully balancing the widths of table cells to allow a set amount of digits or characters.)

---

Accompanying jsfiddle that illustrates the IE bug: http://jsfiddle.net/Ln8z69e8/
Updated jsfiddle that contains a correctly functioning Modernizr 2.x test: http://jsfiddle.net/Ln8z69e8/2/
",https://github.com/Modernizr/Modernizr/issues/1649
2,"TITLE: Configuration Options not working BODY: I'm using the following code to build modernizr:

``` javascript
var fs = require('fs');
var modernizr = require(""modernizr"");
var modernizrConfig = JSON.parse('' + fs.readFileSync('config.json'));

modernizr.build(modernizrConfig, function (result) {
    fs.writeFileSync('modernizr.js', result);
});
```

And my `config.json` looks like this:

``` json
{
    ""classPrefix"": ""test"",
    ""enableJSClass"": false,
    ""enableClasses"": false
}
```

However, when I build modernizr, it still sets css classes.
I look into the resulting build file, and I see this:

``` javascript
// Any settings that don't work as separate modules
// can go in here as configuration.
_config: {
    'classPrefix' : 'test',
    'enableClasses' : true,
    'enableJSClass' : true,
    'usePrefixes' : true
},
```
",https://github.com/Modernizr/Modernizr/issues/1663
2,"TITLE: Emoji test produces false negative in Firefox 41.0 on OS X 10.10 BODY: The Emoji test is producing a false negative in the Firefox stable on OSX 10.10.

Test case: https://jsbin.com/vuseci/edit?html,css,js,output
(uses https://modernizr.com/download/?canvas-canvastext-emoji-dontmin-setclasses)

Reduced: https://jsbin.com/caniva/edit?html,js,output
",https://github.com/Modernizr/Modernizr/issues/1688
2,"TITLE: transform3d detected false in chrome BODY: Chrome version: 45.0.2454.101 m

``` javascript
testStyles(mq, function( elem ) {
  ret = elem.offsetLeft === 9 && elem.offsetHeight === 5;
  // here, elem.offsetLeft is 8 and elem.offsetHeight is 0
});
```
",https://github.com/Modernizr/Modernizr/issues/1690
2,"TITLE: Certain builds contain syntax errors BODY: Unsure which specific thing causes this since inputtypes seems to work on it's own...?

This is in the output:

![http://slex.me/image/0G2f113m0n1M/Screen%20Shot%202015-10-13%20at%202.43.50%20AM.png](http://slex.me/image/0G2f113m0n1M/Screen%20Shot%202015-10-13%20at%202.43.50%20AM.png)

Original issue: https://github.com/Modernizr/Modernizr/issues/409#issuecomment-147628057 - cc @ radekolbas

Here's a codepen with this output:

https://codepen.io/anon/pen/xwLabm

Here's the original build link:

https://modernizr.com/download/?apng-backdropfilter-backgroundblendmode-backgroundcliptext-backgroundsize-bgpositionshorthand-bgpositionxy-bgrepeatspace_bgrepeatround-bgsizecover-borderimage-borderradius-boxshadow-boxsizing-canvas-canvastext-checked-cssall-cssanimations-csscalc-csschunit-csscolumns-cssescape-cssexunit-cssfilters-cssgradients-csshyphens_softhyphens_softhyphensfind-cssinvalid-cssmask-csspointerevents-csspositionsticky-csspseudoanimations-csspseudotransitions-cssreflections-cssremunit-cssresize-cssscrollbar-csstransforms-csstransforms3d-csstransitions-cssvalid-cssvhunit-cssvmaxunit-cssvwunit-cubicbezierrange-devicemotion_deviceorientation-displaytable-ellipsis-flexbox-flexwrap-fontface-generatedcontent-hiddenscroll-hsla-ie8compat-inlinesvg-inputtypes-lastchild-mediaqueries-multiplebgs-nthchild-objectfit-opacity-overflowscrolling-preserve3d-regions-rgba-shapes-siblinggeneral-subpixelfont-supports-svg-svgclippaths-svgfilters-svgforeignobject-target-textalignlast-textshadow-userselect-willchange-wrapflow-printshiv-setclasses
",https://github.com/Modernizr/Modernizr/issues/1707
5,"TITLE: webkit bug (csstransforms3d) BODY: The error occurs in the browser webkit! 
Csstransforms3d = false if you change Zomm = 90% ??? O_o 
csstransforms3d = true if you change Zomm = 100%

[DEMO img](https://www.dropbox.com/s/nb6v6serrycoc6e/111111111111.PNG?dl=0)

[test file:](https://www.dropbox.com/s/bey81e9exuw0xl3/bag.html?dl=0)

My config:

``` javascript
{
  ""minify"": true,
  ""options"": [
    ""domPrefixes"",
    ""prefixes"",
    ""prefixed"",
    ""prefixedCSS"",
    ""setClasses""
  ],
  ""feature-detects"": [
    ""test/css/filters"",
    ""test/touchevents"",
    ""test/css/transforms"",
    ""test/css/transforms3d"",
    ""test/css/transitions"",
    ""test/css/flexboxlegacy"",
    ""test/img/webp""
  ]
}
```
",https://github.com/Modernizr/Modernizr/issues/1726
3,"TITLE: Installing using Build-URL via Bower strips off dash in class-prefix BODY: When using `https://modernizr.com/download?dontmin-setClasses-cssclassprefix:has-.zip` as Bower dependency, the resulting custom build contains `'classPrefix' : ""has""`, missing the `-`.
",https://github.com/Modernizr/Modernizr/issues/1736
2,"TITLE: Breaking change in no-js/js behavior moving from v2 to v3 BODY: Modernizr v2.x removes out the `no-js` class and then **unconditionally** adds a `js` class, whether `no-js` was present or not.

Modernizr v3.x changes this behavior and will **swap** the `no-js` class with the `js` class.

If you send a document that does _not_ set the `no-js` class initially, this may lead to the rendering of the document completely breaking. 

There is no migration guide that mentions this type of change. The API documentation for the new `enableJSClasses` option mentions: ""Whether or not to update `.no-js` to `.js` on the root element."", but the actual entry in the 3.x release notes mentions: ""New `enableJSClass` build option, which determines whether or not to add js/no-js classes to the <html> element when Modernizr runs; true by default (#1385)""

The behavior should either be rectified or there should be a much **much** more clear indication to users that are upgrading, that this behavior has changed.
",https://github.com/Modernizr/Modernizr/issues/1742
3,"TITLE: Detect data URI in links support with Modernizr BODY: Using data URI in links (<a href=""data:) is not supported in IE and Microsoft Edge. MSDN claims that this is [for security reasons](https://msdn.microsoft.com/en-us/library/cc848897.aspx).

I'm trying to use Modernizr to detect data URI in links support.

`Modernizr.datauri` is not quite what I'm looking for, as it does not tell anything about support data URI **in links**, e.g. for Microsoft Edge it returns object `{over32kb: true}`

How can I detect using Modernizr if data URI in links is supported in browser?
",https://github.com/Modernizr/Modernizr/issues/1747
1,"TITLE: CSS ""vw unit"" test fails when <body> css is ""overflow-y: scroll"" BODY: Hi
in this closed issue #1410 we found that if you set up CSS to ""overflow-y: scroll"" on body, test fails and return FALSE even if you use last FF or Chrome which surely supports view port units.

``` css
body {
    overflow: scroll;
}
```
",https://github.com/Modernizr/Modernizr/issues/1752
3,"TITLE: Modernizr.csstransforms3d returns false negative in chrome 46 BODY: Chrome Version 46.0.2490.80 m
http://www.vqconstruction.com/services/

I believe the use of the defer or async attribute causes the false negative on this page about 10% of the time.
",https://github.com/Modernizr/Modernizr/issues/1753
5,"TITLE: Add feature test for box-decoration-break BODY: Recently I've been stumbling into use cases for the box-decoration-break property, but haven't implemented any as I havent found a way to write a feature test for this. Is this something that could be implemented into Modernizr?

Thanks, and kind regards,

Gerben van Dijk, Qikker Online
",https://github.com/Modernizr/Modernizr/issues/1762
4,"TITLE: hiddenscroll not working on Chrome (OS X) BODY: On OS X El Capitan with Chrome 46.0.2490.86 (64-bit) `Modernizr.hiddenscroll` returns true even if the scrollbars are set to ""show always"".

On Firefox everything works correctly.
",https://github.com/Modernizr/Modernizr/issues/1771
5,"TITLE: Builder on site returning undefined BODY: I'm getting the file `modernizr-custom.js` with just `undefined` inside, using this url

https://modernizr.com/download?cookies-csstransforms-csstransforms3d-csstransitions-flexbox-flexboxlegacy-hashchange-history-hsla-inlinesvg-localstorage-opacity-placeholder-rgba-sessionstorage-svgasimg-svgfilters-setclasses

Happening on Firefox and Chrome. The devtools shows nothing wrong (script exception or such)
",https://github.com/Modernizr/Modernizr/issues/1780
2,"TITLE: Using csshyphens test breaks anchors on page load BODY: Steps to reproduce:
Load a page using the Modernizr csshyphens test with an anchor/hash in the URL e.g. https://github.com/#some-anchor-link

Observed behaviour:
Page initially moves to desired element but then jumps back up to the top of the page

Desired behaviour:
Anchors should be respected on page load.

Notes:
It took me an age to get to the bottom of this and I was concerned that I might not be correct about the cause of the issue so I created a standalone test. Below are links to two basic HTML files that reference a full development build of Modernizr with and without the csshyphens test. The one with csshyphens test creates the issue described above. The one without works as expected.

With hyphens:
http://alexbaulch.com/modernizr-hyphens-issue/modernizr-with-hyphens.html#section-3

Without hyphens
http://alexbaulch.com/modernizr-hyphens-issue/modernizr-without-hyphens.html#section-3
",https://github.com/Modernizr/Modernizr/issues/1781
3,"TITLE: Modernizr v3 flash detect always returning {block: true} on Mac Safari 9.0 and Windows 10 Edge BODY: On Mac Safari v9 and Windows 10 Edge browser flash detects always returns {block:true}, works fine on other browsers.
",https://github.com/Modernizr/Modernizr/issues/1789
4,"TITLE: @font-face false negative on Android/Firefox 42.0.2 BODY: current @font-face detection returning false on android/firefox (version testet on: android 5.1/6.0, firefox 42.0.2)

@font-face is working well
",https://github.com/Modernizr/Modernizr/issues/1792
1,"TITLE: false detect: CSS-filters, svg-filters BODY: Hi there,

I’m trying to use css-filters with fallback via svg-filters on my web site. Although both are not working on Android stock browser (Samsung Galaxy S5) and Internet Explorer 12 (Windows 7), modernizr puts on both test devices the classes .cssfilters and .svgfilters to the html element.

Would be nice if this could be fixed.

As far as I could get, Internet Explorer supports svg filters only on elements included in the svg (so not via filter: url(filter.svg#filter);). Maybe it would be a good idea to differentiate between svg filters being used in an svg and svg filters being used in a css property.

edit: seems like this is an older problem mentioned in #606 – is there any update?
",https://github.com/Modernizr/Modernizr/issues/1797
5,"TITLE: No longer possible to pass path to custom tests to Modernizr.build BODY: It's no longer possible to pass the paths to custom tests to Modernizr.build, as it fails trying to load the property while generating the buildQuery. This used to work with previous versions of Modernizr v3.
",https://github.com/Modernizr/Modernizr/issues/1799
4,"TITLE: Updated Test for CSS Scroll Snap  BODY: Hey again guys.

I opened a previous case on this (https://github.com/Modernizr/Modernizr/issues/1777) and the test I proposed for detecting scroll snap points was implemented.

However, I've revised it and wanted your feedback

```
  //detect if we support scroll snap or not (not the best but should work)
  var scrollSnap = false;
  if ('webkitScrollSnapType' in document.documentElement.style) {
    scrollSnap = true;
  } else if ('msScrollSnapType' in document.documentElement.style) {
    scrollSnap = true;
  } else if ('scrollSnapType' in document.documentElement.style) {
    scrollSnap = true;
  }
```

This way we can detect support by checking `scrollSnap` to see if it's true.

Also I wanted to know how you guys handle partial support? Because FF Supports the current standard really well, however both Safari and IE10+ support it but only certain parts of the spec. I'm not sure if they should return true or false. I could build a more comprehensive test that checks for all the good parts of the spec you actually need and return true or false?

I would personally really like a multi test that tells me either it's fully supported or only partially supported (so people can build conditionally based on that)

I've also written an article and examples that might be useful 
- SitePoint Article: http://www.sitepoint.com/intuitive-scrolling-interfaces-with-css-scroll-snap-points/
- Full page example: http://codepen.io/SitePoint/pen/EPapXK/
- Lots of smaller examples on my codepen: http://codepen.io/simoncodrington/pens/public/?grid_type=list

I'm trying to build that example so it works well in both IE10+, Safari + FireFox (as without some support for some properties of the spec it doesn't work reliably)

Have a good day!

Simon
",https://github.com/Modernizr/Modernizr/issues/1800
4,"TITLE: vh unit issue on ios safari BODY: Even though the latest ios safari supports vh units, modernizr is passing negative class ""no-cssvhunit"".
",https://github.com/Modernizr/Modernizr/issues/1805
4,"TITLE: New getUserMedia API BODY: I'm working on [updating HTML5Rocks article on `getUserMedia`](https://github.com/html5rocks/www.html5rocks.com/issues/1417) to reflect changes made to the spec and implementations.
The article suggests feature detection using Modernizr, but [currently Modernizr doesn't support new API](https://github.com/Modernizr/Modernizr/blob/5e3f359bfc9aa511543ece60bd8a6ea8aa7defd3/feature-detects/webrtc/getusermedia.js). So I'm thinking about sending a PR :-)

How should I do? Adding feature detection of the new API to the current test doesn't sound good as the new API is now Promise-based and relocated to `navigator.mediaDevices.getUserMedia()`. So I'm thinking about adding a separate test targeting new API, but wondering what I should call it.
",https://github.com/Modernizr/Modernizr/issues/1812
2,"TITLE: Modernizr.csstransforms3d returns false negative in chrome iFrame BODY: See https://github.com/Modernizr/Modernizr/issues/590 for details and https://code.google.com/p/chromium/issues/detail?id=129004 for some background
",https://github.com/Modernizr/Modernizr/issues/1817
2,"TITLE: No no-js→js swap if Add CSS Classes is unselected BODY: If “Add CSS Classes” is unchecked when selecting detects, the html no-js→js class swap is not made, because the code that make it doesn't exist in the build.  
But source, when “Add CSS Classes” is selected, says: 
`// Change `no-js` to `js` (independently of the `enableClasses` option)`
",https://github.com/Modernizr/Modernizr/issues/1826
2,"TITLE: Modernizr.localizednumber moves head below body BODY: I randomly noticed that when running an unminified full build version of Modernizr 3.3.0, the DOM was being changed so that the head element was ending up below body.

I've narrowed it down to the localizednumber test, and its setting of the root variable.

Probably not a big problem, but I doubt that this is intended.
",https://github.com/Modernizr/Modernizr/issues/1836
2,"TITLE: `datauri` false negative in Firefox 43.0.x BODY: Modernizr version is 3.3.1.
Did anyone else experience this?

The operating systems this was logged with to our error logging are OSX 10.10, Win 7, Win 10 and Win Vista so it seems its a general Firefox problem?
",https://github.com/Modernizr/Modernizr/issues/1846
1,"TITLE: bug forms/inputnumber-l10n BODY: if i use this feature after update page occur scroll to bottom page
",https://github.com/Modernizr/Modernizr/issues/1850
5,"TITLE: Publish each feature detect as a stand-alone npm module BODY: Similar to what lodash does with its publishing, I think it would be nice if modernizr published each feature detect as a stand alone module.  For example, I would really like to just `var supportsHistory = require('modernizr.history')()`, but instead I just copied out the [one test my module needs](https://github.com/wesleytodd/nighthawk/blob/master/lib/supports-push-state.js).
",https://github.com/Modernizr/Modernizr/issues/1861
3,"TITLE: Possible to add Dolby Digital Plus to Modernizr? BODY: Hey Team!
I have been speaking to Patrick Kettner about adding Dolby Digital Plus to Modernizr.
I had talked about adding the following support:

bool.dolbydigitalplus = elem.canPlayType('audio/mp4; codecs=""ec-3""') .replace(/^no$/, '');

The only issue I found was that sometimes the canPlayType can throw a false positive on older browsers for ec-3.  I have been hard coding the detection for Windows Edge and Safari 9 (El Capitan) presently however any comments would be much appreciated!  If supporting these browsers is not an issue then I imagine the above code could be implemented fairly quickly..

iPhone 4s Mobile Safari
iPad 2 Mobile Safari
Mac 10 Safari 5.1
Windows 7 Safari 5.1

Thanks!
",https://github.com/Modernizr/Modernizr/issues/1864
1,"TITLE: Optionally set an element to append classes to BODY: I have a use case where I want to use Modernizr but want the CSS classes to be appended to a certain element in the DOM that's not the html tag.

I could use the JS API to append the features I care about, but thought I'd see if anyone else would find being able to specify a different element useful/if it fits the design ideals first. Happy to create a PR if so
",https://github.com/Modernizr/Modernizr/issues/1882
1,"TITLE: Flash blocking detection fails if the tab is out of focus BODY: Modernizr always returns Modernizr.flash.blocked = true if the tab is out of focus. 

Tested in last stable Windows and Mac Chrome build, Safari 9.0.3 for Mac, last stable version of Firefox for Mac (I imagine Windows it's going to be the same).

You can test it by running the tests page, type the url, press enter, focus another tab and return once page is loaded: https://modernizr.github.io/Modernizr/test/

I guess if the check waits for the tab to be focused we could solve this problem...
",https://github.com/Modernizr/Modernizr/issues/1885
5,"TITLE: Can we re-run tests ? BODY: It appears that when Modernizr executes it set the state of all tests and it is not possible to re-evaluate any/all tests.

The reason I ask is that we have some conditional polyfills that would change a test from false to true.  Actually working out when the polyfill script is downloaded AND executed is problematic cross-browser so we need constantly check in a timeout/interval.

At the moment I'm explicitly setting the Modernizr.{test} to true at the end of the polyfill ( which also means I have to update the polfill script ) but it would be nice just to ask Modernizr to re-evaluate all loaded tests.  
",https://github.com/Modernizr/Modernizr/issues/1911
5,"TITLE: Download builder doesn't work properly in Safari BODY: If I use the Modernizr download builder in Safari and filter the list of features, the custom build only includes the checked features that are visible within the filter.

For example, I wanted to download a custom build to detect CSS Animations and CSS Pointer Events. So I filtered the list to ""animations"" and checked ""CSS Animations,"" then filtered the list to ""pointer"" and checked ""CSS Pointer Events.""

With the filter still set on ""pointer,"" when I click the Build button and download the build, it only includes the detect for CSS Pointer Events. But if I clear the filter first and then download, the build includes both detects as expected.

This only happens in Safari (9.0.3); I tried the same in Firefox and it works as expected.
",https://github.com/Modernizr/Modernizr/issues/1921
5,TITLE: Form input types not working BODY: Classes for input types are not appended to the HTML element.,https://github.com/Modernizr/Modernizr/issues/2173
1,"TITLE: vwunit issue in IOS browser BODY: I'm having some weird issues while detecting vwunit in ios devices.

I've build my own custom detection in Modernizr.com,
While only selecting vwunit for my detection, ios devices will return false,
but when adding both vwunit and vhunit, vwunit will return true.

![12674119_10153651000993853_1468572724_n](https://cloud.githubusercontent.com/assets/6106265/13872424/922eacb6-ed25-11e5-8dec-e67686b2982d.jpg)
![12596210_10153651000983853_806662406_n](https://cloud.githubusercontent.com/assets/6106265/13872425/922f39c4-ed25-11e5-971f-5f4cbffce35e.jpg)
",https://github.com/Modernizr/Modernizr/issues/1930
1,"TITLE: FeatureDetects for audiopreload, videoautoplay, and blobworkers are flakey. BODY: Repro's in the latest version of Chrome and Edge in both v3.3.1 and master branches of Modernizr
### Steps
1. Run tests @ https://modernizr.github.io/Modernizr/test/ 10 times.
2. Notice that the feature detection results for _audiopreload_, _videoautoplay_ and _blobworkers_ fluctuates between **pass** and **fail** a handful of times. 
",https://github.com/Modernizr/Modernizr/issues/1933
5,"TITLE: Chrome 50 no longer allows geolocation on unsecure pages (http) BODY: Just saw the [news for chrome 50](https://developers.google.com/web/updates/2016/04/geolocation-on-secure-contexts-only) that geolocation is not going to work on http pages but it still returns true for our test `'geolocation' in navigator` and infact will only show an unhelpful warning in chrome only when you request the position.

![screen shot 2016-04-30 at 4 26 23 pm](https://cloud.githubusercontent.com/assets/143402/14934309/59092fa0-0ef0-11e6-9af9-47e92e5587bc.png)

I've added a [comment to a bug report](https://bugs.chromium.org/p/chromium/issues/detail?id=605938#c3) saying the warning is too ambiguous and they've mentioned that they'll throw an error on `navigator.geolocation.getCurrentPosition()` calls but it'd be ideal if `'geolocation' in navigator` just returned false instead.

Tracking issue here until we know what direction they'll be taking.
",https://github.com/Modernizr/Modernizr/issues/1966
2,"TITLE: CSS transforms on SVG elements BODY: Would like to be able to detect whether or not CSS transforms are supported on SVG elements. I know IE doesn't currently support it.
",https://github.com/Modernizr/Modernizr/issues/1985
2,"TITLE: On pageload HTML5 input element with autofocus losing focus  BODY: On pageload the function ""test_hyphens_find"" will unfocus an HTML5 input element with attribute autofocus.

Using 3.3.1 with all features..
",https://github.com/Modernizr/Modernizr/issues/1987
5,"TITLE: Modernizr.hasEvent doesn't work with animationend BODY: The hasEvent method doesn't seem to detect when the animationend event is supported.

The following code evaluates to false in FF 45.

```
Modernizr.hasEvent(""animationend""); // false
```
",https://github.com/Modernizr/Modernizr/issues/1997
1,"TITLE: Modernizr failing to know when WebGL has been disabled. BODY: Hi there. 

I'm utilizing Modernizr to test for WebGL. Whenever I disable WebGL in my browser, Modernizr still thinks its enabled. I've disabled WebGL in Chrome and Firefox; both times, Modernizr acts as if it's still enabled and so my page happily runs (though my graphics don't, which proves that WebGL _is_ disabled).

For example:

```
if (!Modernizr.webgl) {
   alert(""NO!"");
}
else if (Modernizr.webgl) {
   alert(""YES!"");
}

```

With the above code, whether WebGL is enabled or disabled, the window alerts, ""YES!"". Again, when WebGL _is_ disabled, no graphics load as expected. I also know that I can inspect the HTML class and CSS; both return `webgl` as opposed to `no-webgl`.

Interestingly, my IDE cannot resolve ""webgl"" in (Modernizer.webgl), yet a TRUE value still falls through. I checked modernizer-custom.js to check if the webgl feature test was in there and it is.

Any suggestions?

Thanks :]
",https://github.com/Modernizr/Modernizr/issues/2009
5,"TITLE: modernizr cli can run into problems with backslashes BODY: I noticed this problem when running the modernizr cli tool as part of a build on Azure App Service.

I get a message like the following:

```
remote: { Error: Tried loading ""lib/build-query"" at \\$IPADDRESS\volume-9-default\24032db7207b2c60a484\7c6db8ef7adc465e85f15883daaeb24d\site\repository\node_modules\modernizr\lib/../src/\\$IPADDRESS\volume-9-default\24032db7207b2c60a484\7c6db8ef7adc465e85f15883daaeb24d\site\repository\node_modules\modernizr\lib/build-query.js then tried node's require(""lib/build-query"") and it failed with error: Error: Cannot find module 'lib/build-query'
```

Since my build is running in a Docker container I was confused about the backslashes for a while, but I realised the part of the build that is tripping up is running on Windows (explaining the `remote:` part of the log message).

It seems like the cli tool and underlying tools should try to normalise backslashes in paths.
",https://github.com/Modernizr/Modernizr/issues/2019
2,"TITLE: detect ability to open multiple video streams concurrently BODY: How to detect what is possible in regarding to opening multiple video streams concurrently?

For example, on macOS Chrome it is possible to open multiple html5 videos on the same page.
This is not possible on some chromebooks.
",https://github.com/Modernizr/Modernizr/issues/2041
2,"TITLE: CSS: Generated Content Transition BODY: Hi, I read all of these search results : 
[Modernizr Issues on transiton generated content](https://github.com/modernizr/modernizr/issues?q=css+generated+content+is%3Aclosed).
but I didn't understand how to fix this problem. I need to detect this feature. 
Could help me? 
",https://github.com/Modernizr/Modernizr/issues/2048
2,"TITLE: How about automatic commit message style validation? BODY: In comparison to, for example, [agnuar.js](https://github.com/angular/angular.js/commits/master) or [jquery](https://github.com/jquery/jquery/commits/master), modernizr has a rather ragtag commit history where developers do not really follow any particular message style. Would you like your commit history to look more unified?

A possible way to support a single commit message style is to have a git hook that checks the style, like so:

![record_ember](https://cloud.githubusercontent.com/assets/962850/17145358/ddf91c8e-536a-11e6-8087-03e36cb05811.gif)

And you guessed it, there is an npm module [`commitplease`](https://www.npmjs.com/package/commitplease) that does just that and is used by jQuery Core, jQuery UI, jQuery Mobile, Globalize and QUnit. Would you like to give that a try?

Disclaimer: I am developing for commitplease
",https://github.com/Modernizr/Modernizr/issues/2050
1,"TITLE: ES5 feature test fails with the minified build version BODY: Hello,

In this file Modernizr/feature-detects/es5/syntax.js there are two encoded UTF-8 characters \u200c and those ones seem to be converted by the build process when you request the minified version. This is not the case with the normal version.

https://modernizr.com/download?es5
https://modernizr.com/download?es5-dontmin

Then the problem is that the result of Modernizr.es5 returns false with the minified version, not with the normal version.
Same problem with FF 48.0.1 and Google Chrome 52.0.2743.116 m.

I have downloaded built versions from the website, this is not a source code copy/paste into existing files, so there are no conversions from my part.

Moreover, if I modify the minified version and I replace the invisible characters by \u200c\u200d , the minified version works again.

Regards.
",https://github.com/Modernizr/Modernizr/issues/2059
1,"TITLE: videoautoplay test inconsistent on mobile Chrome BODY: Here' the user agent I'm testing with:
Mobile Chrome 52 on a Galaxy S5

Mozilla/5.0 (Linux; Android 6.0.1; SM-G900P Build/MMB29M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.98 Mobile Safari/537.36

The problem is that the videoautoplay test says the browser does support autoplay, but the video on the page isn't autoplaying, and I read that autoplay definitely isn't supported on mobile Chrome.

I added some debug statements to the Modernizr test and found that on the 4th try `elem.currentTime` was equal to `0.1`. The video isn't playing though, calling `play()` on the element doesn't do anything. and video's currentTime is 0 (checked in the console).

Here's my HTML (I'm using Angular 1.5):

```
<video ng-if=""showVideo"" muted loop autoplay
  width=""{{width}}""
  height=""{{height}}"">
    <source ng-if=""mp4.url"" ng-src=""{{::mp4.url}}"" type=""video/mp4"">
    <source ng-if=""webm.url"" ng-src=""{{::webm.url}}"" type=""video/webm"">
</video>
```

`showVideo` is determined by the output of the Modernizr test.

What's weird is, I just noticed that if I switch to `autoplay=""autoplay""` on my video, the Modernizr test returns `false` as it should. I don't see why an attribute on my video should affect the test video Modernizr uses.

Update:
Nevermind about `autoplay=""autoplay""` making it work, that was a red herring. It's incorrectly returning `true` again.
",https://github.com/Modernizr/Modernizr/issues/2061
1,"TITLE: New release? BODY: Hi all :)

I noticed that you replaced the dependency `marked` quite a while ago because it was known to be insecure. Unfortunately you didn't release any new version since then. Is there a specific reason for this?
",https://github.com/Modernizr/Modernizr/issues/2068
1,"TITLE: webaudio detect description wrong BODY: I believe the description in the comments of the webaudio feature detection is wrong.

The description says:

> Detects the older non standard webaudio API, (as opposed to the standards based AudioContext API)

While the notes reference this W3C spec, which seems to be the one that uses AudioContext:
https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html

And the detect code seems to check for the presence of AudioContext:
`var prefixed = 'webkitAudioContext' in window;
    var unprefixed = 'AudioContext' in window;`
",https://github.com/Modernizr/Modernizr/issues/2085
4,"TITLE: prefixed requestFullscreen failing on Firefox 49 BODY: `Modernizr.prefixed(""requestFullscreen"", elem)` returns `false` in Firefox 49 although `Modernizr.fullscreen` returns `true`.
`elem.mozRequestFullScreen` is true. 

Because of this I am forced to hardcode vendor prefixes and not use `Modernizr.prefixed`.

Is this a bug? I generally find Modernizr's prefixed support in js hit and miss.
",https://github.com/Modernizr/Modernizr/issues/2098
2,"TITLE: deprecating old detect code BODY: im nearly done with the es6 modules rewrite, and am shoring up the testing infra. One thing that has been sticking in my craw is the handful of places we have fallbacks for super old and hard to test code paths.

[hasEvent](https://github.com/Modernizr/Modernizr/blob/5eea7e2a213edc9e83a47b6414d0250468d83471/src/hasEvent.js#L51-L70) is bugging me at this moment. This chunk is for ff < 4

Since the es6 rewrite will need to be a major version bump in case folks are using the `require`able  code, I believe now would be a good time to remove this. If no one has a problem with this by the time I am finished with the rewrite (should be days/weekish), then I will take that as tacit approval.

ping @paulirish @SlexAxton @ryanseddon 
",https://github.com/Modernizr/Modernizr/issues/2099
4,"TITLE: generatedcontent + chrome + zoom, part deux BODY: I am experiencing an issue that sounds virtually identical to #1935.

In the latest version of Chromium-based browser (`Version 53.0.2785.143 built on Debian stretch/sid, running on Debian stretch/sid (64-bit)`, and probably earlier), when a user zooms (in my cases, ""in"" to >= 110% on one machine (Debian Sid/Chromium), and ""out"" on another (Mac OS/Google Chrome)).

The Mac OS machine, I think is using Apple's ""high resolution"" stuff, where-as the Linux machine isn't doing anything special for ""high resolution"" and that may be the difference between the two.  I tried playing with the device pixel ratio in the Chromium device emulator on the Linux machine, but the behavior was un-changed.  I don't have ready access to the Mac OS machine, but I can get to it if desired.

This is from a custom build of Modernizr 3.3.1, `https://modernizr.com/download/?-cookies-cors-ellipsis-filereader-flexbox-flexwrap-generatedcontent-history-inlinesvg-json-lastchild`.
",https://github.com/Modernizr/Modernizr/issues/2104
1,"TITLE: gradient safari 9.1 BODY: Hi,
why Modernizr not detecting gradient support on safari 9.1?
thx
",https://github.com/Modernizr/Modernizr/issues/2106
2,"TITLE: Wrongly detects cssvhunit when Chrome DevTools device mode is open BODY: When you toggle the device toolbar in Chrome (on Mac) and reload the page, the detection of cssvhunit will be a false negative. I fixed this by adding a test that checks for cssvhunit || cssvmaxunit, as vmax will probably never work if vh doesn't work.
",https://github.com/Modernizr/Modernizr/issues/2110
4,"TITLE: flexwrap not being returned. BODY: Per docs in order to calculate flex-wrap we need to do:

```
if (Modernizr.flexbox && Modernizr.flexwrap) {
  // Modern Flexbox with `flex-wrap` supported
}
```

But Modernizr.flexwrap always return undefined
",https://github.com/Modernizr/Modernizr/issues/2111
2,"TITLE: False Positive with Modernizr.inputtypes.date in Chrome. BODY: Modernizr.inputtypes.date returns true in desktop chrome while returning false in desktop firefox.
",https://github.com/Modernizr/Modernizr/issues/2112
4,"TITLE: Uncaught SecurityError: Failed to execute ""getImageData"" on emoji test BODY: I've got a user reporting the following error from Modernizr:

> Uncaught SecurityError: Failed to execute 'getImageData' on 'CanvasRenderingContext2D': The canvas has been tainted by cross-origin data.

This comes from the following line: https://github.com/Modernizr/Modernizr/blob/5eea7e2a213edc9e83a47b6414d0250468d83471/feature-detects/emoji.js#L23

I can't personally reproduce the issue, but the user is running Linux (unsure of the distro) and Chromium [Version 53.0.2785.143 (64-bit)], both with and without extensions. I think the safe behavior here would just be to wrap this in a try/catch statement, and default to false if something goes wrong in there.",https://github.com/Modernizr/Modernizr/issues/2117
4,"TITLE: WebM Video Alpha Detection BODY: I wrote some code to detect alpha channel support in WebM video (VP9).

http://stackoverflow.com/questions/29416579/how-to-feature-detect-if-browser-supports-webm-alpha-transparency/40511297#40511297

It might be a nice thing to include in Modernizr.",https://github.com/Modernizr/Modernizr/issues/2118
5,"TITLE: Including csspseudotransitions causes issues with build BODY: `csspseudotranstions` references _prefixes. If `_prefixes` is not included in the build, errors are thrown. 

https://modernizr.com/download?cssanimations-csspseudotransitions-cssreflections-csstransitions-flexbox-flexwrap-inlinesvg-smil-svg-svgasimg-svgclippaths-svgfilters-svgforeignobject-addtest-dontmin-printshiv-setclasses-testprop

Properties either need to auto-select feature requirements or the docs need to be updated to note that `_prefixes` is required if including this feature.

```
  Modernizr.addTest('csspseudotransitions', function() {
    var result = false;

    if (!Modernizr.csstransitions || !window.getComputedStyle) {
      return result;
    }

    var styles =
      '#modernizr:before { content:"" ""; font-size:5px;' + Modernizr._prefixes.join('transition:0s 100s;') + '}' +
      '#modernizr.trigger:before { font-size:10px; }';
```",https://github.com/Modernizr/Modernizr/issues/2119
5,"TITLE: Add a function to test all features at once BODY: I'm building a custom Modernizr via a Webpack loader using [modernizr-loader](https://www.npmjs.com/package/modernizr-loader). 

To test all features you have to loop over the resulting object and check each feature separately to know if all tests pass.

The feature strings used to configure the build are also not the same as the ones to check the resulting boolean props. For example `css/backgroundsizecover` config becomes `bgsizecover` on the built Modernizr.

Therefor I need to:
* Keep two separate lists of features. One for configuring and one for testing
* Loop over all of the test properties explicitly to know if they all passed.

This feels silly. To solve this I think it would be very useful to have a `testAll()` or something which just tests all of the features in the build and returns a boolean.
",https://github.com/Modernizr/Modernizr/issues/2126
5,"TITLE: Please add for a new datalist polyfill BODY: Can be found here:

https://github.com/Fyrd/purejs-datalist-polyfill

Seems to work fine",https://github.com/Modernizr/Modernizr/issues/2127
2,"TITLE: Modernizr.inputtypes no class set. BODY: Tested this in latest Chrome, Safari, and Firefox. No class set for any input types.",https://github.com/Modernizr/Modernizr/issues/2130
1,"TITLE: `touchevents` is `true` on Chrome 54+ Windows BODY: The file [`touchevents.js`](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js) contains the following comment:
> Chrome (desktop) used to lie about its support on this, but that has since been rectified: http://crbug.com/36415

This is actually no more true, since `'ontouchstart' in window` returns `true` on Chrome 54+ on Windows (I personally tested Chrome 55 on Windows 10).

Are you aware of any workaround to fix it?",https://github.com/Modernizr/Modernizr/issues/2134
5,TITLE: ES6 arrow feature detect is not being released BODY: Is there any reason for [arrow.js](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/es6/arrow.js) not being released (e.g. [3.3.1](https://github.com/Modernizr/Modernizr/tree/v3.3.1) tag)?,https://github.com/Modernizr/Modernizr/issues/2139
3,"TITLE: Console error in Firefox due to getComputedStyle in hidden IFrame BODY: This error was fixed in other cases under #1443 but I am seeing it happen in a hidden IFrame as a result of the ruby feature detection test:

https://github.com/Modernizr/Modernizr/blob/5eea7e2a213edc9e83a47b6414d0250468d83471/feature-detects/elem/ruby.js#L47 

The call on that line doesn't check if `document.defaultView.getComputedStyle(element, nil)` is nil before calling `getPropertyValue` on it. When in an IFrame, this is a nil reference and causes Modernizr to fail to load.

Workaround is to not include the ruby element test.",https://github.com/Modernizr/Modernizr/issues/2142
1,"TITLE: modernizr interferes w/ correct display of embed/iframe player BODY: When modernizr is activated on may page epk.cascadia.ag the embed bandcamp player won't display correctly (tracklist missing, slider in weird place). You can find the embed player by clicking on project 3...

Any thoughts how to fix this or why this is happening?",https://github.com/Modernizr/Modernizr/issues/2143
2,"TITLE: docs: error API item of CSS class/JS property BODY: The docs of API:

https://modernizr.com/docs#modernizr-api

May have wrong text with CSS class/JS property below:

""animation"" -> ""webanimations"" ?

""csshairline"" -> ""hairline"" ?

""directory"" -> ""fileinputdirectory"" ?

""webp-lossless"" ->""webplossless"" ?

""atobbtoa"" -> ??

""matchmedia"" -> ??

If detect features on the LEFT SIDE, the result is undefined:

```javascript
Modernizr.on('webp-lossless', v => console.log(v))
```

But using the right side, it can show the result.

",https://github.com/Modernizr/Modernizr/issues/2144
1,"TITLE: Modernizr + bootstrap only showing blank white page issue BODY: Bootstrap has this file
https://github.com/twbs/bootstrap/blob/96d8553becfdf219c40e046e1202d4f2a2723010/scss/mixins/_visibility.scss#L4

When the hidden attribute is selected in the Modernizr feature composer the hidden attribute gets added to the html tag.
This causes the html tag to get display:none and a complete blank page with correctly made up invisible content to show up.
This is undesireable for reasons.

I'm not sure if the fix should be with modernizr changing the attribute name, or implementing that if it's added that a style=""display:initial !imporant;"" is added to the html tag if the hidden attribute is selected.

I'm also cross posting this at the bootstrap github, if they can make their hidden selector into `html .hidden`

I fixed it for myself in my style, by overwriting the important styling rule, but it is a thing to consider, and maybe add to the documentation.

",https://github.com/Modernizr/Modernizr/issues/2147
3,"TITLE: touchevents check gives a false positive in Chrome for some specific scenarios with zoom involved BODY: In short:
In some cases, when Chrome and Windows font size is zoomed, the touchevents check gives a false positive.

In detail:
Windows 7 (64-bit)
Chrome Version 56.0.2924.76 (64-bit)
Modernizr Build v3.3.1 https://modernizr.com/download?-touchevents-setclasses-dontmin

The following code below is triggered in Chrome to check for the touch-enabled media queries.
`var query = ['@media (', prefixes.join('touch-enabled),('), 'heartz', ')', '{#modernizr{top:9px;position:absolute}}'].join('');
      testStyles(query, function(node) {
        bool = node.offsetTop === 9;
      });`

The problem is that any element appended directly to the document body gets the offsetTop = 9 if ""size of text and other items"" in Windows is set to 125% and Chrome zoom is set to 75%:
![offsettop](https://cloud.githubusercontent.com/assets/7405108/22514411/7ea418ea-e89f-11e6-9c89-3d04b76d7a56.png)
On other zoom levels Chrome returns offsetTop = 8.

This means the check for the media query will give the false positive and touchevents are incorrectly set to true. A simple solution would be to modify this number in Modernizr to something else, so it never interfers with browsers default body margin.

This might be a defect in Chrome as well, as Chrome is in fact showing a margin on the body element of only 8px in this case.",https://github.com/Modernizr/Modernizr/issues/2153
2,"TITLE: Sanitization bypass using HTML Entities (SEVERITY: HIGH) BODY: # Content & Code Injection (XSS)
#### SEVERITY: HIGH
Sanitization bypass using HTML Entities
Discovered in a nested dependency: modernizr@3.3.1 -> marked@0.3.5

#### Overview

`marked` is a markdown parser and compiler used for rendering markdown content to html. It is vulnerable to content injection attack allowing the attacker to bypass its output sanitization (`sanitize: true`) protection. Using the [HTML Coded Character Set](https://www.w3.org/MarkUp/html-spec/html-spec_13.html#SEC13), attackers can inject `javascript:` code snippets into the output. For example, the following input `javascript&#x58document;alert&#40;1&#41;` will result in `alert(1)` being executed when the user clicks on the link.

#### Remediation

Upgrade `marked` to version **0.3.6** or higher. Alternatively, you can use `remarkable` or other markdown libraries.

PUBLISHED 20 Apr, 2016
[Reference](https://snyk.io/vuln/npm:marked:20150520)
",https://github.com/Modernizr/Modernizr/issues/2158
5,"TITLE: Wrong version number in license file. BODY: Not very important. But could you please keep the version number up-to-date in file https://github.com/Modernizr/Modernizr/blob/master/LICENSE

After minification, my `gulp.js` scripts inject the license files from the node packages and repos that I use in my projects.
With Modernizr I end up with this. (The Modernizr build command thinks differently.) :

![modernizr-wrong-version-number-in-license-file](https://cloud.githubusercontent.com/assets/22870070/23232117/73522b60-f94a-11e6-97e8-43ec53dbd85e.png)
",https://github.com/Modernizr/Modernizr/issues/2165
2,"TITLE: Video autoplay detection is outdated for iOS 10 BODY: iOS 10 allows autoplaying videos if they have the `muted` and `playsinline` attributes. Android Chrome 54+ allows it as well, but not if the video element is created with JavaScript; only if the video element is already in the HTML on page load. I added the following two lines to the JS to get it to work in iOS.

```diff
+  elem.setAttribute('muted', '');
   elem.setAttribute('autoplay', '');
+  elem.setAttribute('playsinline', '');
```

Caveats: 1) iOS and Android do require the two attributes to work, so it might be a good idea to document that, and if someone wants to embed video that will play in fullscreen or with sound, this would give them a false positive, though I can't imagine that situation being all that common; most of the time, the use case for these videos is a silent background video. Nevertheless, it's something to keep in mind. 2) There is no way I've found so far to detect or utilize support on Android without putting the video in the HTML. This is a bummer since sometimes you want to skip loading the video altogether if autoplay isn't supported, especially in the case of background videos.",https://github.com/Modernizr/Modernizr/issues/2166
3,"TITLE: Web Cryptography and IE11 Support BODY: IE11 does support Web Cryptography, but that's based on an old version of the spec (an event-driven model) rather than the latest spec (a model based on Promises).

And currently Modernizr reports `Modernizr.crypto` as `true`.

As a result, even if Web Cryptography is reported to be supported, I cannot use a single set of code to the work.

So is `Modernizr.crypto` expected to be true even for browsers supporting an old version of the spec?

If this should be false, I think we may
* do UA test for IE11;
* or test length of methods under SubtleCrypto
  ```
  var crypto = prefixed('crypto', window);
  var subtle = prefixed('subtle', crypto);
  // Any methods under SubtyleCrypto on IE11 has length set to 0,
  // while in other browsers they are set to proper values.
  Modernizr.addTest('crypto', subtle.sign.length !== 0);
  ```
* or test the existence of `CryptoOperation` or `KeyOperation`, which are spec'ed only in the old version.
  ```
  var crypto = prefixed('crypto', window);
  var subtle = prefixed('subtle', crypto);
  Modernizr.addTest('crypto', !!subtle && !('KeyOperation' in window));
  ```
* or test support for Promises in addition as the new version of spec is based on Promises.

If that's the expected behavior, I can do additional checks in application code.

---
References:
* [Web Cryptography API updates (Windows)](https://msdn.microsoft.com/library/dn904640(v=vs.85).aspx)
* [Web Cryptography API (W3C Editor’s Draft 21 May 2013)](https://dvcs.w3.org/hg/webcrypto-api/raw-file/tag2013.05.21/spec/Overview.html)
* [Web Cryptography API (W3C Recommendation 26 January 2017)](https://www.w3.org/TR/WebCryptoAPI/)
* [Web Crypto API - Chrome Platform Status](https://www.chromestatus.com/feature/5030265697075200)
",https://github.com/Modernizr/Modernizr/issues/2170
4,"TITLE: input-formtarget detection not working BODY: At least here at my browser (firefox 52 32bit, windows 7 64bit), the feature detection is not working.

I  think it only works when the ""t"" in ""formTarget"" is uppercase, but Modernzr it uses lowercase in the script and that is why is not working, I think. See the results in my console just changing the ""t"" case:

12:12:31.590 !!('formtarget' in document.createElement('input'))
12:12:31.666 false
12:12:40.831 !!('formTarget' in document.createElement('input'))
12:12:40.891 true

I sent a pull request with the fix. Also sent another pull request with feature detection for input: formNoValidate.",https://github.com/Modernizr/Modernizr/issues/2171
4,"TITLE: Page scrolls to iframe that includes modernizr BODY: Hello, 

I have a page that does not include modernizr but has an iframe at the bottom of the page that does include it. When I do a page refresh, the window scrolls to the iframe that does contain modernizr. If I remove the modernizr dependency from the iframe, then this behavior does not occur. Wondering if anyone had any ideas on why this would happen.
Thank you.",https://github.com/Modernizr/Modernizr/issues/2172
5,"TITLE: Details-test broken on Firefox 49+ (Modernizr v.3.3.1) BODY: Using `details`-test, and on Firefox, it returns `false` and setClasses outputs `no-details`.

I'm implementing my own fallback for `open` toggling when the browser is not supporting it, and I depend on the `details`-test.

Using my code, there is no toggling. However, removing my code Firefox handles the toggling pretty good natively.

So, I can only come to the conclusion that the `details`-test, and probably the height check (not taking into account that a browser can do rendering the next frame-tick?) is broken the last couple of Firefox versions. 

I tested version 51 and 52 today, but reading caniuse makes me suspect it affects version 49 and later.

I have the following `modernizr.rc`

```
{
  ""minify"": true,
  ""options"": [
    ""setClasses""
  ],
  ""feature-detects"": [
    ""test/elem/details""
  ]
}
```

PS. Chrome returns `true` in the test.",https://github.com/Modernizr/Modernizr/issues/2176
5,"TITLE: exiforientation feature detection fails on iOS BODY: Hi,

the class no-exiforientation gets toggled on iOS (10.2.1). As the docs suggest this shouldn't be the case as iOS orients images according to the EXIF data. This results in images being double rotated on iOS for me.

Thanks",https://github.com/Modernizr/Modernizr/issues/2181
1,"TITLE: When can i use css grid, varibles,and so on.. BODY: My projects need CSS Grid and Variables , But I can't find them in download list, What time can i use these?",https://github.com/Modernizr/Modernizr/issues/2182
5,"TITLE: test_hyphens_find causes page to scroll to the top BODY: This line:

    result = window.find(testword + testword);

Makes browser (at least chrome) to highlight the text, which results in page jumping to the top. My initial idea is to save window position and revert it after the check, but it seems wrong. Any better ideas anyone?",https://github.com/Modernizr/Modernizr/issues/2193
3,"TITLE: bdi test failing in RTL mode BODY: Running `Modernizr.bdi` in RTL mode will always return `true` even though the browser does not support the bdi tag.

### Reproduce:
   - Set direction to RTL on html tag
   - Run `Modernizr.bdi` in a browser which does not support the bdi tag. The result should be `false` but ends up `true`

### Possible solution:
Force the direction to LTR on the container for the bdi element in the test.",https://github.com/Modernizr/Modernizr/issues/2195
2,"TITLE: Hoping for support for Variable Fonts (via support for font-variation-settings) BODY: Hi there -

Variable fonts are ticking along in their development, with a draft specification in the works and support in the nightly builds of Webkit, Chrome, Firefox and Opera. It would be great to get detection of support into Modernizr. It might be worth it to hook in to browser support for `font-variation-settings` (the low-level method of controlling variable font properties)

https://drafts.csswg.org/css-fonts-4/#low-level-font-variation-settings-control-the-font-variation-settings-property

Jason",https://github.com/Modernizr/Modernizr/issues/2200
1,"TITLE: Modernizr says flex-wrap is supported in UC on Android BODY: Modernizr does not seem to detect that `flex-wrap` is not supported in UC Browser for Android (http://caniuse.com/#search=flex).

With the following CSS, the background color of a page loaded in UC does not change:

    .mod-no-flexwrap body {
        background-color: red;
    }

Similarly, with `.mod-flexwrap`, the background color _does_ change where it shouldn't.

(I am using the following custom build: https://modernizr.com/download/?-flexbox-flexwrap-setclasses-cssclassprefix:mod-)",https://github.com/Modernizr/Modernizr/issues/2205
4,"TITLE: media-query max-resolution not working anymore BODY: Upgrading `Modernizr` from version 2.8.2 to 3.5 caused the media query
```
@media screen and (max-resolution: 100dpi)
```
in one of my css files to stop working.

Interactive testing in the developer console (google chrome) showed the first part still returning true, but I couldn't get any resolution queries to work anymore.",https://github.com/Modernizr/Modernizr/issues/2208
5,TITLE: CSS :nth-child pseudo-selector test fails in Chrome when zoomed out BODY: The CSS :nth-child pseudo-selector test reports false in Chrome 58.0.3029.110 (64-bit) when the page is zoomed out to 80% or less.,https://github.com/Modernizr/Modernizr/issues/2209
3,"TITLE: getusermedia not returning correct values BODY: I used modernizr.getusermedia on a website with https enabled. I used this simple code:

```
window.addEventListener('DOMContentLoaded', () => {
    if (Modernizr.getusermedia) {
        const mic = new p5.AudioIn()
        mic.start()
    } else {
        console.log('getUserMedia() is not supported in your browser');
    }
})
```
It returned: console.log('getUserMedia() is not supported in your browser');
But modernizr.getusermedia returned true and the class was on the html element. 

I started this on stackoverflow:
https://stackoverflow.com/questions/44494029/getusermedia-does-not-work-with-ssl-certificates-installed?noredirect=1#comment76123378_44494029",https://github.com/Modernizr/Modernizr/issues/2219
1,"TITLE: EINTEGRITY: npm 5.0 integrity check and modernizr.com dependency BODY: https://stackoverflow.com/questions/44699090/eintegrity-npm-5-0-integrity-check-and-modernizr-com-dependency
Any hits will be much appreciated.",https://github.com/Modernizr/Modernizr/issues/2220
5,"TITLE: [WASM] - Rust, LLVM Frontend Loaders BODY: We should have a default suite of LLVM Frontend loaders, the first being Rust, that should take any file that can be parsed as a rust module, and then output a `WASMModule` in memory in webpack to be added to the dependency graph. 

One could see it's uses like the following: 

**entry.js**
```javascript
import(“./abc.js”).then(abc => abc.doIt());
```

**abc.js**

```javascript
import {factorial} from “./addition.rs”;

export function doIt() {
  console.log(factorial(1, 2));
}
```

**factorial.rust**
```rust
#[no_mangle]
pub fn fact(mut n: i32) -> i32 {
    let mut result = 1;
    while n > 0 {
        result = result * n;
        n = n - 1;
    }
    result
}
```

**factorial.wast**

```wasm
  (func $fact (type $rustfn-0-2) (param $0 i32) (result i32)
    (local $1 i32)
    (local $2 i32)
    (set_local $2
      (i32.load
        (i32.const 0)
      )
    )
    (set_local $1
      (i32.const 1)
    )
    (loop $shape$2$break $shape$2$continue
      (br_if $shape$2$break
        (i32.le_s
          (get_local $0)
          (i32.const 0)
        )
      )
      (set_local $1
        (i32.mul
          (get_local $1)
          (get_local $0)
        )
      )
      (set_local $0
        (i32.sub
          (get_local $0)
          (i32.const 1)
        )
      )
      (br $shape$2$continue)
    )
    (i32.store
      (i32.const 0)
      (get_local $2)
    )
    (get_local $1)
  )
```

Loaders for now would return [in memory] and then bundle and load like traditional .wast module (already created)

#### Simple functions only for now. 
Because we are going to work on a future shared memory handling module, the initial functionality of these loaders should only support integer of float functions. (AKA No memory, strings, etc.). 

#### Things to discuss:
Any code generation? Additional emscripten files that are output, what needs to be actually bundled and what not. Is there fallback modes for these kind of loaders? 
",https://github.com/webpack/webpack/issues/4950
1,"TITLE: Uncaught TypeError: _modernizr2.default.mq is not a function BODY: When I use the `mq`  function, I get this error: `Uncaught TypeError: _modernizr2.default.mq is not a function`.

I'm using [modernizr-loader](https://github.com/peerigon/modernizr-loader) to create my package. 

I'm able to access the modernizr object inside my js code, and when printed it looks like this:

```javascript
{
  ""minify"":true,
  ""options"": [""setClasses"",""mq""],
  ""feature-detects"":[]
}
```

Here is my modernizr config:

```javascript
{
  ""minify"": true,
  ""options"": [
    ""setClasses"",
    ""mq""
  ],
  ""feature-detects"": []
}
```

And my usage:

```javascript
import Modernizr from 'modernizr'
...
var query = Modernizr.mq('screen and (max-width: 600px)')
```

It's quite obvious that `mq` is not even a direct descendant, let alone a function. In fact, the Modernizr global object inside js is the same as the object in the config. Does that mean it is loading incorrectly? What else could be the problem?

--EDIT--

In case it was a problem with the other repo, I tried using the command line tool to build a version based on the above config. 

I sent it to my config folder as `modernizr.js`; it looks like this:

```javascript
/*!
 * modernizr v3.5.0
 * Build https://modernizr.com/download?-mq-setclasses-dontmin
 */
...
  // Leak Modernizr namespace
  window.Modernizr = Modernizr;
...
})(window, document);
```

Now I do 

```javascript
import Modernizr from '../../config/modernizr'
...
var query = Modernizr.mq('screen and (max-width: 600px)')
```

Once again, `mq` remains undefined and this time, the entire `Modernizr` object is just the empty object `{}`; it doesn't even have the shape of the config json as above.",https://github.com/Modernizr/Modernizr/issues/2225
4,"TITLE: Finer-grained selection for the inputtypes detect BODY: Currently, the inputtypes detect is all-or-nothing. However, the detection for the `range` type triggers a forced reflow in the browser (when profiling with 5x CPU throttling in Chrome, this detect takes 65ms to recalculate style and compute the layout). Paying this cost while I'm only interested in the `date`detection looks bad.

Would you consider allowing to configure the list of types we want to detect instead of just all or none ?",https://github.com/Modernizr/Modernizr/issues/2226
4,TITLE: H265 check BODY: It would be nice to have H265 support check in Modernizr. Edge and Safari already support HEVC.,https://github.com/Modernizr/Modernizr/issues/2231
4,"TITLE: [WASM] - Add ability to extend DependenciesBlock<Module> BODY: webpack needs to be able to have multiple types of modules. This allows us to create lets say: 

WASMModule or Module#type = ""wasm"". This needs to also provide a custom runtime. Ideally we could have an API surface for generation of extensible module types. ",https://github.com/webpack/webpack/issues/4941
5,"TITLE: [WASM] - Create WASM Module type  BODY: Relies on https://github.com/webpack/webpack/issues/4941 to be completed first. 

Create a new module type for Web Assembly modules with a special runtime fit to meet the WASM Specification. ",https://github.com/webpack/webpack/issues/4942
2,"TITLE: [WASM] - It is possible to import and bundle WASM Modules BODY: This is dependent on #4942. Once the extended module type has been created we need to have the ability to import a WASM module. 

",https://github.com/webpack/webpack/issues/4943
5,"TITLE: [WASM] There is a (temporary) runtime in chunk load code - Part 1: Sequential  BODY: Depends on #4943 

Chunk loading (for WASM modules) will need a custom runtime template to be added to handle how this code compiles at runtime. The first step in the implementation process is essential to validate the previous dependent issues, however will be removed later in favor of a more parallel loading operation. ",https://github.com/webpack/webpack/issues/4944
4,"TITLE: [WASM] - Implementation and first uses complete - User Surface BODY: This depends on: 
- [ ] #4944 
- [ ] #4943 
- [ ] #4942 
- [ ] #4941 

WASM User Surface: 

**entry.js**
```javascript
import(“./abc.js”).then(abc => abc.doIt());
```

**abc.js**
```javascript
import module from “./addition.wasm”;

export function doIt() {
  console.log(module.add(1, 2));
}
```

**addition.wasm**
```wasm
Some binary code for the following wast
(module
  (export ""add"" 0)
  (func (param i32) (param i32) (result i32)
    (i32.add (get_local 0) (get_local 1))
  )
)
```",https://github.com/webpack/webpack/issues/4945
3,"TITLE: [WASM] - Implement parallel WASM compilation BODY: This will replace the initial sequential runtime compilation work for initial WASM bundling from first milestone. 

Rather, we will implement parallel WASM compilation for its final product. ",https://github.com/webpack/webpack/issues/4946
2,"TITLE: [WASM] - Implement DepBlock templates for WASM code. BODY: We should be able to ""template"" the chunk loading code generated by `require.ensure/import()` depending on the loaded chunk. 

Don't need to worry about webpackMode().

",https://github.com/webpack/webpack/issues/4947
5,TITLE: [WASM] - Create runtime for WASM Module Compilation - Part 2 BODY: We will need to create a WASM specific runtime that compiles all WASM modules in a chunk when loaded Asynchronously and will support parallel chunk loading. ,https://github.com/webpack/webpack/issues/4948
1,"TITLE: [WASM] - It is possible to import function from other modules from WASM BODY: Given existing module webpack should be able to understand analyze and import dependencies of WASM modules. Must follow the same resolving rules for modules.

somemodule.wasm (given in .wast format)
```wast
(module
 (import “./math” “random” (func rand (result f32))
 (func
  (export ""addRandom"")
  (param i32)
  (result i32)
  (i32.add (get_local 0) (call rand))
 )
)
```",https://github.com/webpack/webpack/issues/4949
4,"TITLE: Word Blanks challenge is too hard or unclear BODY: According to Google Analytics, the [Word Blanks challenge](https://www.freecodecamp.com/challenges/word-blanks) is way too hard, and is taking campers an average of 6 minutes and 31 seconds to finish (if they finish - a lot of them seem to give up). 

According to this table, campers spend more time on it than they do on the algorithm challenges.

![](https://www.evernote.com/l/Ar_-arzICANPuaTBet9Y8_Yp9qLthAvqa-QB/image.png)

We need to either reword this or simplify the challenge so it can be completed in closer to 3 minutes. Otherwise, we should move it back to the algorithm section.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15617
4,"TITLE: [WASM] - Handle shared memory across any/all WASMModules BODY: We need to be able to create a reusable memory module so that memory can be shared across all `WASMModule`.

An example code that would be valid for this use case may look like: 

**entry.js**
```javascript
import(“./abc.js”).then(abc => abc.doIt());
```
**abc.js**
```javascript
import { duplicateText } from “./string.cpp”;
 
export function doIt() {
  console.log(duplicateText(“Hello World”));
}
```
 
*string.cpp*
```cpp
extern “C” const char* duplicateText(const char* text) {
  int len = strlen(text);
  char* newstr = new char[len*2 + 1];
  strcpy(newstr, text);
  strcat(newstr, text);
  return newstr;
}
```",https://github.com/webpack/webpack/issues/4957
5,"TITLE: loaderContext.loadModule does not load modules recursively BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

I would like to request a feature, that enables `loaderContext.loadModule` to optionally load modules recursively.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

When loading a module using `loaderContext.loadModule`, modules are not loaded recursively.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

**If this is a feature request, what is motivation or use case for changing the behavior?**

While implementing [ts-css-loader](https://github.com/MortenHoustonLudvigsen/ts-css-loader), I had trouble loading css modules using `loaderContext.loadModule` for modules loaded by `css-loader`. The error I got was:
```
Error: Cannot find module ""../../../../node_modules/css-loader/lib/css-base.js""
```

I turns out that I could solve the problem by writing my own version of `loaderContext.loadModule`, copied from `webpack/lib/dependencies/LoaderPlugin.js`, that loads modules recursively.

I did this by changing the `recursive` parameter from `false` to `true` in the call to `compilation.addModuleDependencies`.

`loaderContext.loadModule`:
```javascript
...
compilation.addModuleDependencies(module, [
	[dep]
], true, ""lm"", false, (err) => {
...
```

My version of `loadModule`:
```javascript
...
compilation.addModuleDependencies(module, [
	[dep]
], true, ""lm"", true, (err) => {
...
```

This has solved the problem for now, but it would be much better to use the ""official"" version of `loadModule`.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/4959
2,"TITLE: Show more accurate validation information for initial configuration BODY: **Do you want to request a *feature* or report a *bug*?**

Feature.

**What is the current behavior?**

If you export something else than a function, array, or object from configuration, you'll get

```
Config did not export an object or a function returning an object.
```

> Note that the message doesn't mention that an array is valid! An array of objects is fine. An empty array fails with a cryptic `TypeError: Cannot read property 'context' of undefined` at  `outputOptions.context = firstOptions.context;`.

**What is the expected behavior?**

The validation should probably do a stricter type check and tell what the user passed. There was an issue where the user was passing a function without realizing it.

**If this is a feature request, what is motivation or use case for changing the behavior?**

Better message and validation would make this part of webpack less confusing.",https://github.com/webpack/webpack/issues/4977
1,"TITLE: webpackUniversalModuleDefinition wrapper missing __webpack_require__ parameter BODY: **Do you want to request a *feature* or report a *bug*?**
bug

**What is the current behavior?**
webpack is wrapping a webpackUniversalModuleDefinition without the needed `__webpack_require__` parameter.

**If the current behavior is a bug, please provide the steps to reproduce.**

https://github.com/diligiant/ump-wrapper-missing-wbr-issue

you'll find in the repository:
1. a genuine ejected create-react-app 1.0.7
2. globalize and wp-globalize (the latter creates the mentioned UMD .js files)
3. chunks ordering: vendor, i18n, app
4. js uglify disabled

as is, the 2 .js files in `src` have `var Globalize = require( ""globalize"" );`

once built (`npm run build`), the `build/i18n` directory will contain the compiled languages files. One of the wrappers will be missing  the `__webpack_require__` parameter although both of them need it.

```
webpackJsonp([7],{

/***/ 15:
/***/ (function(module, exports) {

module.exports = __webpack_require__(13);

/***/ }),

/***/ 16:
/***/ (function(module, exports, __webpack_require__) {

(function( root, factory ) {
```
In this repository, it's the first function ; in our application, it's the UMD (in both cases, the browser ""crashes"").

If you comment `var Globalize = require( ""globalize"" );` in `index.js` and rebuild, the i18n .js files are correct.

**What is the expected behavior?**

The expected behaviour is for `FunctionModuleTemplatePlugin.apply` to append the `__webpack_require__` everywhere it's needed.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Tested with node 7.10.0 and node 8.0.0, webpack 2.6.1 and master on OSX 10.12.5.",https://github.com/webpack/webpack/issues/4990
2,"TITLE: Provide option to disable initial compilation when watching BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature Request

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
When `webpack --watch` is first run, the first thing it does it compile all of the entries. 

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
For webpack to simply start watching the files and not immediately compile. But given that this doesn't apply as much to single-entry instances, at least have an option for it.


**If this is a feature request, what is motivation or use case for changing the behavior?**
Given the number of entries (and if sourcemaps are enabled) this can can take a significant amount of time. With this feature one would be able to enable watching and immediately get to work without having to worry about whether it's finishing compiling and is actually watching, yet.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Node: 4.5.0
Webpack: 2.6.1
OS: Windows 10",https://github.com/webpack/webpack/issues/4991
4,"TITLE: require.resolveWeak does not have the same static resolution capabilities as import, require, etc BODY: **Do you want to request a *feature* or report a *bug*?**
**BUG**

**What is the current behavior?**
`require.resolveWeak()` can't statically determine module string passed to it as well as `import().then`.

*modules[moduleId] is undefined here*:
```js
modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));
```
> the moduleId is ""./src/components recursive ^\\.\\/.*$""

Here's the trace:
```
TypeError: Cannot read property 'call' of undefined
__webpack_require__
http://localhost:3000/static/bootstrap.js:694:29
fn
http://localhost:3000/static/bootstrap.js:115:20
resolve
http://localhost:3000/static/main.js:35453:34
requireSync
http://localhost:3000/static/main.js:80:58
webpackJsonp.../async-module/src/index.js.exports.default
http://localhost:3000/static/main.js:165:10
Loadable
http://localhost:3000/static/main.js:4176:47
getComponent
http://localhost:3000/static/main.js:35434:35
new App
http://localhost:3000/static/main.js:35379:16
http://localhost:3000/static/main.js:12070:18
measureLifeCyclePerf
http://localhost:3000/static/main.js:11850:12
```

**If the current behavior is a bug, please provide the steps to reproduce.**
For example, try:

```js
require.resolveWeak(`${+new Date() % 2 ? './Example' : './Loading'}`)
```

**What is the expected behavior?**
The expected behavior is that `resolveWeak` will return the `moduleId` of the corresponding module. The weird thing is that it works when using Webpack on the server, but in the browser (Chrome) it does not work. 

In addition, the following works:

```js
import(/* webpackChunkName: ""[request]"" */ `${+new Date() % 2 ? './Example' : './Loading'}`).then(...
```

**If this is a feature request, what is motivation or use case for changing the behavior?**
The motivation and use case for this is for tools like *React Loadable* and *[React Universal Component](https://github.com/faceyspacey/react-universal-component)* which allow for async-loading + server-side rendering of the same component. Currently such tools don't allow for dynamic component selection (because it depends on `resolveWeak` for synchronous loading if the module is already available). 

If it was just a case of using `import().then`, such expressions would work. But `resolveWeak` is needed to make the server-side synchronous rendering magic happen, as well as the synchronous rendering on initial load in the browser if the corresponding chunks are embedded before `main`. 

This is a very important feature for the React Loadable and React Universal Component community and any other future async packages.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

VERSION: 2.6.1 + 3.0.0
NODE: 7.7.2
OSX
",https://github.com/webpack/webpack/issues/4993
3,"TITLE: No global object available for {target: 'webworker'}| BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

Bug

**What is the current behavior?**

When compiling a file using `{target: 'webworker'}`, the `global` object is not shimmed, whereas for the default `{target: 'web'}`, it seems to be set to refer to `window`. This breaks scripts that refer to (e.g.) `global.crypto`, which presumably should refer to the `WebworkerGlobalScope`.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

`global` should refer to the global worker scope.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Webpack 2",https://github.com/webpack/webpack/issues/4998
2,"TITLE: UglifyJsPlugin: typescript sourcemap not match BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

After use webpack build my project (ts) with UglifyJsPlugin, it worked well, but **sourcemap not match** when debug with chrome.

1. line 81 can not have a breakpoint.
2. Begin,  I at line 80 and item.isCompletion==true, it will jump to line 83 if I single step debugging. 

![image](https://cloud.githubusercontent.com/assets/8098249/26784271/56a3d712-4a2f-11e7-9790-808980b73ccf.png)

```js
// webpack.config

   module: {
        rules: [
            {
                test: /\.ts$/,
                exclude: /node_modules/,
                loader: 'happypack/loader?id=ts'
            }
        ]
    },
    resolve: {
        extensions: ['.ts', '.js']
    },
   output: {
        filename: '[name].js',
        path: __dirname,
        libraryTarget: 'window'
    },
    plugins: [
        new HappyPack({
            id: 'ts',
            threadPool: happyThreadPool,
            loaders: [
                {
                    path: 'ts-loader',
                    query: {
                        happyPackMode: true
                    }
                }
            ]
        }),
        new webpack.optimize.UglifyJsPlugin({
            sourceMap: true,
            mangle: false
        })
    ],
   devtool: 'source-map'
```

**If the current behavior is a bug, please provide the steps to reproduce.**

build with UglifyJsPlugin

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

debug work well!!!

**If this is a feature request, what is motivation or use case for changing the behavior?**

none

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

browser version: 58.0.3029.110
Node version: v6.9.5
webpack: v2.6.0
OS: win7
",https://github.com/webpack/webpack/issues/5006
1,"TITLE: Module parse failed should show which loaders it applied by default BODY: **Do you want to request a *feature* or report a *bug*?**

Feature.

**What is the current behavior?**

If file processing fails, you get a message along

```
ERROR in ./index.web.js
Module parse failed: /Users/samuli1/projects/tulka-mobile-app/index.web.js Unexpected token (12:19)
You may need an appropriate loader to handle this file type.
```

**What is the expected behavior?**

Instead of just the error, webpack *should* show also the loaders it applied against the file. This is because often the above error is caused by misconfiguration (a loader not matching as expected or it was missing entirely).

**If this is a feature request, what is motivation or use case for changing the behavior?**

This change would make it easier for users to debug their issues in this particular case.",https://github.com/webpack/webpack/issues/5008
4,"TITLE: commonsChunkPlugins async  options  Invalid BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
- I am using webpack2.4.0, in my `webpack.config.js` use `plugin` `webpack.optimize.COmmonsChunkPlugin` options `async ` and `minChunks`
- like
```
new webpack.optimize.CommonsChunkPlugin({
  async:""used-twice"",
  minChunks:(module,count)=> ( count >=2 )
})
```
- That's fine, in my project  I have a generated file `used-twice.js` 
**If the current behavior is a bug, please provide the steps to reproduce.**
- but I today upgrade webpack@.2.4 => webpack@3.0.0 found  `webpack.optimize.COmmonsChunkPlugin` options `async` invalid
- can't build file `used-twice.js`
- after I use  `yarn add` other webpack versions like `v.2.5` `v.2.6.0` `v.3.0.0`  All invalid :(
- but `webpack@2.4.0`  succeed 
- I don't know how to solve it !  Please help me, Thanks.
- English is so tired with Google
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
- build a  common chunk file `used-twice.js`

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
- window
- node 8.1.0
- webpack 2.6.0
",https://github.com/webpack/webpack/issues/5101
5,"TITLE: Circular dependency in node utility module calling node's console module causes nil references BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Cycle causes node utility module to be called before module.exports is finalized.

**If the current behavior is a bug, please provide the steps to reproduce.**
Bundle for a web target using Node utility or Node console modules.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
The node utility and the console-browserify modules reference each other.  The problem is in the transitive calling sequence there is a call to utility.inherits which is nil because of the cycle.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Seems like the fix here is to remove the small-ish dependency on utility from the console-browserify module.**  You could do the reverse of course.  

Update: Using this (confusing) config the problem went away.  When I say console:false my understanding is there will be no console adapter/shim used for web targets.  This seemed to work
for me. Prior I would get nil referenced during the cycle from node's utility to console.

	target: 'web',       
	node: {
             console: false,     
        },
",https://github.com/webpack/webpack/issues/5011
1,"TITLE: Wrong paths for css source maps BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Source maps for scss files produced by webpack contains duplicate parts like `C:\...C:\...\some-file.scss`.
I'd like to use relative paths but I can't understand why webpack use absolute paths for css files.

**If the current behavior is a bug, please provide the steps to reproduce.**
There is my loaders configuration for scss files:
```
loader: [
    ""style-loader"",
    {
        loader: ""css-loader"",
        options: {
            sourceMap: true,
            minimize: true,
            importLoaders: 2
        }
    },
    {
        loader: ""postcss-loader"",
        options: {
            sourceMap: true,
            plugins: function () {
                return [
                    require(""autoprefixer"")({
                        browsers: [""last 4 versions""]
                    })
                ];
            }
        }
    },
    {
        loader: ""sass-loader"",
        options: {
            sourceMap: true
        }
    },
    ""sass-bulk-import-loader""
]
```

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
The source map file have to containe one absolute or relative path to the source file.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
webpack 2.2,1 but I also tested with 2.6.1 and the problem is the same
node.js 7.7.4
""style-loader"": ""^0.13.1""
""css-loader"": ""^0.28.4"",
""postcss-loader"": ""^2.0.5"",
""autoprefixer"": ""^7.1.1"",
""node-sass"": ""^4.5.2"",
""sass-loader"": ""^6.0.5""
Windows 7",https://github.com/webpack/webpack/issues/5016
5,"TITLE: Consider adding dynamic import's webpackMode as a configuration option, or eval the comment contents to get value BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

Feature Request
Add webpackMode as a config. option OR eval comment in dynamic import before using it's value.

**What is the current behavior?**
webpackMode defaults to ""lazy"", it can be overridden through a comment as /* webpackMode: ""eager"" */

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
Ability to add webpackMode in config file, so preferred value in order of preference would be comment.webpackMode, config.webpackMode, webpackDefault.webpackMode

**If this is a feature request, what is motivation or use case for changing the behavior?**

Hot Module Replace works well with asynchronously imports. However, Hot Reload is unable to reload state for such code. Example: Using async. loaded components with React Hot Loader, where the component's are not refreshed. Only suitable approach seems to require loading code synchronously in development. 

Adding webpackMode in config. could be an approach to fix this. i.e. Not specifying webpackMode in comment to use ""lazy"" in prod. and ""eager"" in development.

Alternative approach would be to eval webpackMode value. i.e. 
/* webpackMode: process.env.NODE_ENV == ""production"" ? ""lazy"" : ""eager"" */

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node 6.9.1
NPM 4.1.1
Webpack 2.6.1
",https://github.com/webpack/webpack/issues/5029
4,"TITLE: Reduce Circular Dependency Friction with Better Error Messages BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

# Feature Request
Reduce Circular Dependency Friction with better error messages.
Per the conversation with @TheLarkInn and I on twitter, found [here](https://twitter.com/AlexSashaRegan/status/872554634178461696)

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Currently, webpack processes the import statements without any indication of a circular reference. Webpack `require`'s that are undefined are silently compiled into source.

## Steps to Reproduce
Please visit the reproduction repository found here: https://github.com/alexsasharegan/webpack-death-star
Further instructions on _""bug""_ reproduction are present in the repo's landing page readme.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the desired behavior?**
A handy error message would save time debugging the failure. Information desired in the error message is the following:
- file and caller referencing the circular dep
  - source file's path, line, and column number if available
- circular dep requested
  - with path and any other relevant info
- verbose and detailed output could be dependent on environment
  - `ENV !== 'production'` could yield the extra info, else don't spend processing time gathering info

**If this is a feature request, what is motivation or use case for changing the behavior?**
Circular deps get easier to introduce as a code base grows, evolves, and contributors increase. The error can happen to anyone, and at large scale, this can be a surprisingly large roadblock to app compilation. Good error messages === good DX and faster bug fixes. Help us help ourselves with some detailed breadcrumbs.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
- webpack: `v2.6.1`
- mac: `v10.11.6`
- node: `v8.0.0`
",https://github.com/webpack/webpack/issues/5031
4,"TITLE: Webpack is slow to start and always performs work, even if it is unnecessary BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

If the `--watch` mode is not specified, Webpack always runs the function in the config file on the inputs, to produce the output.

**If the current behavior is a bug, please provide the steps to reproduce.**

1. Specify a Webpack function that transforms the inputs into an output, in a config file.
2. Make a change to one of the input files and save it.
3. Invoke webpack with `webpack --config /path/to/config.json`, to write the output file as a function of the inputs.
4. Immediately run `webpack` again with the same commands.

**What is the expected behavior?**

The second time `webpack` is invoked, I expect it to detect that the mtimes of the inputs are all older than the mtimes of the output file, print that there is no work to be done, and exit with a 0 return code.

**If this is a feature request, what is motivation or use case for changing the behavior?**

[Make](https://en.wikipedia.org/wiki/Make_(software)) is a [build automation tool](https://github.com/mirror/make) released for UNIX systems in April 1976, 41 years ago. If I define a Make target as follows:

```
output.js: static/one.js static/two.js
```

and invoke it with:

```
make output.js
```

Make will check the mtimes of `static/one.js`, `static/two.js`, and `output.js` (which you can check by using the [Lstat](https://nodejs.org/api/fs.html#fs_fs_lstatsync_path) syscall on the affected files). If the mtime for output.js is newer than its inputs, make outputs the following:

```
make: Nothing to be done for `output.js'.
```

And exits with a 0 return code. This means it is faster - make does not do unnecessary work - and more composable. It is always easy to invoke `make output.js` as part of another build script, since make will exit early if there is no work to be done.

By contrast, webpack does all of the work every single time. This makes it more difficult to compose as part of a larger build process, since invoking webpack means the work is always performed even if there is no point in doing the work since the inputs haven't changed since the output file was written. 

In addition to doing unnecessary work, webpack has a slower startup time than `make`. Here is the amount of time it takes `make` to print the version string:

```
$ time make -v
GNU Make 4.2.1
Built for x86_64-apple-darwin16.6.0
Copyright (C) 1988-2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
make -v  0.00s user 0.00s system 32% cpu 0.026 total
```

Or 26 milliseconds. It takes `webpack`, released 36 years later, about 8 times as long to print the version string:

```
$ time webpack -v
2.6.1
webpack -v  0.17s user 0.04s system 84% cpu 0.242 tota
```

This is a significant performance regression, both in startup time and in the amount of work that is performed. It's especially confusing given the modest improvements in CPU performance, and the increases in available RAM, in the years between 1976 and 2012. 

It would be nice if performance improved along one or both of these axes.",https://github.com/webpack/webpack/issues/5032
3,"TITLE: [Webpack 3] Possible regression in cacheable packages (like react) BODY: ## Bug

**What is the current behavior?**

```
[1] delegated ./node_modules/react/react.js from dll-reference vendors 42 bytes {24} [not cacheable] [built]
[55] delegated ./node_modules/react-dom/index.js from dll-reference vendors 42 bytes {24} [not cacheable] [built]
[154] delegated ./node_modules/webpack/buildin/module.js from dll-reference vendors 42 bytes {24} [not cacheable] [built]
```

**If the current behavior is a bug, please provide the steps to reproduce.**

1. Put react & react-dom in a vendors DLL.
2. Compile
3. See the above
4. Notice that the build time is a couple seconds longer

**What is the expected behavior?**

Cacheability on par with version 2.6.1 and below

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Webpack 3
Node 8
Ubuntu 6.10
",https://github.com/webpack/webpack/issues/5146
4,"TITLE: Break library bundles into pieces BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature

**What is the current behavior?**
Libraries usually provide large bundles or exports through index files. Importing bundles breaks webpack's ability to perform optimal code-splitting.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

Here's a [small repo](https://github.com/mstijak/webpack-treeshake-play) describing the issue.

There is a library (lib) which exports four functions: `a`, `b`, `c`, and `d` and an app with two entry files `entry1.js` (E1) and `entry2.js` (E2). E1 imports functions `a` and `c`. E2 import functions `b` and `c`. Webpack is configured to create a commons chunk (C).

The output is:
E1: 
E2:
C: `a`, `b`, `c`, `d`

Everything is moved into the commons chunk C if functions are imported from a bundle.

**What is the expected behavior?**
E1: `a`
E2: `b`
C: `c`

`d` should be shaken off.

This behavior can be achieved by importing functions from their source files, however, that is not very practical as source files might be in a different language, e.g. TypeScript.

**If this is a feature request, what is motivation or use case for changing the behavior?**
By breaking into pieces, each entry chunk may include specific parts of imported libraries, so the commons chunk doesn't get too big and contains only what's really common across entry points.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
webpack@3.0 RC1
",https://github.com/webpack/webpack/issues/5035
3,"TITLE: Compiler.run gives an error BODY: 
**Do you want to request a *feature* or report a *bug*?**

Bug

**What is the current behavior?**
Running `compiler.run(callback)` gives `Error: Must give hashtype string as argument`

**If the current behavior is a bug, please provide the steps to reproduce.**

Using code from [Webpack docs](https://webpack.js.org/api/plugins/compiler/) gives an error while running

**What is the expected behavior?**

Run without error

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node: v7.10.0
Webpack: v2.6.1
OS: MacOS Sierra 10.12",https://github.com/webpack/webpack/issues/5037
2,"TITLE: Load chunked assets from path relative to a variable entry location on CDN BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature!
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
The `publicPath` config option sets path relative to the current page url.

**If the current behavior is a bug, please provide the steps to reproduce.**
(notabug)
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
I would like to load chunked assets from a path relative to the entry script file's url, not the host page.

**If this is a feature request, what is motivation or use case for changing the behavior?**
My company develops solutions that are loaded on sites as third party scripts, similar to Disqus. Our current assets are hosted from a CDN, but the location is variable (otherwise we'd just hard code the cdn path). Instead of hard-coding a new CDN path each time in `publicPath`, we'd like to be able to configure our bundles to load chunks/assets relative to the entry script's location.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Using webpack 2.",https://github.com/webpack/webpack/issues/5045
1,"TITLE: V4 Architecture: DependenciesBlock<Module> extensibility API BODY: Currently there are two projects that are starting or just about to start that will require another file type be treated as a first class citizen in webpack. (ICSS2 & WebAssembly)

For this to happen in the current plugin architecture, we would need to do the following:
* Create new flavor specific Parser.js 
* Facilitate any Template and Subclasses to generate the proper runtime based on the asset
* Create module factories
* Have templates for any supported existing webpack targets: worker, electron-renderer, node, async-node
* Have enhanced-resolve flavor specific resolution patterns for each module type
* Have webpack-sources and source-list-map specific handlings for sourcemaps and source mutations (?)
* Have interoperable caching and minifying patterns where neccesary

Seeing all this in mind I'd like to open discussion for how we are going to scale this appropriately. 

Although I don't have solutions for every bullet point there seems like a possibility to create an API surface that could allow for ""first class modules"" to be implemented in a much easier fashion. In addition to this even a possibility for users to create ""first class modules"" themselves. 

### Parser meta/token event map
It would be really hard to maintainers 3+ separate large Parser.js files for each type. So I'd like to propose a meta language or schema map. Our current parser is both parser, and walker. If we could extract and abstract the walkers behavior to adapt to any/most AST's then there is potential to have a map or schema of some sort that could describe each token, how it must be walked, and the events it would emit (for parser plugins to pick up). My knowledge of CSS and HTML (first class potential modules that we would need to know) is limited and I am not sure if there is enough adaptable walking behavior to facilitate this but if it is possible, we could save an extreme amount of boilerplate walker and event emitting logic. 

### Monorepo transition and `webpack-module-x`
I'd like to see the code that we write for each first class module type be isolated into its own package, this way we only require that code when the user is leveraging one of these module types. I think that naming these `webpack-module-x` that would individually reside in webpack/webpack as a monorepo and manage with lerna etc. This would probably warrant us to also separate DependenciesBlock and Module and a few other helper classes into it' own package as well as each ""webpack-module"" will need to leverage these classes. 

So far these are just a few ideas I have right now that are high level but we want open discussion, ideas and feedback in ways to craft this archicture in a way that will allow first class modules to scale much easier as we go. I imagine that down the road we would ideally see up to 4-5 first class modules including HTML and TypeScript. 

",https://github.com/webpack/webpack/issues/5046
1,"TITLE: Having troubles resolving node_modules with main set to ./ BODY: 
**What is the current behavior?**
If a module such as this one https://github.com/avocode/react-resizer/blob/master/package.json
has it's `main` set to `./`. Webpack 2 seems not to be able to correctly resolve to `./index.js` event when `mainFiles` are set to `['index', 'index.js', 'index.coffee' ...]`

Webpack throws error:
```
Module not found: Error: Recursion in resolving
Stack:
  resolve: (/Users/vojtatranta/code/avocode/avocode) react-resizer
  new-resolve: (/Users/vojtatranta/code/avocode/avocode) react-resizer
  parsed-resolve: (/Users/vojtatranta/code/avocode/avocode) react-resizer module
  described-resolve: (/Users/vojtatranta/code/avocode/avocode) react-resizer module
  raw-module: (/Users/vojtatranta/code/avocode/avocode) react-resizer
  module: (/Users/vojtatranta/code/avocode/avocode) react-resizer
  resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules) ./react-resizer
  new-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules) ./react-resizer
  parsed-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules) ./react-resizer
  described-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules) ./react-resizer
  relative: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) 
  described-relative: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) 
  directory: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) 
  existing-directory: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) 
  resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) ./
  new-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) ./
  parsed-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) . directory
  described-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) . directory
  relative: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer)  directory
  described-relative: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer)  directory
  directory: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer)  directory
  existing-directory: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer)  directory
  resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) ./ directory
  new-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) ./ directory
  parsed-resolve: (/Users/vojtatranta/code/avocode/avocode/node_modules/react-resizer) . directory
 @ ./test.js 3:14-38
 @ multi ./test.js
```

**To reproduce**
Require module `react-resizer` with Webpack 2

**What is the expected behavior?**
It should resolve path to `./index.js` and properly required and bundled.

Webpack version: `2.6.1`
",https://github.com/webpack/webpack/issues/5048
3,"TITLE: Consider making all requires lazy (inline requires) BODY: **Feature request**

Use `babel-plugin-transform-inline-imports-commonjs` to inline all requires in the webpack codebase, making most modules lazy-loaded. Switching to inlined requires is a proven way to increase the runtime performance of the application.

**What is the current behavior?**
All Webpack files use top-level `require()`.

**If this is a feature request, what is motivation or use case for changing the behavior?**
Jest is now making the switch to inline requires and they see a massive improvement in performance:

Before inlining requires:

![](https://cloud.githubusercontent.com/assets/5106466/25776153/edb4c296-32b6-11e7-864b-0d5df0378ce6.png)

After:

![](https://cloud.githubusercontent.com/assets/5106466/25776154/f57c3856-32b6-11e7-9252-27a4ad3f4c86.png)

See their issue here: https://github.com/facebook/jest/pull/3493.

If `webpack` would see an even 10% increase in execution speed, I believe it would be worth doing it.",https://github.com/webpack/webpack/issues/5050
5,"TITLE: It isn't made clear exactly how to use non-javascript webpack configs. BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature.
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
If your webpack.config.* is in a non-javascript language, webpack will very conveniently use an appropriate transpiler to run it, but only if you have all the required packages installed, as listed on the [js-interpret extensions map](https://github.com/js-cli/js-interpret). This would be fine, except for the fact that if you're missing them, it will attempt to read the config as javascript and produce a rather unhelpful error message.
In my case, it looks like this:
```
> sachiel-use-test@1.0.0 start /Users/frob/Projects/sachiel-use-test
> webpack-dev-server --config webpack.config.ts

/Users/frob/Projects/sachiel-use-test/webpack.config.ts:1
(function (exports, require, module, __filename, __dirname) { import webpack = require(""webpack"")
                                                              ^^^^^^
SyntaxError: Unexpected token import
    at Object.exports.runInThisContext (vm.js:78:16)
    at Module._compile (module.js:545:28)
    at Object.Module._extensions..js (module.js:582:10)
    at Module.load (module.js:490:32)
    at tryModuleLoad (module.js:449:12)
    at Function.Module._load (module.js:441:3)
    at Module.require (module.js:500:17)
    at require (internal/module.js:20:19)
    at requireConfig (/Users/frob/Projects/sachiel-use-test/node_modules/webpack/bin/convert-argv.js:96:18)
    at /Users/frob/Projects/sachiel-use-test/node_modules/webpack/bin/convert-argv.js:109:17
```
This is of course fixed by installing `typescript` and `ts-node`, as hinted at by the js-interpret documentation, but you might not guess that from this message or the [relevant documentation page](https://webpack.js.org/configuration/configuration-languages/).

**If the current behavior is a bug, please provide the steps to reproduce.**
Not sure if I'd exactly call it a ""bug"", but just make a webpack config in a language that isn't javascript and try to run webpack or webpack-dev-server on it and you'll see what I mean.
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
It would be very nice if webpack would warn you that you're trying to run a non-js config without the proper tooling installed (just by looking at the extension, for instance), but at the very least this behavior and the proper course of action ought to be mentioned on the [Configuration Languages documentation page](https://webpack.js.org/configuration/configuration-languages/).

**If this is a feature request, what is motivation or use case for changing the behavior?**
Right now the documentation doesn't make clear exactly what needs to be done to enable support for non-javascript configuration files, and when you do it incorrectly, webpack gives you no guidance in the right direction. It's entirely up to the user to figure out this somewhat ""magic"" behavior.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Webpack 2.6.1, Node 7.1.0, macOS 10.12.4",https://github.com/webpack/webpack/issues/5053
5,"TITLE: Code Golf is too hard or unclear BODY: According to Google Analytics, the [Code Golf challenge](https://www.freecodecamp.com/challenges/golf-code) is way too hard, and is taking campers an average of 6 minutes and 35 seconds to finish (if they finish - a lot of them seem to give up). 

According to this table, campers spend more time on it than they do on the algorithm challenges.

![pages_-_analytics](https://user-images.githubusercontent.com/985197/27998085-7462ffec-64cb-11e7-821c-ed87b59d85e6.png)

We need to either reword this or simplify the challenge so it can be completed in closer to 3 minutes. Otherwise, we should move it back to the algorithm section.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15618
3,"TITLE: Resolve Modules Doesn't Resolve Modules BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Report a bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

I have a submodule which is used across all my projects as a global base for my build config.
At build time the parent project pulls in the webpack config from the submodule and compiles.
Majority of my 3rd party dependencies are located in the submodule so to resolve these modules I have added the absolute path to resolve.modules config array, however these are not resolving as expected.

I have had this issue for a long time and this is the second instance #3160 in which I attempted to gain clarity on what might be causing this issue.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**File Structure:**

* Project
  * GlobalSubmodule
    * node_modules
* Webpack.config
* node_modules

**Webpack Config**

resolve: {
modules: [
path.join('path_to_global_submodule', './node_modules'),
'node_modules'
]

**What is the expected behavior?**

The dependencies should resolve at build time.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

**Webpack version:**
^2.6.1

**Environment:**
Windows 10

**Framework/Language:**
Angular ^4.1.2, Typescript ^2.0.10
",https://github.com/webpack/webpack/issues/5061
5,"TITLE: Failed to resolve es6 harmony import BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Webpack fails to resolve es6 harmony import

**If the current behavior is a bug, please provide the steps to reproduce.**
I've created a small repo to ease bug reproducing https://github.com/jakwuh/webpack-import-bug

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
The expected behaviour is to resolve harmony import

**If this is a feature request, what is motivation or use case for changing the behavior?**
Not a feature request

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Node v6.10.1
Webpack beta and 2.6.1
macOS 10.12.5 (16F73)
",https://github.com/webpack/webpack/issues/5068
2,"TITLE: ""module"" field in package.json breaks if author uses it BODY: Whenever an author adds the ""module"" field to a package.json - I start getting errors like ""Illegal Invocation"" when I try to load that file.  redux-persist for example provides it and if I don't delete the module from the package.json it fails completely.  

Using Webpack 3",https://github.com/webpack/webpack/issues/5071
1,"TITLE: Able to track file removal in `watch-run` BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

feature

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

It's not possible to get removed files using current `watching.getTimes()` API.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

Provide some way to get the list of removed files from FS watcher.

**If this is a feature request, what is motivation or use case for changing the behavior?**

It will allow TypeScript (and other stateful loaders) to remove files from the inner state.
",https://github.com/webpack/webpack/issues/5072
4,"TITLE: file does not match the corresponding path on disk - File does not exist BODY: I'm reporting a bug. 

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

When I change files (recompiled in a linked package), webpack chokes with

```
Error in ./src/index.js
Module not found: [CaseSensitivePathsPlugin] `some file.js` does not match the corresponding path on disk - File does not exist.

 @ ./src/index.js 29:16-36
```

**What is the expected behavior?**

I'd expect webpack to just happily restart. 

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

I'm using webpack 1.13.2 and server 1.16.1. 

I filed this issue with the app I'm working on at https://github.com/vega/vega-editor/issues/129. ",https://github.com/webpack/webpack/issues/5073
5,"TITLE: This in module not undefined BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Report a bug.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
The value of `this` at the top level in a module is not `undefined`; instead it's an object.
**If the current behavior is a bug, please provide the steps to reproduce.**
```js
export default 4;

console.log('module this', this);
```
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
`this` at the top level in the module must be `undefined`: https://tc39.github.io/ecma262/#sec-module-environment-records-getthisbinding
**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
webpack 2.6.1, node 6.11.0, ubuntu",https://github.com/webpack/webpack/issues/5074
4,"TITLE: Get error when dynamic require BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug, the error info is

```
Error: Cannot find module './t-1497618018120.jpg'.
Stack trace:
webpackContextResolve@http://localhost:8088/0.bcdcde07f5be0cdde324.hot-update.js line 6 > eval:13:9
webpackContext@http://localhost:8088/0.bcdcde07f5be0cdde324.hot-update.js line 6 > eval:8:29
imgSrc@http://localhost:8088/index.js line 1055 > eval:18:28
get@http://localhost:8088/index.js line 819 > eval:2779:13
evaluate@http://localhost:8088/index.js line 819 > eval:2879:16
computedGetter@http://localhost:8088/index.js line 819 > eval:3133:9
get@http://localhost:8088/index.js line 819 > eval:1609:7
render@http://localhost:8088/index.js line 1391 > eval:11:7
renderMixin/Vue.prototype._render@http://localhost:8088/index.js line 819 > eval:3904:15
updateComponent@http://localhost:8088/index.js line 819 > eval:2440:18
get@http://localhost:8088/index.js line 819 > eval:2779:13
run@http://localhost:8088/index.js line 819 > eval:2849:17
flushSchedulerQueue@http://localhost:8088/index.js line 819 > eval:2616:5
queueNextTick/<@http://localhost:8088/index.js line 819 > eval:656:11
nextTickHandler@http://localhost:8088/index.js line 819 > eval:603:7
  index.js%20line%20819%20%3E%20eval:524:7
```

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
use dynamic require in code, get error when user upload a image, node.js will generate a image, then dynamic require image in vue, and important to note it works althrought get error

**If the current behavior is a bug, please provide the steps to reproduce.**
code like this

    require.context(""../../static/uploads"", false,/^\.\/.*\.jpg$/)(""./t-""+this.imgUrl+"".jpg"")

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->
the project address is https://github.com/dxcqcv/auto-pages


**What is the expected behavior?**
do not report error

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
lastest chrome or firefox
node.js 7.6+
webpack 2.3.3
windows and arch linux",https://github.com/webpack/webpack/issues/5077
4,"TITLE: CommonsChunkPlugin with children option unsafe for children with multiple parents BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->
Bug?

**What is the current behavior?**

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

If I have two entry points that both use the same async bundles, and use the CommonsChunkPlugin with the `children` option, it seems that one of the parent bundles receives the common chunks from the children, but the other does not. This ends up breaking pages that happen to use the bundle that did not receive the common chunks, which is why I am suggesting it might be a bug.

For example, let's say I have two entry points, `entryFoo.bundle.js` and `entryBar.bundle.js`. Now lets say that both of these entry points use the same async bundles, `async-a.js`, `async-b.js`, `async-c.js`, and `async-d.js`. Now lets say I have configured webpack like this:

```js
    new webpack.optimize.CommonsChunkPlugin({
      names: [
        'entryFoo.bundle',
        'entryBar.bundle',
      ],
      children: true,
      minChunks: 4,
    }),
```

This seems to extract the common chunks from the children into one of the entry bundles but not the other, and there doesn't seem to be a way to configure webpack to make this work.

**What is the expected behavior?**

I think it might make sense to have webpack by default consider both parent trees when making decisions about children common chunks, and provide a mechanism to opt out specific bundles from this behavior (e.g. if you have two entry points that you know will always be on the same page). 

Alternatively, I think it would be acceptable to do the inverse, where the behavior is as it currently works but there is a way to configure webpack to opt in specific entry points into this behavior.

If it is already possible to accomplish this, I'd love to know how!

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

I noticed this on webpack 2.3.2 (which we are stuck on until #4863 is resolved).

Thanks so much for all of your hard work on this project!",https://github.com/webpack/webpack/issues/5078
3,"TITLE: Problems with pnpm and the way loaders are resolved BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**bug**?

**What is the current behavior?**

I can't create libs which use webpack and loaders, install these libs with pnpm and try to use them, because the modules can't be found.

It looks like pnpm installs my lib here: `/Users/foo/test/ws-pnpm-test/node_modules/.registry.npmjs.org/@mercateo/ws/1.0.2/node_modules/@mercateo/ws`.

The loader is here `/Users/foo/test/ws-pnpm-test/node_modules/.registry.npmjs.org/string-replace-loader` and here `/Users/foo/test/ws-pnpm-test/node_modules/.registry.npmjs.org/@mercateo/ws/1.0.2/node_modules/string-replace-loader`.

I _think_ webpack only looks here for loaders: `/Users/foo/test/ws-pnpm-test/node_modules/string-replace-loader`, but this does not exist.

I _think_ webpack resolves loaders in node_modules relative to `process.cwd()`, but not relative to my lib.

I _can't_ just rewrite my config to something like this:

```js
{
  resolveLoader: {
    modules: [
       // goes up '@mercateo/ws/dist' to match `'/Users/foo/test/ws-pnpm-test/node_modules/.registry.npmjs.org/@mercateo/ws/1.0.2/node_modules/string-replace-loader'`
       // this could lead to different directories, if my lib isn't installed with pnpm
       join(__dirname, '..', '..', '..'),
       // this would match `'/Users/foo/test/ws-pnpm-test/node_modules/.registry.npmjs.org/string-replace-loader'`
       // but I can't be sure, that my users use the official registry and not a private mirror or something like that
       join(process.cwd(), 'node_modules/.registry.npmjs.org'),
      'node_modules'  // default
    ]
  }
}
```

What is the most robust way to solve this?
Can I specify something like that? `resolveLoaders.basedir: __dirname`, so all loaders can be resolved relative to my lib?

// cc @zkochan

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

`package.json`:


```
{
  ""name"": ""ws-pnpm-test"",
  ""version"": ""1.0.0"",
  ""private"": true,
  ""scripts"": {
    ""ws"": ""ws""
  },
  ""ws"": {
    ""type"": ""browser""
  },
  ""dependencies"": {
    ""@mercateo/ws"": ""^1.0.2""
  }
}
```

`tsconfig.json`: 

```
{}
```

`src/index.ts`: 

```
console.log('hello');
```

```
$ pnpm install
$ npm run -s ws -- build
ERROR in Entry module not found: Error: Can't resolve 'string-replace-loader' in '/Users/foo/test/ws-pnpm-test'
```

**What is the expected behavior?**

Build without error.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node LTS, Webpack 2.6, pnpm 0.71, Mac OS X.",https://github.com/webpack/webpack/issues/5087
5,"TITLE: Webpack 3 RC ModuleConcatenationPlugin crash, out of memory BODY: **Do you want to request a *feature* or report a *bug*?**

Bug

**What is the current behavior?**

Webpack crashes trying to build our application when using `Webpack.optimize.ModuleConcatenationPlugin()`.

Also note up until the crash the build time is also showing a >60% increase in regards to build time with this plugin.

**If the current behavior is a bug, please provide the steps to reproduce.**

Building a large application (3000-4000 modules), with several entry point, a few commons chunks, pretty aggressive code-splitting using `import()` everywhere and uglified with source-maps.

**What is the expected behavior?**

No crash without having to bump memory usage. Note the build time increase is pretty significant too - wouldn't expect a single plugin to have such a drastic impact.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

OS: Mac OSX
Node.JS: v6.9.1
Webpack version: 3.0.0-rc.2

Stack:

```
<--- Last few GCs --->

  471727 ms: Mark-sweep 1343.8 (1443.3) -> 1343.2 (1443.3) MB, 1503.7 / 0.0 ms [allocation failure] [scavenge might not succeed].
  473238 ms: Mark-sweep 1343.2 (1443.3) -> 1343.2 (1443.3) MB, 1509.9 / 0.0 ms [allocation failure] [scavenge might not succeed].
  474819 ms: Mark-sweep 1343.2 (1443.3) -> 1343.2 (1427.3) MB, 1579.0 / 0.1 ms [last resort gc].
  476439 ms: Mark-sweep 1343.2 (1427.3) -> 1343.2 (1427.3) MB, 1619.3 / 0.0 ms [last resort gc].


<--- JS stacktrace --->

==== JS stack trace =========================================

Security context: 0x24ab363cfb51 <JS Object>
    1: stringify [native json.js:~176] [pc=0x138f1ce98049] (this=0x24ab363c9111 <a JSON with map 0x8bbe1d0a0e1>,E=0x362ddef793a9 <an Object with map 0x26615909c261>,F=0x24ab36304381 <undefined>,S=0x24ab36304381 <undefined>)
    2: arguments adaptor frame: 1->3
    3: source(aka getSource) [/Users/chris/Projects/frontend/node_modules/stats-webpack-plugin/index.js:25] [pc=0x138f1d931920] (this=0x...

FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory
 1: node::Abort() [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 2: node::FatalException(v8::Isolate*, v8::Local<v8::Value>, v8::Local<v8::Message>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 3: v8::internal::V8::FatalProcessOutOfMemory(char const*, bool) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 4: v8::internal::Factory::NewRawTwoByteString(int, v8::internal::PretenureFlag) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 5: v8::internal::IncrementalStringBuilder::Extend() [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 6: v8::internal::BasicJsonStringifier::SerializeString(v8::internal::Handle<v8::internal::String>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 7: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<true>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 8: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<false>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
 9: v8::internal::BasicJsonStringifier::SerializeJSArraySlow(v8::internal::Handle<v8::internal::JSArray>, unsigned int, unsigned int) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
10: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<true>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
11: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<false>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
12: v8::internal::BasicJsonStringifier::SerializeJSArraySlow(v8::internal::Handle<v8::internal::JSArray>, unsigned int, unsigned int) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
13: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<true>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
14: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<false>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
15: v8::internal::BasicJsonStringifier::SerializeJSArraySlow(v8::internal::Handle<v8::internal::JSArray>, unsigned int, unsigned int) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
16: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<true>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
17: v8::internal::BasicJsonStringifier::Result v8::internal::BasicJsonStringifier::Serialize_<false>(v8::internal::Handle<v8::internal::Object>, bool, v8::internal::Handle<v8::internal::Object>) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
18: v8::internal::Runtime_BasicJSONStringify(int, v8::internal::Object**, v8::internal::Isolate*) [/Users/chris/.nvm/versions/node/v6.9.1/bin/node]
19: 0x138f16c092a7
sh: line 1: 43838 Abort trap: 6           webpack --config ./webpack/build.webpack.config.js --bail --profile

npm ERR! Darwin 14.5.0
npm ERR! argv ""/Users/chris/.nvm/versions/node/v6.9.1/bin/node"" ""/Users/chris/.nvm/versions/node/v6.9.1/bin/npm"" ""run"" ""build""
npm ERR! node v6.9.1
npm ERR! npm  v3.10.8
npm ERR! code ELIFECYCLE
npm ERR! frontend@0.209.0 build: `npm run clean; webpack --config ./webpack/build.webpack.config.js --bail --profile`
npm ERR! Exit status 134
npm ERR! 
npm ERR! Failed at the frontend@0.209.0 build script 'npm run clean; webpack --config ./webpack/build.webpack.config.js --bail --profile'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the frontend package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run clean; webpack --config ./webpack/build.webpack.config.js --bail --profile
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs frontend
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls frontend
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     /Users/chris/Projects/frontend/npm-debug.log
```
",https://github.com/webpack/webpack/issues/5089
1,"TITLE: webpack is not generating source maps BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**webpack.config.js**

    var path = require('path');
    
    module.exports = {
        entry: './src/index.js',
        output: {
            filename: 'bundle.js',
            path: path.resolve(__dirname, 'dist')
        },
        devServer: {
            contentBase: path.join(__dirname, 'dist'),
        },
        devtool: ""cheap-eval-source-map""
    }

**package.json**

      ""scripts"": {
        ""build"": ""./node_module/.bin/webpack --progress --colors"",
        ""dev"": ""./node_modules/.bin/webpack-dev-server --watch --progress --colors""
      },

**index.js**

    let h = ""hello world""
    console.log(h)

I run both `npm build` and `npm run dev` but neither seem to generate source maps. The way I'm checking if they show up is if I can see the original source in Chrome dev tools or Safari dev tools.

**What is the expected behavior?**

Source maps are generated.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node: v7.7.1
Webpack: 2.6.1
Operating System: macOS Sierra 10.12.2",https://github.com/webpack/webpack/issues/5091
3,"TITLE: Variable name mapping issue *only* when using ModuleConcatentationPlugin BODY: _Hi WP Team, congrats on the major version bump, and thank you for all of your hard work this year! Filing this in response to a [tweet](https://twitter.com/TheLarkInn/status/876940147811647489), would be great to get ETA on docs for `ModuleConcatentationPlugin`. We're aware it's an experimental feature. Keep us posted. Thanks!_
<!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
`Bug`
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Medium sized JS app. 80k LOC, 100s of modules.
Switching Webpack `2.6.1` to `3.0.0` works fine, no issues.
Build fails when adding `ModuleConcatentationPlugin()`.

With no other configuration changes, I get the following output:
```
ERROR in chunk main [entry]
scripts.bundle.js
Cannot map to variable name in module /Users/sdt/te/frontend/src/app/domainData/api/entities/elements/index.js (export 'COMMON_HEADERS')
```

Again, this _only_ happens when adding `ModuleConcatentationPlugin`, build works fine without it.

**If the current behavior is a bug, please provide the steps to reproduce.**
[Gist](https://gist.github.com/sdtsui/3fe95e0fbd0af28c586e257ad470f449), with full config.
Uploaded [BuildOutput.txt](https://github.com/webpack/webpack/files/1086600/BuildOutput.txt).


Unfortunately, my team is on a deadline and I'm unable to provide a minimal reproduceable repo.  I'm filing this issue in hopes that someone has an idea of what might be wrong.  I've tried this >6 times with re-cloning of the repos and a restart of my machine. It's possible I've left something out and this is a simple fix.  

The best I can do is upgrade us to `3.0.0` (which doesn't break our builds), and stay on top of this issue.  If you have tips for how to create a minimal repo, let me know -- seems tough with how big our project is, I'm unsure where to start creating a failure case from a smaller repo.  I've subscribed to the issue and am happy to provide more context: thanks for your attention!

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
The failed mapping is an api constant (for headers) and used in over a dozen other files successfully in 2.6.1, both in prod and dev builds.  We have changed only two things: webpack version, and a one-line addition of the plugin. 

The expected behavior is to not get this error (or any other future errors), and have a successful build.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Browser Version: `Version 58.0.3029.110 (64-bit)`
Node Version: `v6.9.4`
Webpack Version: `3.0.0`
OS: `OSX Sierra, Version 10.12.4 (16E195)`",https://github.com/webpack/webpack/issues/5096
1,"TITLE: Include only parts of Buffer interface BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

Feature

**What is the current behavior?**

Include whole `Buffer` interface: `assert`s, `base64`/`hex` encodings, `copy`, `write`, `fill`, etc.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

It would be cool if I could somehow select the features that I'm interested in, instead of pulling whole Buffer interface.

**If this is a feature request, what is motivation or use case for changing the behavior?**

Output size. `Buffer` implementation is really heavy at the moment!

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5097
2,"TITLE: Webpack 3 and babel-polyfill issue at runtime BODY: _Thanks for Webpack 3. its really awesome._

<!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

**Bug**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

* Build is fine.
* At runtime I get the following error

```sh
Uncaught ReferenceError: regeneratorRuntime is not defined
    at Object.<anonymous> (bundle.js:3325)
    at __webpack_require__ (bundle.js:20)
    at bundle.js:63
    at bundle.js:66
```

* As per `babel-polyfill` docs, I use `import ""babel-polyfill"";` inside [my entry file on top](https://github.com/gyandeeps/webpack3-issue/blob/master/src/index.js).

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

Repro repo with steps: https://github.com/gyandeeps/webpack3-issue

* Maybe this is not an issue with webpack and we have to change on how we consume `babel-polyfill`.
* I wanted to share this issue here to see what can be done.
* I am thinking other people might have this issue.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node: 8
OS: Windows 7
Webpack: 3.0.0",https://github.com/webpack/webpack/issues/5118
1,"TITLE: Webpack 3 seems to have/cause a memory leak BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
webpack-dev-server crashes after ~30 mins of dev work (not sure how many cycles this constitutes, I'll update with better estimates as I experience them).   Specifically, I get `FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory`. 

I'm using webpack dashboard, which doesn't let me copy + paste from the log window. 
![screen shot 2017-06-20 at 4 19 18 pm](https://user-images.githubusercontent.com/4086894/27360281-0e7e6108-55d5-11e7-9a6c-b9251213cf71.png)
![screen shot 2017-06-20 at 4 19 25 pm](https://user-images.githubusercontent.com/4086894/27360288-11fc872e-55d5-11e7-8791-6e9375fef269.png)

**If the current behavior is a bug, please provide the steps to reproduce.**

Non-deterministic.  Sustained webpack-dev-server activity eventually throws a memory allocation exception, as described above. 

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

Expected behaviour is for webpack-dev-server to continue to watch and rebuild app.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

OS: macOS Sierra, v10.12.15.  MBP, mid 2015, 2.5ghz i7, 16gb.
Node: 7.4.0
webpack-dev-server 2.4.5
webpack 3.0.0
browser: N/A",https://github.com/webpack/webpack/issues/5120
5,"TITLE: naming chunk names in webpack configuration. BODY: I implemented lazy loading module in angular 4. it work well. and when I navigate to the new page, it will load extra js file like: 0.chunk.js, 1.chunk.js.

my question is: how to change that chunk name? ex: 1.chunk.js => about.js 0.chunk.js => user.js

Anyone please post code for the configuration.",https://github.com/webpack/webpack/issues/5124
4,"TITLE: Base64 hashes in filenames should be URL-safe BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

When using `output.hashDigest = 'base64'`, hashes can contain `/` and `+`. Both will probably work (at least the slash will), as they will be handled the same way by webservers as filesystems. But it certainly isn't pretty when your full bundle path suddenly is `/public/main.B/0sK5.js`.

**If the current behavior is a bug, please provide the steps to reproduce.**

Because of the random nature of the issue, I don't have a simple way to reproduce it.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

URL-safe base64 should be used. This can be achieved by replacing `+` with `-` and `/` with `_`. See https://en.wikipedia.org/wiki/Base64#URL_applications. This should probably be done everywhere base64 can be used as hash encoding.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5136
3,"TITLE: Post Loaders don't work correctly (Webpack v3) BODY: I was trying to use Babili as a ""post"" loader for Webpack. This would make it very easy - bundled with the new cache-loader to actually get very fast cached production builds while being ES6/ES7 capable.

This is the config I was triying to use:

```js
...

// Transpile our own JavaScript files using the setup in `.babelrc`.
{
  test: /\.js$/,
  exclude: /node_modules/,
  use: [
    ""cache-loader"",
    ""babel-loader""
  ]
},

// Compression on all JS files - in a common postprocessing step
{
  test: /\.js$/,
  enforce: ""post"",
  use: [
    ""cache-loader"",
    {
      loader: ""babel-loader"",
      options: {
        babelrc: false,
        presets: ""babili"",
        plugins: [ ""syntax-dynamic-import"" ]
      }
    }
  ]
},

...
```

Unfortunately I figured out that the babili step is being executed only on the files which are not processed by the first loader. This means in the end everything is super fast, but as it does not compress my own implementation files, it's still no way to go.

If I understand the documentation right this should probably work even if the documentation here is pretty lightweight on how to actually use this feature. 

It would be great if it would work that way.

https://webpack.js.org/configuration/module/#rule-enforce
",https://github.com/webpack/webpack/issues/5139
5,"TITLE: Dynamic import behavior is inconsistent with static import BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

This is a bug.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

The following should always be true for ES6 modules but right now it may evaluate to false when using webpack:

```js
import X1 from 'x';
import('x').then(ns => ns.default === X1); // should always be Promise.resolve(true)
```

**If the current behavior is a bug, please provide the steps to reproduce.**

The following repo contains an example: https://github.com/jkrems/webpack-dynamic-import/blob/master/import-compare.js

This only seems to happen when the imported module was written as a CommonJS module.

You can run it via `npm install && npm test`.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

Importing the default export using dynamic- and static import should always evaluate to the same value.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

```
> node --version
v6.11.0

> webpack --version
3.0.0
```
",https://github.com/webpack/webpack/issues/5153
2,"TITLE: Webpack should not modify bundles on disk unless changed BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Webpack emits (overwrites) files even if they are unchanged. This updates the file modification time and can break caching mechanisms.

**If the current behavior is a bug, please provide the steps to reproduce.**
I think any webpack config will do this, but I can provide a specific example if needed.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
Webpack should check whether the created bundle hash and filename matches the one on disk, and not emit the bundle if so.

**If this is a feature request, what is motivation or use case for changing the behavior?**
HTTP servers will send the file modification date to the client, which can use it for a conditional GET request. I appreciate that setting long cache times combined with hashes in the filename partially solve this issue, but supporting conditional GET would be useful too.

I also move bundles to my web server using [Django's `collectstatic` functionality](https://docs.djangoproject.com/en/1.11/ref/contrib/staticfiles/), which relies on file modification dates. This means that all of the emitted bundles are copied even if their contents has not changed.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Webpack 3.0.0",https://github.com/webpack/webpack/issues/5157
2,"TITLE: output.pathinfo results in invalid javascript BODY: **Do you want to request a *feature* or report a *bug*?**
bug

**What is the current behavior?**
When using the `output.pathinfo` option then the added comment might end early due to `*/` and the asset therefore is not valid javascript anymore.

**If the current behavior is a bug, please provide the steps to reproduce.**
```javascript
const babelConfig = {
    presets: [
        ['es2015', {modules: false}],
    ],
    plugins: [
        ['istanbul', {exclude: '**/node_modules/**'}],
    ],
};

module.exports = {
    // ...
    module: {
        rules: [
            {
                test: /\.vue$/,
                loader: 'vue-loader',
                options: {
                    loaders: {
                        js: 'babel-loader?' + JSON.stringify(babelConfig),
                    },
                },
            }
```

Now I get the following in my compiled asset:
```javascript
  __webpack_require__(/*! !babel-loader?{""presets"":[[""es2015"",{""modules"":false}]],""plugins"":[[""..."",{""exclude"":""**/node_modules/**""}]]}!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Component.vue */ 13),
```
Note that the comment is interrupted because of the occurrence of `*/`

**What is the expected behavior?**
Comment must not contain `*/`.
Could be fixed [here](https://github.com/webpack/webpack/blob/v3.0.0/lib/dependencies/ModuleDependencyTemplateAsId.js#L12)

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Webpack 3.0.0
",https://github.com/webpack/webpack/issues/5158
2,"TITLE: resolve module in manifest.json when add the DllReferencePlugin BODY: If I missed something, Please let me know.

<!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

### **Do you want to request a *feature* or report a *bug*?**

feature

### **What is the current behavior?**

* I have the manifest and the bundled dll js which include React, React-dom etc.
* I want to use it for other project, and copy them to the other project.
* my src wrote by

   ```js
   const React = require('react')
   ```
   and **not npm install react lib** because I configure the dll plugin in my webpack.config.js.

* But when I run the webpack cli and it throw the `Can't find module react` error

### **If the current behavior is a bug, please provide the steps to reproduce.**

No

### **What is the expected behavior?**

I think webpack will find the react in manifest for me, because I had the react source in the bundled dll js, I didn't need to npm install react in my new project.

### **If this is a feature request, what is motivation or use case for changing the behavior?**

It will save a lot of node module in my project, I just use the manifest.json and bundled dll js.
I trace the webpack src, [enhanced-resolve](https://github.com/webpack/enhanced-resolve) will look up file system and throw error when the file not exist, But It would be awesome if the webpack.config.js include the dllReferencePlugin and the webpack also find the module in the manifest.json and get the module id in the bundled dll js.

### **Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

* MacBook
* Webpack3
* Node 8


Thanks",https://github.com/webpack/webpack/issues/5166
1,"TITLE: commonsChunkPlugins troubles with code splitting BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Troubles with chunks and commonsChunkPlugins.

**If the current behavior is a bug, please provide the steps to reproduce.**
I have 2 entry:
```javascript
main: `${appPath}/startup/LightApp`
vendor: [
  'babel-polyfill',
  'core-js',
  'object-assign',
  'immutable',
  'react',
  'react-dom',
  'react-redux',
  ...
]
```
1) If i doesn\`t use commonsChunkPlugins - webpack build 2 files: `main.js` and `vendor.js` **but** both files contain modules from 'vendor'
2) if use commonsChunkPlugins:
```javascript
new webpack.optimize.CommonsChunkPlugin({ names: ['vendor', 'manifest'] })
```
Now `main.js` exclude `vendor` modules.
Finish? No. Let\`s try split to another chunk:
```javascript
const detectChunk = function(targets) {
  return function(module, count) {
    var context = module.context;
    return context && context.indexOf('node_modules') >= 0 &&
      targets.find(t => new RegExp(`/${t}/`, 'i').test(context));
  }
}
...
new webpack.optimize.CommonsChunkPlugin({
  name: 'draft-js',
  minChunks: detectChunk(['draft-js', 'draft-convert', 'draft-js-plugins-editor']),
})
```
1) Without CommonsChunkPlugin for `vendor` that work (remember about multiple includes modules)
2) With CommonsChunkPlugin that doesn\`t work. Just empty `draft-js.js` file.

**Last**

Use in code
```javascript
import(/* webpackChunkName: ""my-component-chunk"" */ 'MyComponent')
.then((Component) => { this.setState({ Component }); })
```
webpack config:
```javascript
new webpack.optimize.CommonsChunkPlugin({
  children: true,
  async: true,
})
```
Nope, webpack include that to `main`, no special chunk.
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

Logic with normal code splitting =)

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

macOS Sierra 10.12.5, node v7.8.0, webpack 3.0.0

I just want build superfast app with your brilliant webpack.

",https://github.com/webpack/webpack/issues/5172
4,"TITLE: Common chunks cannot find scripts in resolve.alias BODY: **Do you want to request a feature or report a bug?**
Bug

**What is the current behavior?**
When used with commonsChunk with `async:true` and `children:true` I get a message that I have missing dependencies in all the folders specified in the `resolve.alias` config.

**If the current behavior is a bug, please provide the steps to reproduce.**
Using laravel-mix for setting up webpack.
My two entries are:
'resources/assets/js/app.js'
'resources/assets/js/admin.js'
config: https://gist.github.com/dobromir-hristov/546c4cc0d321e6c6ca3486d89fa766b9

**What is the expected behavior?**
Should be able to find the aliased files.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Node - 6.9.1
Webpack 3.2.0, 3.3.0
Windows 10

![127 0 0 1-8888-](https://user-images.githubusercontent.com/9863944/28641253-409a392a-7257-11e7-8970-a5bdcee07f78.png)",https://github.com/webpack/webpack/issues/5384
3,"TITLE: Feature Request: Make the plugin API play nicely with type systems. BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Feature.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

The webpack tappable hooks are generic and have complex APIs that can't be type checked when using TypeScript's `@types/webpack` module. This means that IDE features like intellisense are basically useless and I have to read source code or documentation to know what's expected.

**What is the expected behavior?**

If there were two functions per hook it would allow typed environments ensure that events are fired with the right arguments and handled by handlers that expect the right arguments. Also, together with code documentation generators, this would provide a systematic way to document all plugin hooks and their arguments.

**If this is a feature request, what is motivation or use case for changing the behavior?**

I've been doing this in my code and it's really nice:

```ts
class Foo extends Tapable {
  onBar(handler: (barArg: string) => void) {
    this.plugin(""bar"", handler);
  }
  notifyBar(barArg: string) {
    this.applyPlugins(""bar"", barArg);
  }
}
```

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Webpack 3.0
",https://github.com/webpack/webpack/issues/5190
2,"TITLE: [enhancement] ModuleConcatenationPlugin - drop webpack bootstrap if possible BODY: **Do you want to request a *feature* or report a *bug*?**

feature

**What is the current behavior?**

Single file bundles using ModuleConcatenationPlugin still using so called webpack bootstrap (50~ lines of code) + wrapping the exported module within a single module-closure (numbered `0`).

**What is the expected behavior?**

Omit the current behaviour whenever possible - therefore going closer towards the Rollup behaviour.

**If this is a feature request, what is motivation or use case for changing the behavior?**

Being a viable alternative to rollup when bundling libraries.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

webpack3




Besides the mentioned information I would like to offer my help with implementing this, a helping hand would be great though, im webpack internals noobie ;)

Also rollup handles cjs modules way more gracefully (hoists them!), should I create other issue for this?",https://github.com/webpack/webpack/issues/5191
5,"TITLE: [Feature Request] Handle external missing in runtime. (Or make a guarantee before bootstrap) BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature, or discuss first.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Assume there are some Dll or CommonChunks file, we usually put it in HTML script:
```html
<script src=""./dll/common.bundle.js""></script>
<script src=""./commonChunk.bundle.js""></script>
<script src=""./entry.bundle.js""></script>
```

Once the `entry.bundle.js` was loaded, the code will be launched and believe other runtime external dependencies(dll, commonChunk) are already exist.

**If this is a feature request, what is motivation or use case for changing the behavior?**

### What if the previous script load failed? 

They may fail to load due to enter the weak network occasionally, or some area's CDN breakdown, even hijacked by network provider which cause the script broken and blocked by CSP (very common in China mainland).

We will see that the entry will be broken and throw error directly due to lack of dependencies:
![image](https://user-images.githubusercontent.com/4403937/27761817-fbd0b6c6-5e96-11e7-8c5e-1fdbc411c0ab.png)

![image](https://user-images.githubusercontent.com/4403937/27761025-18deef90-5e87-11e7-8a63-5c10612acf36.png)

Currently we have neither ability to guarantee them load done by any webpack way, nor occasion to reload the failed ones before startup. If there are any hooks that let we have ability to inspect and reload them (such as use another CDN), It will help us prevent the page from becoming unusable.

Actually, the page I'm maintaining which have aproximately 20 million PV in China mainland and can met a lot of error reported about it every day because of the terrible network and telecommunications environment (hijacked, CDN timeout, network switch frequently). We do need a retry and assurance mechanism to improve the usability of some unlucky users.

Sorry if tl;dr. 

the one implemetation I can imagine is extract the **bootstrap code** inline to the HTML page, and also with the **external chunks list** analyzed from the entry. So that we can check whether the necessary dependencies are all present before we startup (not sure whether can implemented by write Plugins):

```html
<script src=""./dll/common.bundle.js""></script>
<script src=""./commonChunk.bundle.js""></script>
<!-- only modules, but extract the bootstrap code. -->
<script src=""./entry.bundle.js""></script>
<!-- only modules, but extract the bootstrap code. -->

<script>
//Extracted from entry or commonChunk
var bootstrap = (function(modules) { // webpackBootstrap
/*......*/
});

//Analyzed by plugin
var externalChunksList = /*...*/;

//Generated by plugin, should let users setting their own handler
if(hasAllExternalsInstalled()) {
  bootstrap(/*...*/);
}else{
  tryReloadMissingChunks().then(() => bootstrap(/*...*/)).catch(e => /*...*/);
}
</script>
```

Please feel free to indicate my mistake. I'm also looking forward to more brilliant proposal.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

webpack 3.0.0 with all platform.",https://github.com/webpack/webpack/issues/5197
3,"TITLE: 'libraryTarget: umd' with nested namespace for optional dependency causes an error BODY: **Do you want to request a *feature* or report a *bug*?**
This can be a bug, but I think this is more like a feature.

**What is the current behavior?**
I'm using `'umd'` for the `libraryTarget` and here's my config file.

```js
module.exports = {
  entry: './src/index.js',
  output: {
    library: ['my', 'module'],
    libraryTarget: 'umd',
    filename: 'bundle.js'
  },
  externals: {
    'my-ext-module': {
      commonjs: 'my-ext-module',
      commonjs2: 'my-ext-module',
      amd: 'my-ext-module',
      root: ['my', 'ext', 'module']
    }
  }
};
```
This works just find even though both of my target and external namespaces are multi-nested.

But if I try to make the external module (`my-ext-module`) optional, this doesn't work well. When I run the bundled file on a browser environment (using namespace), a script error occurs at the code below, which is the last line of the `webpackUniversalModuleDefinition` function body.
```js
root[""my""] = root[""my""] || {}, root[""my""][""module""] = factory(root[""my""][""ext""][""module""]);
```

Because the `window.my.ext` does not exist, `factory(root[""my""][""ext""][""module""])` causes an error and I can't even run my code even though it is executable without `my-ext-module`.

**What is the expected behavior?**

I know I can wrap my `require(...)` code with `try...catch` statement and make the generated code deal with optional dependencies, but it works only for `commonjs` and `amd`. I think the generated code for the 'root` case also should look like this.

```js
root[""my""] = root[""my""] || {}, root[""my""][""module""] = factory(root[""my""] && root[""my""][""ext""] && root[""my""][""ext""][""module""]);
```

**If this is a feature request, what is motivation or use case for changing the behavior?**

My team is maintaining open source UI widgets and each module has namespace under `tui`. (ex. `tui.component.Pagination`, `tui.Grid`). The `tui.Grid` has an optional dependency for `tui.component.Pagination` and it was just fine when we handled dependencies using namespaces (with bower). But recently, we've been moving from bower to npm to support commonjs as well (using umd) and having trouble with this situation.

I think it's reasonable to handle multi-depth namespaces safely as a default, even without `try...catch` statement. If you use ES6 module, there's no way to handle optional dependencies because of its static nature. It's not a big problem in a node environment because adding a dependency has little cost. But in a browser environment, one more external script file means slower loading time. So there should be a way to run a code which has optional dependencies without including those script files.

If granted, I can make a PR as I've already been making my own Plugin to deal with this situation. Please consider this issue and give me a feedback. Thanks :)

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node: 8.1.2, Webpack: 3.0.0, OS: macos
(Webpack 1.x.x also has same issue)
",https://github.com/webpack/webpack/issues/5202
4,"TITLE: Referencing `require` causes immediate exception BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

```
$ echo ""console.log(require);"" > some.js
$ node_modules/.bin/webpack --entry ./some.js --output-filename=some.webpack.js
```

This results in the following output (reformatted for readability):
```
console.log(!(
  function webpackMissingModule() { 
    var e = new Error(""Cannot find module \"".\""""); 
    e.code = 'MODULE_NOT_FOUND'; 
    throw e; 
  }()
));
```
This run results in immediate exception and doesn't allow me to pass `require` as an argument to a function.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

At minimum, the generated code shouldn't include function call, just function definition. Preferably, webpack should do nothing or rename `require` as it does by default.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

node: 6.10.3
webpack: 3.0.0 and beta (3.0.0-rc.2)
OS: ubuntu linux 16.04
",https://github.com/webpack/webpack/issues/5209
1,"TITLE: convert-argv.js adds HotModuleReplacementPlugin even when already available BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
To me it feels more like a bug.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
If the `argv` contains the `--hot` option, the `HotModuleReplacementPlugin` is added without further checks.

**If the current behavior is a bug, please provide the steps to reproduce.**
1. Add `new webpack.plugins.HotModuleReplacementPlugin()` to `webpackConfig.plugins`
2. Invoke `webpack` (or `webpack-dev-server`) bin with `--hot` flag.
3. Break after [bin/convert-argv.js:383](https://github.com/webpack/webpack/blob/master/bin/convert-argv.js#L383)
4. Inspect `options.plugins` (plugin included twice)

Manifests in a weird error: 
> `SyntaxError: missing ) after argument list`

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
`--hot` should be a noop if already added as plugin

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

I think you could consider it ""wrong configuration"" and maybe want to close it directlly, then it at least serves better discoverability when facing the error.

A simple fix within `convert-argv.js` would be the following:

```js
var hasHotModuleReplacementPlugin = options.plugins.some((plugin) => {
  return plugin.constructor.name === 'HotModuleReplacementPlugin';
});

if (!hasHotModuleReplacementPlugin) {
  options.plugins.push(new HotModuleReplacementPlugin());
}
```",https://github.com/webpack/webpack/issues/5233
4,"TITLE: Tests passing with wrong text BODY: Challenge [nest-an-anchor-element-within-a-paragraph](http://beta.freecodecamp.com/en/challenges/basic-html-and-html5/nest-an-anchor-element-within-a-paragraph) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<h2>CatPhotoApp</h2>
<main>
  
  <p><a href=""http://freecatphotoapp.com"" target=""_blank"">cat photos</a>View more </p>
  
  <img src=""https://bit.ly/fcc-relaxing-cat"" alt=""A cute orange cat lying on its back."">
  
  <p>Kitty ipsum dolor sit amet, shed everywhere shed everywhere stretching attack your ankles chase the red dot, hairball run catnip eat the grass sniff.</p>
  <p>Purr jump eat the grass rip the couch scratched sunbathe, shed everywhere rip the couch sleep in the sink fluffy fur catnip scratched.</p>
</main>

```

This results in ""cat photosView more "". I may be able to fix this issue as well.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15291
4,"TITLE: Webpack keeps compiling BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Report a bug

**What is the current behavior?**
My bundle gets compiled several times.

**If the current behavior is a bug, please provide the steps to reproduce.**
I'm creating a webpack boilerplate for my personal projects, you can check it on this repo on the `cleanup` branch https://github.com/alejandronanez/webpack-boilerplate/tree/cleanup

1. `npm start`
2. Add a few lines to `src/styles/app.scss` - a few empty new lines will do the trick
3. CTRL + C to stop the process
4. `npm start` again
5. You should start seeing the bundle compiles on a loop for a while, and then it will stop

Here's a GIF with what is happening:

![webpack](https://user-images.githubusercontent.com/464978/27987858-77b8a2d8-63da-11e7-8f5b-897f4f5de977.gif)


**What is the expected behavior?**

The looping should not occur.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
```
node: 8.1.3 && LTS
npm: 5.1.0
OSX: 10.12.5
webpack version: 3.1.0 && 2.6.1
```",https://github.com/webpack/webpack/issues/5242
1,"TITLE: Add Chrome content script target BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
feature
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
When I lazy load a chunk from a Chrome content script, it inserts a script tag into the page loaded in the active tab, which then causes the code to execute in the context of the webpage instead of that of the Chrome extension. It then throws an error as the webpackJsonp exists in the [isolated execution environment](execution-environment) and is not visible from the context of the webpage.

**If the current behavior is a bug, please provide the steps to reproduce.**
N/A

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
There should be a Chrome content script [target](https://webpack.js.org/configuration/target/) available which uses the appropriate Chrome API calls to lazy load chunks in the isolated execution environment.

**If this is a feature request, what is motivation or use case for changing the behavior?**
There does not seem to be a way to lazily load chunks from a Chrome content script.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5244
1,"TITLE: Bug: ""Dead code"" eliminate media files BODY: # Feature request

I need to remove certain media file (non-inlined using file-loader) depending on the environment (development/production) using Webpack (v3.1.0) and UglifyJsPlugin.

I suggest adding ""Dead code"" elimination unused for media files

## Use case

Developing a software solution that works with different products - where some are launched and others are in production and are not live on production, bet abled to use on development, staging environments.

## Current situation

```javascript
export const IMAGES = Object.assign(
  {
    PROFILE: require('images/profile.png'),
    // ...
  },
  process.env.NODE_ENV !== 'production' && {'LOGO': require('images/logo.png')}
);
```

I have gotten so far that after the production build the outputted Javascript file doesn't contain an `IMAGES.LOGO` key, but the required `images/logo.png` file is present in the output. And has code references if searched by the outputted hash name within the js file.

## Webpack plugin configuration

```javascript
new webpack.DefinePlugin({
  'process.env.NODE_ENV': JSON.stringify('production')
}),
new webpack.optimize.UglifyJsPlugin({
  comments: false,
  sourceMap: true
})
```",https://github.com/webpack/webpack/issues/5251
5,"TITLE: Missing module at 1st build, present at consecutive build only from webpack@3 BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

*bug*

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Having this error when updating from webpack@2 to webpack@3 on a dynamic css load

```
vendor-2d14daf….js:55 Uncaught (in promise) TypeError: Cannot read property 'call' of undefined
    at __webpack_require__ (vendor-2d14daf….js:55)
```

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

It might be an issue from the loader but I dont know for sure.

I have this syntax 

```js
            require.ensure(['../../assets/css/foo.styl'], function(require) {
                require('!!style-loader!css-loader!stylus-loader!../../assets/css/foo.styl');
            }, 'foo-styl');
```

I also tried this new one, but same issue

```js
import(/* webpackChunkName: ""foo-styl"" */ '!style-loader!css-loader!stylus-loader!../../assets/css/foo.styl');
```

Using webpack dev/watch mode I have the error, but if I hit *save* on the file, webpack watch mode trigger rebuild / reload and the error is gone, all working fine. I reproduce the error by stopping webpack and launch it again or with a production build.

**What is the expected behavior?**

CSS should be inject like with webpack@2

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Using Chrome@59 nodejs@8.1 webpack@3.1.0 Ubuntu 17.04

",https://github.com/webpack/webpack/issues/5259
3,"TITLE: The code seems right to me but the test fails BODY: The code seems fine to me but the test fails. 
#### Challenge Name
<!-- Insert link to challenge below -->
http://beta.freecodecamp.com/en/challenges/sass/store-data-with-sass-variables

#### Browser Information
Chrome, Windows 10


#### Screenshot
<!-- Add a screenshot of your issue -->
![image](https://user-images.githubusercontent.com/13496178/27003924-a17ef4ac-4e2a-11e7-990e-8287a8fd42b2.png)


Is it Test Suite related? 
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15294
1,"TITLE: BUG: Uncaught (in promise) Error: Loading chunk 0 failed. BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

*Bug*

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

I'm exporting using the `amd` `libraryTarget`. The sources use dynamic imports and my `webpack.config.js` has multiple entries. 

Loading the `output` entry file works fine, but the file itself loads the `fileA.js` file, resulting in this error: `Uncaught (in promise) Error: Loading chunk 0 failed.`

**If the current behavior is a bug, please provide the steps to reproduce.**

Here is a repo I created which shows the problem: https://github.com/johannes-z/webpack-test

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

The url of the `script.src` is correct (I double checked, opening the file in my browser and it was found).

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

node: v7.7.0
webpack: v3.1.0",https://github.com/webpack/webpack/issues/5264
5,"TITLE: Module API require with dynamic load module causes variable  not defined BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

bug?
Is the module context error?
In the code, why throw error 'Uncaught ReferenceError'.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

__index.js__
```javascript
import data from './data';
import dynamic from './dynamic';

const _dynamic = {
  dynamic: 'dynamic',
};

console.log('data', data);
console.log('dynamic', dynamic);

console.log('require', require('./dynamic.js').default);
console.log('require _dynamic', require(`./${_dynamic.dynamic}.js`).default);
console.log('require dynamic', require(`./${data.dynamic}.js`).default); // throw Error Uncaught ReferenceError: data is not defined
```

__data.js__
```javascript
export default {
  dynamic: 'dynamic',
};

```

__dynamic.js__
```javascript
export default {
  key: 'value',
};

```

__Chrome console__
<img width=""485"" alt=""2017-07-12 5 41 59"" src=""https://user-images.githubusercontent.com/5010606/28112208-b974e59e-672a-11e7-9db2-ce3f5884320b.png"">



<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->



**If use the babel module, it will not report the error.**

Chrome 59
Node.js 6.10.1
webpack 2.6.1
",https://github.com/webpack/webpack/issues/5271
2,"TITLE: Use ModuleConcatenationPlugin generates code that raises exceptions BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
This issue is related to #5266 and describes a build configuration where the use of the ModuleConcatenationPlugin generates code that no longer executes successfully.
I've boiled down a production environment to a (hopefully) manageable repro case.

**If the current behavior is a bug, please provide the steps to reproduce.**
1) extract the attached repro case
2) run npm i
3) run npm run build
4) open index.html in browser
5) The browser should now show an exception `Uncaught ReferenceError: tinymce is not define`
6) Comment out the `new webpack.optimize.ModuleConcatenationPlugin()` in `webpack.util.js`
7) run npm run build
8) refresh index.html in browser
9) The browser should now show the tinymce browser

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->
[webpack.zip](https://github.com/webpack/webpack/files/1147801/webpack.zip)

**What is the expected behavior?**
ModuleConcatenationPlugin not to cause any alterations of the code that make it fail

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
node: 8.1.4
npm: 4.6.1
os: windows 7

",https://github.com/webpack/webpack/issues/5288
5,"TITLE: webpack --version reports 2.4.1 BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

- Report a bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

- Run `webpack --version`
- Prints `2.4.1`
- Run `webpack`
- Prints `Version: webpack 3.2.0`

**If the current behavior is a bug, please provide the steps to reproduce.**

(above)

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

- Print the actual version

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5291
3,"TITLE: On Android not working BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->


#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: 
* Operating System: 
* Mobile, Desktop, or Tablet: 

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js



```
#### Screenshot
<!-- Add a screenshot of your issue -->


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15392
5,"TITLE: Wrong 'externals' processing BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
webpack@3.2.0 doesn't import externals correctly.

**If the current behavior is a bug, please provide the steps to reproduce.**
Just build project from gist https://gist.github.com/MykhailoMatiiasevych/0561feca555398fcd2fc9279faae518e

dependency1 - works as expected,
dependency2 - imported as `window[undefined]`
dependency3 - cause `Invalid configuration object.` error

changing `libraryTarget` doesn't solve the issue

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

dependancy2 should be imported as windows['library2']['module']
dependency3 should be imported somehow without errors 

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Node.js: v8.1.4
npm: v5.0.3
webpack: 3.2.0
macOS Sierra",https://github.com/webpack/webpack/issues/5292
3,"TITLE: add missingNodeModulesPlugin support BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**I'm requesting a feature**

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**Current behaviour:**

Right now, if we want to add a package when development, I have to terminate the build and install the package and then I will be able to use the package.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**Motivation**

- Development becomes easy.
- Very less time to worry on these things.
- This can be a plugin which the user can plug if he wants.

**Relevant Links**

I was trying this out with one of my employers. Here is a [explanation](https://gist.github.com/reznord/c20bfa59bd7aaa286fd5838b423a4aef) on how this can be done. 

There might be a problem with this approach - it may do the build twice when the user make some changes in the code after he installs a plugin.
",https://github.com/webpack/webpack/issues/5295
1,"TITLE: ModuleConcatenationPlugin: Unexpected token BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?** bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

When I include the `ModuleConcatenationPlugin` I get following error:

```sh
ERROR in chunk main [initial]
[name].[chunkhash].js
Unexpected token (61:45)
```

Without the plugin everything works fine.

**If the current behavior is a bug, please provide the steps to reproduce.**

I created a [Gist](https://gist.github.com/screendriver/b4feadaf456ad0a3a9be38015e638cdd) that shows my `webpack.config.js`

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

It should build without errors.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node 8.1.4
webpack 3.3.0
macOS sierra",https://github.com/webpack/webpack/issues/5304
4,"TITLE: Provide clear output about when a build finishes BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

I'm proposing a feature/enhancement.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

When running webpack with `--watch` for a while, your console is likely to fill with many almost identical blocks of build output with only the chunk hashes being different.
 
**If the current behavior is a bug, please provide the steps to reproduce.**

--
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

After a build has finished, in addition to the build duration, print the current time and the time when the build started to make it easier to tell, if what you're seeing is a new build or still an old one.

**If this is a feature request, what is motivation or use case for changing the behavior?**

 The almost identical blocks of output make it hard to tell, if a build you just triggered with a file change has already finished.

On projects with long build times (even for incremental builds), I often find myself saving a file in my editor, switching to the terminal where webpack is watching the files and hitting Enter a few times so I can clearly see when the next output block is printed to the console.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

- webpack version: 2.5.1
- all platforms and node versions

I'd be happy to work on this myself and to hear any alternative ideas.",https://github.com/webpack/webpack/issues/5305
2,"TITLE: Webpack no longer supports define correctly BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug
<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Webpack no longer appears to support define correctly. 

**If the current behavior is a bug, please provide the steps to reproduce.**
We upgraded from webpack 2.2.1 to 2.6.1. In 2.2.1 everything works, but in 2.6.1 it doesn't.

1. Include the `compressjs` module, which uses define like so (see https://github.com/cscott/compressjs/blob/master/main.js)
```
if (typeof define !== 'function') { var define = require('amdefine')(module); }
define([...], function(...) {
    'use strict';
    return freeze({
        version: ""0.0.1"",
       ...
    });
});)
```
2. At runtime, you will get an error saying 
```
Uncaught Error: define cannot be used indirect
    at e.exports (vendor.ac2023d….js:sourcemap:1)
    at Object.<anonymous> (vendor.ac2023d….js:sourcemap:1)
    at Object.<anonymous> (vendor.ac2023d….js:sourcemap:1)
    at n (commons.1a4acdd….js:sourcemap:1)
    at Object.<anonymous> (logos.42ff4f3….js:sourcemap:1)
    at Object.<anonymous> (logos.42ff4f3….js:sourcemap:1)
    at n (commons.1a4acdd….js:sourcemap:1)
    at Object.<anonymous> (logos.42ff4f3….js:sourcemap:1)
    at n (commons.1a4acdd….js:sourcemap:1)
    at Object.<anonymous> (logos.42ff4f3….js:sourcemap:1)
```

**Attempted workarounds**
I have tried excluding the module from webpack via noParse (though the docs say not to exclude anything that uses define or require): 
```
module: {
  noParse: /(compressjs)/
```
At runtime, this results in a different error:
```
main.js:1 Uncaught ReferenceError: require is not defined
    at Object.module.exports (main.js:1)
    at __webpack_require__ (bootstrap 596e1b2…:54)
    at Object.<anonymous> (expander.tsx:61)
    at Object.<anonymous> (util.js:57)
    at __webpack_require__ (bootstrap 596e1b2…:54)
    at Object.<anonymous> (errors.ts:21)
    at __webpack_require__ (bootstrap 596e1b2…:54)
    at Object.<anonymous> (shortcut-icon.jsx:16)
    at __webpack_require__ (bootstrap 596e1b2…:54)
    at Object.__webpack_exports__.LogoTabIcon (auth-policy.tenant.client.js:9)
```

I have tried additionally adding an alias: 
```
resolve: {
  alias: {
    compressjs: path.join(projectRoot, 'node_modules/compressjs/main.js')
```

**Offending webpack code**
It appears the webpack code in [Parser.js](https://github.com/webpack/webpack/blob/v2.6.1/lib/Parser.js#L255) no longer returns a value for the define expression. In 2.2.1, parser returned a BasicEvaluatedExpression, but as of 2.6.1 it returns nothing, because the ""define"" definition has been pushed onto the scope for some reason. `this.scope.definitions` contains 'define' now, whereas it was previously empty. 
```
this.plugin(""evaluate Identifier"", function(expr) {
	const name = this.scope.renames[""$"" + expr.name] || expr.name;
	if(this.scope.definitions.indexOf(expr.name) === -1) { // <-- HERE
		const result = this.applyPluginsBailResult1(""evaluate Identifier "" + name, expr);
		if(result) return result;
		return new BasicEvaluatedExpression().setIdentifier(name).setRange(expr.range);
	} else {
		return this.applyPluginsBailResult1(""evaluate defined Identifier "" + name, expr);
	}
});
```
I'm guessing this is due to the prewalking that was introduced starting in 2.4.0 [here](https://github.com/webpack/webpack/commit/3afe67d6fbe3a33a77b9f5ee0b02172c43f23828).

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
Modules such as this runs without errors.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Testing using the latest Chrome version.",https://github.com/webpack/webpack/issues/5316
1,"TITLE: Learner can erroneously change myArray by hand BODY: Challenge [Modify Array Data With Indexes](https://www.freecodecamp.com/challenges/modify-array-data-with-indexes) has an issue. This code passes the challenge when it shouldn't:

```javascript
var myArray = [3,2,3]; // erroneously changed by the learner from [1,2,3]
myArray[0] = 3;
```",https://github.com/freeCodeCamp/freeCodeCamp/issues/15406
3,"TITLE: Unclear error message in case of Exclamation mark in project path breaking the build on Windows BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
On Windows build if the path of the project folder contains ""!"", webpack will throw error:
```
    ERROR in Entry module not found: Error: Can't resolve 'C:\' in 'C:\!ParentFolder\MyProjectFolder'
```
This bug was already reported #4906 with steps to reproduce. And it was closed, I'm opening this one to attract attention that this issue creates hard time for new users of webpack who do not know about this limitation, since webpack does not give any clue to the user about it. It took an hour of my time to figure out why it's not working.

**If the current behavior is a bug, please provide the steps to reproduce.**
see #4906
or:
1) Take any project with webpack (e.g. https://github.com/pmunin/handsontable)
2) Put (or clone) it in any folder, with the name starting from ""!"" (exclamation mark)
3) run webpack build (e.g. ""npm run build:umd"" for repo provided at step 1)

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
Webpack should at least provide a proper error message saying that user cannot have Exclamation marks in the path.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
OS: Windows 10 x64
node v6.3.1
npm v3.10.3
webpack v2.6.1",https://github.com/webpack/webpack/issues/5320
5,"TITLE: Plugins always emitted in watch mode BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
When I'm on watch mode, plugins like `html-webpack-plugin` and `extract-text-webpack-plugin` always emitted, even when I'm changing something in my js file.
It started when I upgraded to webpack@3.3.0.
When I go back to webpack@2.3.3 it doesn't happen.

a minimal reproduceable example:

config:
```
const path = require('path');
const HtmlWebpackPlugin = require(""html-webpack-plugin"");

module.exports = {
    entry: './app.js',
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist')
    },
    module: {
        rules: [
            {
                test: /\.css$/,
                use: [
                    'style-loader',
                    'css-loader'
                ]
            }
        ]
    },
    plugins: [
        new HtmlWebpackPlugin({
            template: 'index.html',
        }),
    ]
};
```

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
If I change a js file I expected only the js bundle to be emitted when I'm on watch mode

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
node: 6.11.1
wepack: 3.3.0
windows 10

",https://github.com/webpack/webpack/issues/5321
4,"TITLE: Webpack should avoid including file content which contains no explicitly imported modules BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Feature (I think?)

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Let's say I have a component library, such as Office UI Fabric React. I export many components, such as the Button, Dropdown, and Toggle.

As an application consuming the library, i use webpack to import only the Toggle:

```tsx
import { Toggle } from 'office-ui-fabric-react';
```

The library package has an index top level file that exports all of the components. (all es6 modules). The package.json and has a `module` entry pointing to the index.

I expect that only the code from Toggle.tsx (and its dependencies which it imports) are included in the pre-bundle output. It is the *only* imported module in my app.

Webpack ends up including the entire library in the pre-minified bundle, leaving the ""tree shaking"" up to Uglify. We can do better though.

This means that if Button.tsx has any global code, it will get included and there is no way Uglify would remove it... but I never explicitly imported button.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

https://github.com/dzearing/test-webpack-library-shaking

**What is the expected behavior?**

Webpack should avoid including file content where the file contains no explicitly imported modules.

**If this is a feature request, what is motivation or use case for changing the behavior?**

This specific issue prevents tree shaking from working as expected. Effectively, any global code is guaranteed to be included with the bundle, even when you don't import it, simply because the root export has a graph edge to it. This happens all the time. It should only be included if there is an explicit import to that file.

If this change has too many potential side effects (maybe there are?) I'm perfectly happy with this being a config opt-in option, but i would opt in on every project.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

webpack 3.0.0
not dependent on node version or os
",https://github.com/webpack/webpack/issues/5324
3,"TITLE: Error in webpack-sources BODY: **Do you want to request a *feature* or report a *bug*?**
bug

**What is the current behavior?**
TypeError: item.source is not a function
```
TypeError: item.source is not a function
    at /Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:23:50
    at Array.map (native)
    at ConcatSource.source (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:22:24)
    at /Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:23:50
    at Array.map (native)
    at ConcatSource.source (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:22:24)
    at /Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:23:50
    at Array.map (native)
    at ConcatSource.source (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/ConcatSource.js:22:24)
    at CachedSource.source (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/webpack-sources/lib/CachedSource.js:28:44)
    at Compiler.writeOut (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/lib/Compiler.js:346:27)
    at require.forEach (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/lib/Compiler.js:336:21)
    at /Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/async/dist/async.js:3083:16
    at eachOfArrayLike (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/async/dist/async.js:1003:9)
    at eachOf (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/async/dist/async.js:1051:5)
    at Object.eachLimit (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/node_modules/async/dist/async.js:3145:5)
    at Compiler.emitFiles (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack/lib/Compiler.js:325:21)
    at Immediate.<anonymous> (/Users/u_021ly/Desktop/projects/arui-feather/node_modules/webpack-dev-middleware/node_modules/memory-fs/lib/MemoryFileSystem.js:288:4
```
This is Travis build https://travis-ci.org/alfa-laboratory/arui-feather/jobs/255237762#L718
**If the current behavior is a bug, please provide the steps to reproduce.**
```
git clone https://github.com/alfa-laboratory/arui-feather.git
git checkout feat/add-md-lint
npm i
npm run gemini-ci
```

**What is the expected behavior?**
Runs without errors.
**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
npm -v 5.3.0
node -v 6.10.1
webpack 3.3.0",https://github.com/webpack/webpack/issues/5326
4,"TITLE: Import error based on paths in resolve.modules BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
*Bug*

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Errors out on `import()` from one of the paths resolve.modules

**If the current behavior is a bug, please provide the steps to reproduce.**
config: https://gist.github.com/frankleng/9b0f5303c7ecc3479a17e9f77ca78cfe
very likely to be related to #5384 

**What is the expected behavior?**
Should resolve files by searching through the `resolve` paths without having to specify a relative path.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Node - 7.8.0, Webpack 3.4.0, MacOS

*Confirmed - this only happens in webpack 3.3 or above. downgraded to 3.2 for the time being to not break our builds.*
",https://github.com/webpack/webpack/issues/5385
4,"TITLE: Filtering assets within the stats, like modules BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
feature

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Within the stats the assets can not be filtered, only enabled or disabled.

**If the current behavior is a bug, please provide the steps to reproduce.**
not a bug

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproducible repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
Being able to filter assets from stats, like modules and chunks.

**If this is a feature request, what is motivation or use case for changing the behavior?**
 Copy-Webpack-Plugin makes use of assets, which can result in heavy output. Filtering the stats.assets would enable users or the plugin-maintainer to disable verbosity. Maybe stats.exclude can be used, it already allows string[], RegExp[] and function[], while function[] seems to not be documented. I am referring to [Is it possible to tell copy-webpack-plugin to be less verbose ?](https://github.com/kevlened/copy-webpack-plugin/issues/113)

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
webpack 3.3.0",https://github.com/webpack/webpack/issues/5333
5,"TITLE: Webpack 3 compile more than one time and webpack 2.7.0 and 2.6.1 no BODY: Same environment and webpacak.config.js as 
```
const webpack = require('webpack');
const path=require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ExtractTextPlugin = require('extract-text-webpack-plugin');
const helpers = require('./helpers');
const CleanWebpackPlugin = require('clean-webpack-plugin');

module.exports = {
  entry: {
    'polyfills': './public/polyfills',
    'vendor': './public/vendor',
    'main': './public/main'
  },
  devtool: 'inline-source-map',
  resolve: {
    extensions: [ '.js', '.ts']
  },
  output: {
    path: path.resolve('public','./build'),
    filename: '[name].[hash].js',
    publicPath: 'build/',
    sourceMapFilename: '[name].map'
  },
  module: {
    rules: [
     {
        test: /\.ts$/,
        loaders: [
          {
            loader: 'awesome-typescript-loader',
            options: { configFileName: helpers.root('public', 'tsconfig.json') }
          } , 'angular2-template-loader','angular2-router-loader'
        ]
      },
      {
        test: /\.html$/,
        loader: 'html-loader'
      },
      {
        test: /\.(png|jpe?g|gif|svg|woff|woff2|ttf|eot|ico)$/,
        loader: 'file-loader?name=assets/[name].[hash].[ext]'
      },
      {
        test: /\.css$/,
        include: helpers.root('public', 'app'),
        loader: 'raw-loader'
      },
      {
        test: /\.ejs$/,
        use: 'raw-loader'
      }
    ]
  },
  plugins: [
    new webpack.optimize.CommonsChunkPlugin({
      name: ['main', 'vendor', 'polyfills']
    }),
    new HtmlWebpackPlugin({
      filename:'index.ejs',
      template: './app/views/index-origin.ejs',
      inject: true
    }),
    new webpack.ContextReplacementPlugin(
        // The (\\|\/) piece accounts for path separators in *nix and Windows
        // /angular(\\|\/)core(\\|\/)(esm(\\|\/)src|src)(\\|\/)linker/,
        /angular(\\|\/)core(\\|\/)@angular/,
        helpers.root('./public'), // location of your src
        { }
      )
  ]
};
```
Under webpack 3 get from console 
```
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 1.425 sec.
[1] Hash: a2b0085251400acf0f19
[1] Version: webpack 3.3.0
[1] Time: 132555ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.a2b0085251400acf0f19.js    13.2 kB       0  [emitted]         
[1]         1.a2b0085251400acf0f19.js    7.14 kB       1  [emitted]         
[1]    vendor.a2b0085251400acf0f19.js    8.65 MB       2  [emitted]  [big]  vendor
[1]      main.a2b0085251400acf0f19.js     136 kB       3  [emitted]         main
[1]         4.a2b0085251400acf0f19.js    7.89 kB       4  [emitted]         
[1]         5.a2b0085251400acf0f19.js    8.17 kB       5  [emitted]         
[1]         6.a2b0085251400acf0f19.js    8.64 kB       6  [emitted]         
[1]         7.a2b0085251400acf0f19.js    9.78 kB       7  [emitted]         
[1] polyfills.a2b0085251400acf0f19.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]   [10] (webpack)/buildin/global.js 509 bytes {8} [built]
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]  [230] ./public/app/chat/chat.service.ts 2.29 kB {3} [built]
[1]  [231] ./public/polyfills.ts 1.04 kB {8} [built]
[1]  [373] ./public/vendor.ts 432 bytes {2} [built]
[1]  [665] ./public/main.ts 302 bytes {3} [built]
[1]  [666] ./public/app/app.module.ts 2.24 kB {3} [built]
[1]  [667] ./public/app/coremodule/core.module.ts 1.24 kB {3} [built]
[1]  [668] ./public/app/app-routing.module.ts 1.22 kB {3} [built]
[1]  [669] ./public/app/authentication/authentication.module.ts 1.89 kB {3} [built]
[1]  [674] ./public/app/home/home.module.ts 1.27 kB {3} [built]
[1]  [678] ./public/app/articles/articles.module.ts 1.89 kB {3} [built]
[1]  [684] ./public/app/route-study/route-study.module.ts 1.98 kB {3} [built]
[1]  [686] ./public/app/chat/chat.module.ts 1.47 kB {3} [built]
[1]  [689] ./public/app/app.component.ts 1.87 kB {3} [built]
[1]     + 695 hidden modules
[1] Child html-webpack-plugin for ""index.ejs"":
[1]        [0] ./node_modules/html-webpack-plugin/lib/loader.js!./app/views/index-origin.ejs 664 bytes {0} [built]
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.011 sec.
[1] Hash: 57d9c2d87d3af9ed75dd
[1] Version: webpack 3.3.0
[1] Time: 2780ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.57d9c2d87d3af9ed75dd.js    13.8 kB       0  [emitted]         
[1]         1.57d9c2d87d3af9ed75dd.js    7.55 kB       1  [emitted]         
[1]    vendor.57d9c2d87d3af9ed75dd.js     8.7 MB       2  [emitted]  [big]  vendor
[1]      main.57d9c2d87d3af9ed75dd.js     141 kB       3  [emitted]         main
[1]         4.57d9c2d87d3af9ed75dd.js    8.32 kB       4  [emitted]         
[1]         5.57d9c2d87d3af9ed75dd.js    8.64 kB       5  [emitted]         
[1]         6.57d9c2d87d3af9ed75dd.js    9.11 kB       6  [emitted]         
[1]         7.57d9c2d87d3af9ed75dd.js    10.2 kB       7  [emitted]         
[1] polyfills.57d9c2d87d3af9ed75dd.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]     + 709 hidden modules
[1] Child html-webpack-plugin for ""index.ejs"":
[1]        1 module
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.007 sec.
[1] Hash: a2b0085251400acf0f19
[1] Version: webpack 3.3.0
[1] Time: 3723ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.a2b0085251400acf0f19.js    14.4 kB       0  [emitted]         
[1]         1.a2b0085251400acf0f19.js    8.02 kB       1  [emitted]         
[1]    vendor.a2b0085251400acf0f19.js    8.76 MB       2  [emitted]  [big]  vendor
[1]      main.a2b0085251400acf0f19.js     147 kB       3  [emitted]         main
[1]         4.a2b0085251400acf0f19.js     8.8 kB       4  [emitted]         
[1]         5.a2b0085251400acf0f19.js    9.15 kB       5  [emitted]         
[1]         6.a2b0085251400acf0f19.js    9.61 kB       6  [emitted]         
[1]         7.a2b0085251400acf0f19.js    10.7 kB       7  [emitted]         
[1] polyfills.a2b0085251400acf0f19.js     761 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]  [172] ./public lazy 160 bytes {2} [built]
[1]     + 709 hidden modules
[1] Child html-webpack-plugin for ""index.ejs"":
[1]        1 module

```
built two set bundles inside build folder 
```
0.57d9c2d87d3af9ed75dd.js
0.a2b0085251400acf0f19.js
1.57d9c2d87d3af9ed75dd.js
1.a2b0085251400acf0f19.js
4.57d9c2d87d3af9ed75dd.js
4.a2b0085251400acf0f19.js
5.57d9c2d87d3af9ed75dd.js
5.a2b0085251400acf0f19.js
6.57d9c2d87d3af9ed75dd.js
6.a2b0085251400acf0f19.js
7.57d9c2d87d3af9ed75dd.js
7.a2b0085251400acf0f19.js
index.ejs
main.57d9c2d87d3af9ed75dd.js
main.a2b0085251400acf0f19.js
polyfills.57d9c2d87d3af9ed75dd.js
polyfills.a2b0085251400acf0f19.js
vendor.57d9c2d87d3af9ed75dd.js
vendor.a2b0085251400acf0f19.js
```
webpack 3 compile under hash a2b0085251400acf0f19 two times
hash 57d9c2d87d3af9ed75dd do one time

Under webpack 2.7.0 it work fine
```
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 1.157 sec.
[1] Hash: 1637c8aff420b9256a54
[1] Version: webpack 2.7.0
[1] Time: 44314ms
[1]                             Asset       Size  Chunks                    Chunk Names
[1]         0.1637c8aff420b9256a54.js    13.1 kB       0  [emitted]         
[1]         1.1637c8aff420b9256a54.js    7.05 kB       1  [emitted]         
[1]    vendor.1637c8aff420b9256a54.js    8.64 MB       2  [emitted]  [big]  vendor
[1]      main.1637c8aff420b9256a54.js     135 kB       3  [emitted]         main
[1]         4.1637c8aff420b9256a54.js     7.8 kB       4  [emitted]         
[1]         5.1637c8aff420b9256a54.js    8.09 kB       5  [emitted]         
[1]         6.1637c8aff420b9256a54.js    8.56 kB       6  [emitted]         
[1]         7.1637c8aff420b9256a54.js    9.69 kB       7  [emitted]         
[1] polyfills.1637c8aff420b9256a54.js     755 kB       8  [emitted]  [big]  polyfills
[1]                         index.ejs  857 bytes          [emitted]         
[1]   [35] ./~/@angular/common/@angular/common.es5.js 131 kB {2} [built]
[1]   [43] ./~/@angular/platform-browser/@angular/platform-browser.es5.js 141 kB {2} [built]
[1]   [57] ./~/@angular/forms/@angular/forms.es5.js 204 kB {2} [built]
[1]   [74] ./~/@angular/http/@angular/http.es5.js 74.6 kB {2} [built]
[1]   [93] ./~/@angular/platform-browser-dynamic/@angular/platform-browser-dynamic.es5.js 5.88 kB {2} [built]
[1]  [131] ./~/@angular/compiler/@angular/compiler.es5.js 1.03 MB {2} [built]
[1]  [132] ./~/socket.io-client/lib/index.js 2.17 kB {2} [built]
[1]  [231] ./public/app/app.module.ts 2.24 kB {3} [built]
[1]  [232] ./~/core-js/es6/array.js 944 bytes {8} [built]
[1]  [233] ./~/core-js/es6/date.js 231 bytes {8} [built]
[1]  [234] ./~/core-js/es6/map.js 207 bytes {8} [built]
[1]  [235] ./~/core-js/es6/math.js 690 bytes {8} [built]
[1]  [264] ./public/main.ts 302 bytes {3} [built]
[1]  [265] ./public/polyfills.ts 1.04 kB {8} [built]
[1]  [266] ./public/vendor.ts 432 bytes {2} [built]
[1]     + 695 hidden modules
[1] Child html-webpack-plugin for ""index.ejs"":
[1]        [0] ./~/html-webpack-plugin/lib/loader.js!./app/views/index-origin.ejs 664 bytes {0} [built]
[1] 
[1] [at-loader] Checking started in a separate process...
[1] 
[1] [at-loader] Ok, 0.008 sec.
```
built correct in build folder 
```
0.1637c8aff420b9256a54.js
1.1637c8aff420b9256a54.js
4.1637c8aff420b9256a54.js
5.1637c8aff420b9256a54.js
6.1637c8aff420b9256a54.js
7.1637c8aff420b9256a54.js
index.ejs
main.1637c8aff420b9256a54.js
polyfills.1637c8aff420b9256a54.js
vendor.1637c8aff420b9256a54.js
```
Is it a bug or webpack.config.js has some error?",https://github.com/webpack/webpack/issues/5334
1,"TITLE: bug: ExtendedAPIPlugin incorrectly causes 'cannot use [chunkhash] error' BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug.

**What is the current behavior?**
Usage of `[chunkhash]` for both `output.filename` & `output.chunkFilename` along with `ExtendedAPIPlugin` causes incorrect compilation error.

**If the current behavior is a bug, please provide the steps to reproduce.**

**Demo**: https://github.com/hulkish/webpack-ExtendedAPIPlugin-bug

1. In your webpack config, set your output to:
```js
output: {
  filename: '[name].[chunkhash].js',
  chunkFilename: '[id].[chunkhash].js'
}
```
2. Add `ExtendedAPIPlugin`:
```js
plugins: [new ExtendedAPIPlugin()]
```
3. Run the build & get this error:
```bash
ERROR in chunk main [entry]
[name].[chunkhash:5].js
Cannot use [chunkhash] for chunk in '[name].[chunkhash].js' (use [hash] instead)
```

**What is the expected behavior?**
Should not cause this error.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
`node@8.2.0`, `yarn@0.27.5`, `webpack@3.3.0`",https://github.com/webpack/webpack/issues/5337
1,"TITLE: External replacing global variable in browser  BODY: I'm using the `externals` option to specify the `xmlhttprequest` module as an external. This worked fine in version `2.2.1`. I specify the external as follows:

```json
  externals: {
    ""xmlhttprequest"": ""XMLHttpRequest""
  }
```

In the `.js` file, I have the following code:

```js
if (typeof window === 'undefined') {
  // Seems like we are using Node.js
  var XMLHttpRequest = require('xmlhttprequest').XMLHttpRequest;
}
```

which worked perfectly fine.

**What is the current behavior?**
I decided to switch to the _latest_ version, and now my project gives an error when used on the browser: `XMLHttpRequest is not a constructor`. So for some reason, it seems to override the global `XMLHttpRequest` variable.

Which is weird, because if I call `new XMLHttpRequest()` in the console, it works fine.

**If the current behavior is a bug, please provide the steps to reproduce.**
Don't really have an easy way for this.

**What is the expected behavior?**
When using Node.js, the global variable `XMLHttpRequest` should be replaced by the external module. In the browser, the global variable should remain _unaffected_.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

```json
webpack: 3.0.0
browser: Chrome
OS: Windows 10
Node.js: 8.1.3
```
",https://github.com/webpack/webpack/issues/5339
1,"TITLE: WebPack fails to bundle libraryTarget: 'amd' BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug

**What is the current behavior?**

with `libraryTarget: 'amd'` webpack fails with:

```
crypto.js:70
  this._handle.update(data, encoding);
               ^

TypeError: Not a string or buffer
    at TypeError (native)
    at Hash.update (crypto.js:70:16)
    at MainTemplate.<anonymous> (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/AmdMainTemplatePlugin.js:51:9)
    at MainTemplate.applyPlugins (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:61:14)
    at MainTemplate.updateHash (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/MainTemplate.js:219:8)
    at Compilation.createHash (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:1168:21)
    at sealPart2 (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:619:9)
    at Compilation.applyPluginsAsyncSeries (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:177:46)
    at Compilation.seal (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:579:8)
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compiler.js:514:17
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:271:11
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:481:11
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:452:13
    at nextTickCallbackWith0Args (node.js:489:9)
    at process._tickCallback (node.js:418:13)
```

**If the current behavior is a bug, please provide the steps to reproduce.**

```
git clone git@github.com:vladikoff/bug-webpack-fr783.git
cd bug-webpack-fr783
```

```
➜  bug-webpack-FR783 git:(master) ✗ node_modules/.bin/webpack --config webpack.config.amd.js
crypto.js:70
  this._handle.update(data, encoding);
               ^

TypeError: Not a string or buffer
    at TypeError (native)
    at Hash.update (crypto.js:70:16)
    at MainTemplate.<anonymous> (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/AmdMainTemplatePlugin.js:51:9)
    at MainTemplate.applyPlugins (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:61:14)
    at MainTemplate.updateHash (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/MainTemplate.js:219:8)
    at Compilation.createHash (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:1169:21)
    at sealPart2 (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:620:9)
    at Compilation.applyPluginsAsyncSeries (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:177:46)
    at Compilation.seal (/Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:580:8)
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compiler.js:510:16
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/node_modules/tapable/lib/Tapable.js:271:11
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:482:11
    at /Users/vladikoff/dev/bug-webpack-FR783/node_modules/webpack/lib/Compilation.js:453:13
    at nextTickCallbackWith0Args (node.js:489:9)
    at process._tickCallback (node.js:418:13)
```

**What is the expected behavior?**

```
➜  bug-webpack-FR783 git:(master) ✗ node_modules/.bin/webpack --config webpack.config.umd.js
Hash: 485bff494b2eb9fe637f
Version: webpack 3.0.0-rc.2
Time: 1111ms
    Asset     Size  Chunks                    Chunk Names
bundle.js  1.68 MB       0  [emitted]  [big]  thing
   [4] (webpack)/buildin/global.js 509 bytes {0} [built]
  [61] (webpack)/buildin/module.js 517 bytes {0} [built]
  [85] ./src/index.js 56 bytes {0} [built]
    + 151 hidden modules

```


**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

```
➜  bug-webpack-FR783 git:(master) ✗ node --version
v4.8.3
➜  bug-webpack-FR783 git:(master) ✗ npm --version
2.15.11
```

Does the same in Node 6 and 8
",https://github.com/webpack/webpack/issues/5342
3,"TITLE: help-output test fails on OSX BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

`$(npm bin)/mocha --grep help-output` fails

```
AssertionError: expected Array [
  'webpack 3.3.0',
  'Usage: https://webpack.js.org/api/cli/',
  'Usage without config file: webpack <entry> [<entry>] <output>',
  'Usage with config file: webpack',
  '',
  'Config options:',
  '  --config       Path to the config file',
  '                         [string] [default: webpack.config.js or webpackfile.js]',
  '  --config-name  Name of the config to use                              [string]',
  '  --env          Environment passed to the config, when it is a function',
  '',
  'Basic options:',
  '  --context    The root directory for resolving entry point and stats',
  '                                       [string] [default: The current directory]',
  '  --entry      The entry point                                          [string]',
  '  --watch, -w  Watch the filesystem for changes                        [boolean]',
  '  --debug      Switch loaders to debug mode                            [boolean]',
  '  --devtool    Enable devtool for better debugging experience (Example:',
  '               --devtool eval-cheap-module-source-map)                  [string]',
  '  -d           shortcut for --debug --devtool eval-cheap-module-source-map',
  '               --output-pathinfo                                       [boolean]',
  '  -p           shortcut for --optimize-minimize --define',
  '               process.env.NODE_ENV=""production""                       [boolean]',
  '  --progress   Print compilation progress in percentage                [boolean]',
  '',
  'Module options:',
  '  --module-bind       Bind an extension to a loader                     [string]',
  '  --module-bind-post                                                    [string]',
  '  --module-bind-pre                                                     [string]',
  '',
  'Output options:',
  '  --output-path                 The output path for compilation assets',
  '                                       [string] [default: The current directory]',
  '  --output-filename             The output filename of the bundle',
  '                                                   [string] [default: [name].js]',
  '  --output-chunk-filename       The output filename for additional chunks',
  '       [string] [default: filename with [id] instead of [name] or [id] prefixed]',
  '  --output-source-map-filename  The output filename for the SourceMap   [string]',
  '  --output-public-path          The public path for the assets          [string]',
  '  --output-jsonp-function       The name of the jsonp function used for chunk',
  '                                loading                                 [string]',
  '  --output-pathinfo             Include a comment with the request for every',
  '                                dependency (require, import, etc.)     [boolean]',
  '  --output-library              Expose the exports of the entry point as library',
  '                                                                        [string]',
  '  --output-library-target       The type for exposing the exports of the entry',
  '                                point as library                        [string]',
  '',
  'Advanced options:',
  '  --records-input-path       Path to the records file (reading)         [string]',
  '  --records-output-path      Path to the records file (writing)         [string]',
  '  --records-path             Path to the records file                   [string]',
  '  --define                   Define any free var in the bundle          [string]',
  '  --target                   The targeted execution environment         [string]',
  '  --cache                    Enable in memory caching',
  '                      [boolean] [default: It\'s enabled by default when watching]',
  '  --watch-stdin, --stdin     Exit the process when stdin is closed     [boolean]',
  '  --watch-aggregate-timeout  Timeout for gathering changes while watching',
  '  --watch-poll               The polling interval for watching (also enable',
  '                             polling)                                  [boolean]',
  '  --hot                      Enables Hot Module Replacement            [boolean]',
  '  --prefetch                 Prefetch this request (Example: --prefetch',
  '                             ./file.js)                                 [string]',
  '  --provide                  Provide these modules as free vars in all modules',
  '                             (Example: --provide jQuery=jquery)         [string]',
  '  --labeled-modules          Enables labeled modules                   [boolean]',
  '  --plugin                   Load this plugin                           [string]',
  '  --bail                     Abort the compilation on first error      [boolean]',
  '  --profile                  Profile the compilation and include information in',
  '                             stats                                     [boolean]',
  '',
  'Resolving options:',
  '  --resolve-alias         Setup a module alias for resolving (Example:',
  '                          jquery-plugin=jquery.plugin)                  [string]',
  '  --resolve-extensions    Setup extensions that should be used to resolve',
  '                          modules (Example: --resolve-extensions .es6 .js)',
  '                                                                         [array]',
  '  --resolve-loader-alias  Setup a loader alias for resolving            [string]',
  '',
  'Optimizing options:',
  '  --optimize-max-chunks      Try to keep the chunk count below a limit',
  '  --optimize-min-chunk-size  Try to keep the chunk size above a limit',
  '  --optimize-minimize        Minimize javascript and switches loaders to',
  '                             minimizing                                [boolean]',
  '',
  'Stats options:',
  '  --color, --colors               Enables/Disables colors on the console',
  '                                           [boolean] [default: (supports-color)]',
  '  --sort-modules-by               Sorts the modules list by property in module',
  '                                                                        [string]',
  '  --sort-chunks-by                Sorts the chunks list by property in chunk',
  '                                                                        [string]',
  '  --sort-assets-by                Sorts the assets list by property in asset',
  '                                                                        [string]',
  '  --hide-modules                  Hides info about modules             [boolean]',
  '  --display-exclude               Exclude modules in the output         [string]',
  '  --display-modules               Display even excluded modules in the output',
  '                                                                       [boolean]',
  '  --display-max-modules           Sets the maximum number of visible modules in',
  '                                  output                                [number]',
  '  --display-chunks                Display chunks in the output         [boolean]',
  '  --display-entrypoints           Display entry points in the output   [boolean]',
  '  --display-origins               Display origins of chunks in the output',
  '                                                                       [boolean]',
  '  --display-cached                Display also cached modules in the output',
  '                                                                       [boolean]',
  '  --display-cached-assets         Display also cached assets in the output',
  '                                                                       [boolean]',
  '  --display-reasons               Display reasons about module inclusion in the',
  '                                  output                               [boolean]',
  '  --display-depth                 Display distance from entry point for each',
  '                                  module                               [boolean]',
  '  --display-used-exports          Display information about used exports in',
  '                                  modules (Tree Shaking)               [boolean]',
  '  --display-provided-exports      Display information about exports provided',
  '                                  from modules                         [boolean]',
  '  --display-optimization-bailout  Display information about why optimization',
  '                                  bailed out for modules               [boolean]',
  '  --display-error-details         Display details about errors         [boolean]',
  '  --display                       Select display preset (verbose, detailed,',
  '                                  normal, minimal, errors-only, none)   [string]',
  '  --verbose               '
] to contain 'Options:'
```

It was introduced in #5331 . The tests will pass if this entry https://github.com/webpack/webpack/pull/5331/files#diff-86ffe53e663ae3f143b8e2219c8ded35R23 is removed. I am guessing that since it only happens on my machine (the CI tests seems to pass) it is somehow due to some OSX/Node configuration (is there a limit to the length of stdout?).

**If the current behavior is a bug, please provide the steps to reproduce.**

`$(npm bin)/mocha --grep help-output`

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

Test should pass

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

npm: 5.2.0
node: 6.9.1
OSX: 10.12.5",https://github.com/webpack/webpack/issues/5345
1,"TITLE: Sum All Odd Fibonacci Numbers BODY: #### Challenge Name
https://www.freecodecamp.com/challenges/sum-all-odd-fibonacci-numbers


#### Issue Description
Using the parameter ""num"" being passed into the function in a for loop causes a crash. Even when assigning the passed parameter to a separate variable and using it in the for loop crashed the program. Example, var newNum = num; for(i = 0; i < newNum; i++) -> crash as well as for(i = 0; i < num; i++) -> crash.


#### Browser Information

* Browser Name, Version:  Chrome, latest version
* Operating System: Windows 7
* Mobile, Desktop, or Tablet:  Desktop

#### Your Code
function sumFibs(num) {
 
  var fibArr = [];
  var newNum = num;

  for(i = 0; i < newNum; i++)
    {     
      fibArr.push(1);
    }
  return fibArr;
}
sumFibs(4);

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15476
2,"TITLE: Warn user about duplicate plugins BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Feature

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Seems a lot of issues are created from users unaware that some CLI flags are merely shortcuts to create plugins. Having duplicate plugins causes unwanted behaviours. Example issues are #4192, #4713, #5233. Surely there are more.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

Add something like `UglifyJsPlugin` and run webpack with `--optimize-minimize`

**What is the expected behavior?**

Give presedence to CLI (#5359)

**If this is a feature request, what is motivation or use case for changing the behavior?**

Beginners to Webpack might be confused when to use flags like `--optimise-minimize` or when to use plugins `new UglifyJsPlugin`. We could add console warnings when multiple instances of the same plugin type exists or similar. Add a short link to documentation page that explains how CLI flags are short-cuts and that CLI flags will take presedence. The React library is particularly good at providing these warnings.

An initial list of some things to consider:
* Are there any plugins that could have multiple instances?
* Should check blindly for duplicates, or should there be a blacklist (like multiple `UglifyJsPlugin` instances are unwanted, but that might be the case for other plugins)
* What to do about flags with multiple features (e.g. `-p`) - should warnings communicate that `-p` is more than just minification?

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5363
3,"TITLE: UMD build does not export BODY: **Do you want to request a *feature* or report a *bug*?**
Might be a bug

**What is the current behavior?**
UMD build does not export a global variable under *window*

I'm trying to create a UMD build that can be used like so: 
```html
<script src=""./dist/framework.js"" type=""text/javascript""></script>
<script>
    console.log(window.ComponentOne)
</script>
```
My entry file looks like this:
```jsx
import ComponentOne from './component-one'

if (typeof window !== 'undefined') {
	window.ComponentOne = ComponentOne
}

export {
    ComponentOne
}
```

webpack.config.js
```
var path = require('path');

module.exports = {
	entry: './framework/index.js',
	output: {
		path: path.resolve(__dirname, 'dist'),
		filename: 'framework.js',
		library: 'Framework',
		libraryTarget: 'umd'
	},
	module: {
		rules: [
			{
				test: /\.js$/,
				include: path.resolve(__dirname, 'framework'),
				exclude: /(node_modules|bower_components|build)/,
				use: {
					loader: 'babel-loader',
					options: {
						presets: ['env']
					}
				}
			}
		]
	},
	externals: {
		'react': 'umd react',
    	        'react-dom' : 'umd react-dom'
	}
};
```
**What is the expected behavior?**
window.Component should contain ComponentOne

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Operating System: Ubuntu 16.04 LTS
Node version: `6.10.3`
Webpack version: `3.3.0`
",https://github.com/webpack/webpack/issues/5365
1,"TITLE: Complex dynamic require doesn't map modules in resolve.modules BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Code containing a dynamic require
```javascript
var module = 'User';
const User = require(module);
```
When bundled results with an error:
```javascript
var module = 'User';
const User = !(function webpackMissingModule() { var e = new Error(""Cannot find module \"".\""""); e.code = 'MODULE_NOT_FOUND'; throw e; }());
```

**If the current behavior is a bug, please provide the steps to reproduce.**
<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->
Minimal reproducible repo available [here](https://github.com/mjanjic01/webpack-test).

**What is the expected behavior?**
Webpack should map modules in paths specified in `resolve.modules`.
Similar issue [here (#2672)](https://github.com/webpack/webpack/issues/2672).

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
node: v7.10.0
npm: v4.2.0
webpack 3.3.0",https://github.com/webpack/webpack/issues/5382
3,"TITLE: AggressiveSplittingPlugin and watch mode with multiple entry points. BODY: **Do you want to request a *feature* or report a *bug*?**

Bug

**What is the current behavior?**

When using AggressiveSplittingPlugin, 2 problems.  Firstly it doesn't work unless you also include ""CommonsChunkPlugin"", as this then has the bootstrap code, (webpackJsonp etc).  Also if not using ""CommonsChunkPlugin"" duplicates are created.  eg. If say I used PouchDB twice in 2 entry points I get 2 350k files,..

But the biggest problem, if you have more than 1 entry point using Watch mode, first compile is fine, successive compiles give errors like ->
```
ERROR in chunk 1 [entry]
8a7cd0cd2cc5f21ec12a.js
Conflict: Multiple assets emit to the same filename 8a7cd0cd2cc5f21ec12a.js

ERROR in chunk 3 [initial]
93a8d32df50e5f918ebe.js
Conflict: Multiple assets emit to the same filename 93a8d32df50e5f918ebe.js
etc.

```

Also worth noting, on these successive compiles, it again then duplicates files, eg.  It shows 2 350k files again, like when not using ""CommonsChunkPlugin"".

A temporary solution while developing in watch mode only have 1 entry point, and only work on this.  Once you are happy re-include all entry points and do a full compile again.


**If the current behavior is a bug, please provide the steps to reproduce.**

Create a project with 2 entry points, start compile in watch mode.  
Now modify a file to cause a recompile.

**What is the expected behavior?**

It works like the first compile, and doesn't error.

",https://github.com/webpack/webpack/issues/5383
5,"TITLE: Escaping Literal Quotes in Strings BODY: Challenge [escaping-literal-quotes-in-strings](http://beta.freecodecamp.com/en/challenges/basic-javascript/escaping-literal-quotes-in-strings) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/603.2.4 (KHTML, like Gecko) Version/10.1.1 Safari/603.2.4</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```js

var myStr = ""I am a \""double quoted\"" string inside \""double quotes\"".""; // Change this line

```

There is an error with testing the correct solution. Even if I type it correctly on the first pass, there is error, even after resetting code. 

For me worked to reload page with message ""I found same saved work. Loading now."" and then the same code was OK. 

here is the screenshot: [http://vlastapolach.cz/download/doubleQuotes.png](http://vlastapolach.cz/download/doubleQuotes.png)",https://github.com/freeCodeCamp/freeCodeCamp/issues/15566
3,"TITLE: Loaders with same test parameter operate with one source.  BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
Report a bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Loaders with same `test` param gets `source` modified by prev loader.

**If the current behavior is a bug, please provide the steps to reproduce.**
Stackoverflow issue  link https://stackoverflow.com/questions/45349178/webpack-loaders-source
Sandbox to reproduce bug https://github.com/sshmyg/webpack-test

**What is the expected behavior?**
Different rules with same `test` should get pure content, not modified prev rule.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
- MacOS latest
- node 7.4.0
- npm 4.6.1
- webpack latest 3.4.1

",https://github.com/webpack/webpack/issues/5391
2,"TITLE: EnvironmentPlugin: destructuring process.env doesn't work BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
report a *bug*

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**
Destructuring `process.env` doesn't work.
`console.log(MY_VAR);` logs `undefined`

**Steps to reproduce.**

webpack.config.js

```js
const path = require(""path"");
const {EnvironmentPlugin} = require(""webpack"");

module.exports = {
    entry: ""./main.js"",
    output: {
        path: path.resolve(__dirname),
        filename: ""bundle.js""
    },
    plugins: [
        new EnvironmentPlugin([""API_BASE_URL""])
    ]
};
```

main.js

```js
const {MY_VAR} = process.env;
console.log(MY_VAR); // logs undefined
console.log(process.env.MY_VAR); // logs ""test""
```

command

```bash
MY_VAR=test webpack
```

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
`console.log(MY_VAR);` should log ""test""

Node.js version: 8.2.1
webpack version: 3.4.1
OS version: Ubuntu 17.04",https://github.com/webpack/webpack/issues/5392
5,"TITLE: [name] and [filebase] templates don't work in output.filename BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**
I want to report a bug in version 3.4.1 of webpack.

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Using the [name] or [filebase] templates in the output.filename setting in webpack.config.js leads to the following error message:

```
ERROR in chunk main [entry]
build/[filebase].js
Path variable [filebase] not implemented in this context: build/[filebase].js
```

According to the documentation here this should work: https://webpack.js.org/configuration/output/#output-filename

**If the current behavior is a bug, please provide the steps to reproduce.**

I've created a minimal reproducible example in this gist: https://gist.github.com/50m30n3/c56398e8b95dd4a5fe5aedfa9469c10b

Running `webpack` or `node run build` will result in the error.

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**
According to the documentation the original file name or file basename should be substituted into the output file name.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

I'm running node v8.2.1 and webpack 3.4.1 on Arch Linux.",https://github.com/webpack/webpack/issues/5394
4,"TITLE: Hot Module Replacement doesn't notice when a symlink is changed BODY: **What is the current behavior?**
We symlink our node_modules directory and change the symlink when we update node_modules. When the directory is changes HMR doesn't detect that something has changed.

**If the current behavior is a bug, please provide the steps to reproduce.**
Setup HMR referencing a file with the parent directory symlinked. Change the symlink to a different directory with a modified version of the file.

**What is the expected behavior?**
HMR should detect that files have changed. Currently does not.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Linux Ubuntu.
",https://github.com/webpack/webpack/issues/5395
1,"TITLE: Webpack dynamic require injects http script on a https server. BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Neither

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

I am trying out Webpacks dynamic require which turns whatever I require into a dynamic module and splits off the code.

```
import(`resources/assets/images/svg/${this.name}.svg`).then((module) => {
    this.svg = module;
}).catch(error => 'An error occured while loading the svg');
```

The code is then being injected into the page with a script tag when the promise fires. Except the script tag is using http instead of https.

Mixed Content: The page at 'https://test.app' was loaded over HTTPS, but requested an insecure script 'http://test.app/28.js'. This request has been blocked; the content must be served over HTTPS.
How can I make sure that my dynamic require uses https. Is this a setting I can tweak in my webpack configuration?

I am not using webpack dev serv I am simply using the watcher.

No information is available on this.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

For Webpack to inject a script tag with https on a https server.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5397
4,"TITLE: Solution is not flexible? BODY: Challenge [adjust-the-hover-state-of-an-anchor-tag](http://beta.freecodecamp.com/en/challenges/applied-visual-design/adjust-the-hover-state-of-an-anchor-tag) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<style>
  a {
    color: #000;
  }
  
  a:hover {
    color: blue;
  }
  
</style>
<a href=""http://freecatphotoapp.com/"" target=""_blank"">CatPhotoApp</a>

```
Earlier, I tried `color: #00f` for my `a:hover` pseudo-class, but apparently it wasn't accepted as a solution, even though it's literally the *exact same* shade of blue. What gives?
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15567
1,"TITLE: webpack --watch breaking site after modifying a file BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?** Report a bug

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

Working with webpack --watch option breaks the page after modifying a file.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

I have an application built with react, one of the components is using a node_module and importing a css file like:

import 'module/styles/styles.css';

I start the build using --watch option and everything is built OK and the site loads fine.
The after modifying any file I get the following error:

Uncaught (in promise) TypeError: __webpack_require__(...) is not a function

This error points to the CSS file:

exports = module.exports = require(""../../css-loader/lib/css-base.js"")();

The error is on the line above, which will call:

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = require(""!!../../css-loader/index.js!./styles.css"");
if(typeof content === 'string') content = [[module.id, content, '']];

Debugging this, the first time webpack is built module ID here is 914 but after modifying the file it is 1, something is very weird when webpack rebuilds after the change.

I have a loader for CSS as follows:

            {
                test: /\.css$/,
                loader: 'style-loader!css-loader'
            },

**What is the expected behavior?**

After modifying a file the site should reload fine instead of showing the error and breaking the page.

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**

Node: 6.9.4
Webpack: 3.3.0 but tested on latest too
WIndows 8.1 enterprise

",https://github.com/webpack/webpack/issues/5399
2,"TITLE: Specify output directory with dynamic import BODY: <!-- Please don't delete this template or we'll close your issue -->
<!-- Before creating an issue please make sure you are using the latest version of webpack. -->
<!-- Also consider trying the webpack@beta version, maybe it's already fixed. -->

**Do you want to request a *feature* or report a *bug*?**

Neither

<!-- Please ask questions on StackOverflow or the webpack Gitter (https://gitter.im/webpack/webpack). -->
<!-- Issues which contain questions or support requests will be closed. -->

**What is the current behavior?**

I am wondering if it is possible to specify an output directory per dynamic import context:

```JS
import(/* webpackChunkName: ""svg-"" */ `resources/assets/images/svg/${this.name}.svg`)
    .then((module) => {
        this.svg = module;
    }
).catch(error => 'An error occured while loading the svg');
```

When using something like the above I would like to specify the output directory of these files so they end up in: `public/js/svg/`.

I am currently doing it by using this:

```JS
output: {
    publicPath: '/',
    chunkFilename: 'js/svg/[name].js'
},
```
This is obviously not flexible since it will do this for all dynamic imports so I can't re-use it for anything but SVG's.

**If the current behavior is a bug, please provide the steps to reproduce.**

<!-- A great way to do this is to provide your configuration via a GitHub gist. -->
<!-- Best provide a minimal reproduceable repo -->
<!-- If your issue is caused by a plugin or loader file the issue on the plugin/loader repo -->

**What is the expected behavior?**

**If this is a feature request, what is motivation or use case for changing the behavior?**

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
",https://github.com/webpack/webpack/issues/5401
2,"TITLE: dynamic require inside if block fails to compile BODY: **Do you want to request a *feature* or report a *bug*?**
Bug

**What is the current behavior?**
The following code does not compile with webpack as acorn parser is not able to parse this.
Babel is able to parse this correctly. You can test this on [astexplorer.net](https://astexplorer.net/)
```js
let routes = [];

if (process.env.NODE_ENV === 'development' || process.env.FK_ENV === 'staging') {
    routes.push({
       getComponent: import(/* webpackChunkName: ""SomePage"" */ './SomePage.js')
    });
}
```

Neither does this.

```js
let routes = [];

if (false || true) {
    routes.push({
       getComponent: import(/* webpackChunkName: ""SomePage"" */ './SomePage.js')
    });
}
```

**What is the expected behaviour?**
It should compile.

**Please mention other relevant information such as the browser version, Node.js version, webpack version and Operating System.**
Webpack: 2.5.1
Node: 8.2
OS: MacOS Sierra
",https://github.com/webpack/webpack/issues/5402
1,"TITLE: stats.assetsByChunkName does not include dynamic chunks BODY: Using `import()` we get chunks in stats for sync chunks but not for async chunks. 

Repo to reproduce: 
https://github.com/mohsen1/universal-async-component-example/blob/master/webpack.config.ts#L91

Update fileds to be only `assetsByChunkName`

Node: 8.0.0

Webpack: 3.4.0
",https://github.com/webpack/webpack/issues/5403
5,"TITLE: Challenge [Search and Replace] - Tests are insufficient BODY: **Challenge [Search and Replace](https://www.freecodecamp.com/challenges/search-and-replace)**

While it is relatively easy to pass all of the given tests in this challenge, I think there are missing checks. For example, if you need to replace more than one word, then all of the given solutions in https://forum.freecodecamp.com/t/freecodecamp-algorithm-challenge-guide-search-and-replace/16045/18 fail. 

For example, consider this test, using the basic solution from the forum:

```
myReplace(""This is this test"", ""this"", ""that"");
```

This returns `This is that test`. That's all well and good if you're search is case sensitive. But if you change it to:
```
myReplace(""this is this test"", ""this"", ""that"");
```
you get `that is this test` instead of `that is that test`

The other examples given in the forum give slightly different outputs (e.g. the intermediate correctly replaces all instances if the cases match). 

But my point is, that irregardless of whatever solution you use, all tests on the FCC page pass, where I think we're missing a test or 2 to catch the issues cited above.

Either that, or slightly alter the instructions to specify that there will only ever be one instance of the word in str (which is not ideal from a learning standpoint imo - what if the word you're replacing is 'the' or 'a'?)",https://github.com/freeCodeCamp/freeCodeCamp/issues/15260
2,"TITLE: I don't understand the instructions to ""use strict""; BODY: I put some comments in my code, but I'm not sure if this was correct, the challenge passed with/without the line at the top, but I'm not sure if I used it in the manner that you were hoping.  Maybe clearer instructions if I used it incorrectly?  Hard to say :)  Keep up the good work though!

Challenge [explore-problems-with-the-var-keyword](https://beta.freecodecamp.com/en/challenges/es6/explore-problems-with-the-var-keyword) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```js

""use strict""; // I don't understand the instructions or if this is right.

let redNosedReindeer = ""Rudolph"";
let favorite = redNosedReindeer + "" is Santa's favorite reindeer."";


```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15586
2,"TITLE: I can't continue to next lesson all the page does is refresh and loads the same lesson over and over again BODY: 
**Problem:** I'm trying to continue to the next lesson and when I select continue to next lesson it refreshes me to the same page. If I use the map and try to go around this issue I don't receive credit for completing the lesson and it continues to do this with the next lesson. 




Challenge [Use an ID Attribute to Style an Element](https://www.freecodecamp.com/challenges/use-an-id-attribute-to-style-an-element) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.86 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```html

<link href=""https://fonts.googleapis.com/css?family=Lobster"" rel=""stylesheet"" type=""text/css"">
<style>
  .red-text {
    color: red;
  }

  h2 {
    font-family: Lobster, Monospace;
  }

  p {
    font-size: 16px;
    font-family: Monospace;
  }

  .thick-green-border {
    border-color: green;
    border-width: 10px;
    border-style: solid;
    border-radius: 50%;
  }

  .smaller-image {
    width: 100px;
  }

  .silver-background {
    background-color: silver;
  }
  
  #cat-photo-form {
    background-color: green;
  }
</style>

<h2 class=""red-text"">CatPhotoApp</h2>

<p>Click here for <a href=""#"">cat photos</a>.</p>

<a href=""#""><img class=""smaller-image thick-green-border"" alt=""A cute orange cat lying on its back. "" src=""https://bit.ly/fcc-relaxing-cat""></a>

<div class=""silver-background"">
  <p>Things cats love:</p>
  <ul>
    <li>cat nip</li>
    <li>laser pointers</li>
    <li>lasagna</li>
  </ul>
  <p>Top 3 things cats hate:</p>
  <ol>
    <li>flea treatment</li>
    <li>thunder</li>
    <li>other cats</li>
  </ol>
</div>

<form action=""/submit-cat-photo"" id=""cat-photo-form"">
  <label><input type=""radio"" name=""indoor-outdoor"" checked> Indoor</label>
  <label><input type=""radio"" name=""indoor-outdoor""> Outdoor</label>
  <label><input type=""checkbox"" name=""personality"" checked> Loving</label>
  <label><input type=""checkbox"" name=""personality""> Lazy</label>
  <label><input type=""checkbox"" name=""personality""> Energetic</label>
  <input type=""text"" placeholder=""cat photo URL"" required>
  <button type=""submit"">Submit</button>
</form>

```
![image](https://user-images.githubusercontent.com/10508440/26944120-c06cf3f4-4c55-11e7-8054-02c22c6bd2fc.png)

![image](https://user-images.githubusercontent.com/10508440/26944199-f8bdd822-4c55-11e7-9f4c-f2f68f90d419.png)

![image](https://user-images.githubusercontent.com/10508440/26944206-010015ae-4c56-11e7-9814-c25879f4e16c.png)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15262
5,"TITLE: Error Checking If h2 Is Blue BODY: Challenge [use-css-selectors-to-style-elements](http://beta.freecodecamp.com/en/challenges/basic-css/use-css-selectors-to-style-elements) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

console output:
message: Your h2 element should be blue.""

However, all h2 elements are renderd blue thanks to the style's `h2 {color: blue;}` so I have no idea why it won't let me advance in this challenge. In fact, the h2 is visually blue also when Ctrl + Enter is hit.

```html

<style>
  h2{
    color: blue;
  } 
</style>
<h2>CatPhotoApp</h2>
<main>
  ...
</main>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15280
4,"TITLE: Front end doesn't work BODY: Challenge [metricimperial-converter](http://beta.freecodecamp.com/en/challenges/information-security-and-quality-assurance-projects/metricimperial-converter) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.0.12137 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

https://hard-twilight.glitch.me/

Filling in the frontend portion returns nothing whenever the convert button is pressed
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15281
2,"TITLE: Test passes with typo in <link href ..> that prevents Lobster font loading BODY: Challenge [Import a Google Font](https://www.freecodecamp.com/challenges/import-a-google-font#?solution=%3Clink%20href%3D%22https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DLobster%22%20ref%3D%22stylesheet%22%20type%3D%22text%2Fcss%22%3E%0A%0A%3Cstyle%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20.red-text%20%7B%0A%20%20%20%20color%3A%20red%3B%0A%20%20%7D%0A%0A%20%20h2%20%7B%0A%20%20%20%20font-family%3A%20Lobster%3B%0A%20%20%7D%0A%0A%20%20p%20%7B%0A%20%20%20%20font-size%3A%2016px%3B%0A%20%20%20%20font-family%3A%20Monospace%3B%0A%20%20%7D%0A%3C%2Fstyle%3E%0A%0A%3Ch2%20class%3D%22red-text%22%3ECatPhotoApp%3C%2Fh2%3E%0A%0A%3Cp%20class%3D%22red-text%22%3EKitty%20ipsum%20dolor%20sit%20amet%2C%20shed%20everywhere%20shed%20everywhere%20stretching%20attack%20your%20ankles%20chase%20the%20red%20dot%2C%20hairball%20run%20catnip%20eat%20the%20grass%20sniff.%3C%2Fp%3E%0A%3Cp%20class%3D%22red-text%22%3EPurr%20jump%20eat%20the%20grass%20rip%20the%20couch%20scratched%20sunbathe%2C%20shed%20everywhere%20rip%20the%20couch%20sleep%20in%20the%20sink%20fluffy%20fur%20catnip%20scratched.%3C%2Fp%3E%0A) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

Notice in the <link href ...>  there is a typo...  **ref**=""stylesheet"" should be **rel**=""stylesheet""
This prevents Lobster from loading, the web page preview never renders Lobster font
Yet, clicking run test proceeds with a pass and we move on

My code:
```html
<link href=""https://fonts.googleapis.com/css?family=Lobster"" ref=""stylesheet"" type=""text/css"">

<style>                                                                                             
  .red-text {
    color: red;
  }

  h2 {
    font-family: Lobster;
  }

  p {
    font-size: 16px;
    font-family: Monospace;
  }
</style>

<h2 class=""red-text"">CatPhotoApp</h2>

<p class=""red-text"">Kitty ipsum dolor sit amet, shed everywhere shed everywhere stretching attack your ankles chase the red dot, hairball run catnip eat the grass sniff.</p>
<p class=""red-text"">Purr jump eat the grass rip the couch scratched sunbathe, shed everywhere rip the couch sleep in the sink fluffy fur catnip scratched.</p>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15283
5,"TITLE: passed with funky code. BODY: Challenge [Add Font Awesome Icons to our Buttons](https://www.freecodecamp.com/challenges/add-font-awesome-icons-to-our-buttons) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

I passed the challenge with this code:

```html
<button class=""btn btn-block btn-primary""><i class=""fa fa-thumbs-up"">Like</i></button>
</div>
```

I thought the ""Like"" needed to be in-between the i's 
It made the button with the thumbs up, but it was not the same size as the others.
I thought it may be wrong but the program passed me.
I realized on the next challenge my misake and the code should be this.

```html
<button class=""btn btn-block btn-primary""><i class=""fa fa-thumbs-up""></i>Like</button>
</div>
```

Obviously my original code was not what you wanted. I thought i would pass along.

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15285
4,"TITLE: ""Identifier 'dataset' has already been declared""  (Works only when const is commented out) BODY: Challenge [work-with-dynamic-data-in-d3](https://beta.freecodecamp.com/en/challenges/data-visualization-with-d3/work-with-dynamic-data-in-d3) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<body>
  <script>
    //const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];
    
    d3.select(""body"").selectAll(""h2"")
      .data(dataset)
      .enter()
      .append(""h2"")
      // Add your code below this line
      
      .text((dataset) => dataset + "" USD"");
      
      // Add your code above this line
  </script>
</body>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15286
4,"TITLE: code is correct but still telling me to ""keep trying"" BODY: Challenge [use-css-selectors-to-style-elements](http://beta.freecodecamp.com/en/challenges/basic-css/use-css-selectors-to-style-elements) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 6.2; Win64; x64; rv:52.0) Gecko/20100101 Firefox/52.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html

<style>
  h2 {color: blue;}
</style>

<h2>CatPhotoApp</h2>
<main>
  <p>Click here to view more <a href=""#"">cat photos</a>.</p>
  
  <a href=""#""><img src=""https://bit.ly/fcc-relaxing-cat"" alt=""A cute orange cat lying on its back.""></a>
  
  <div>
    <p>Things cats love:</p>
    <ul>
      <li>cat nip</li>
      <li>laser pointers</li>
      <li>lasagna</li>
    </ul>
    <p>Top 3 things cats hate:</p>
    <ol>
      <li>flea treatment</li>
      <li>thunder</li>
      <li>other cats</li>
    </ol>
  </div>
  
  <form action=""/submit-cat-photo"">
    <label><input type=""radio"" name=""indoor-outdoor"" checked> Indoor</label>
    <label><input type=""radio"" name=""indoor-outdoor""> Outdoor</label><br>
    <label><input type=""checkbox"" name=""personality"" checked> Loving</label>
    <label><input type=""checkbox"" name=""personality""> Lazy</label>
    <label><input type=""checkbox"" name=""personality""> Energetic</label><br>
    <input type=""text"" placeholder=""cat photo URL"" required>
    <button type=""submit"">Submit</button>
  </form>
</main>

```

![bug](https://user-images.githubusercontent.com/26975750/27004837-65400edc-4e2e-11e7-9076-5222aa1a5063.jpg)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15296
2,"TITLE: console statements not displaying result BODY: Challenge [Profile Lookup](https://www.freecodecamp.com/challenges/profile-lookup) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```javascript

//Setup
var contacts = [
    {
        ""firstName"": ""Akira"",
        ""lastName"": ""Laine"",
        ""number"": ""0543236543"",
        ""likes"": [""Pizza"", ""Coding"", ""Brownie Points""]
    },
    {
        ""firstName"": ""Harry"",
        ""lastName"": ""Potter"",
        ""number"": ""0994372684"",
        ""likes"": [""Hogwarts"", ""Magic"", ""Hagrid""]
    },
    {
        ""firstName"": ""Sherlock"",
        ""lastName"": ""Holmes"",
        ""number"": ""0487345643"",
        ""likes"": [""Intriguing Cases"", ""Violin""]
    },
    {
        ""firstName"": ""Kristian"",
        ""lastName"": ""Vos"",
        ""number"": ""unknown"",
        ""likes"": [""Javascript"", ""Gaming"", ""Foxes""]
    }
];


function lookUpProfile(firstName, prop){
// Only change code below this line

console.log("" Hello World "") // <--- This statement is not logged in the console window 

// Only change code above this line
}

// Change these values to test your function
lookUpProfile(""Akira"", ""likes"");

```

> there should be a way for a coder to check how control is flowing through my code. ""console.log"" statement is one such statement.

> But console.log statement is not showing any output

Edit (@raisedadead):
*Original code hidden here*
<!--
// Only change code below this line
  for ( var i=0; i < contacts.length; i++ ){
     if (contacts[i][1] == firstName) {
       console.log(""here"");
     }
     return ""No such contract"";
  }
// Only change code above this line 
-->",https://github.com/freeCodeCamp/freeCodeCamp/issues/15300
5,"TITLE: Not giving error when semicolon is missing at the return statement BODY: Challenge [dynamically-change-the-height-of-each-bar](https://beta.freecodecamp.com/en/challenges/data-visualization-with-d3/dynamically-change-the-height-of-each-bar) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<body>
  <script>
    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];
    
    const w = 500;
    const h = 100;
    
    const svg = d3.select(""body"")
                  .append(""svg"")
                  .attr(""width"", w)
                  .attr(""height"", h);
    
    svg.selectAll(""rect"")
       .data(dataset)
       .enter()
       .append(""rect"")
       .attr(""x"", (d, i) => i * 30)
       .attr(""y"", 0)
       .attr(""width"", 25)
       .attr(""height"", (d, i) => {
         // Add your code below this line
         
         return d * 3
         
         // Add your code above this line
       });
  </script>
</body>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15304
1,"TITLE: Test fails in Firefox but passes in Chrome: BODY: Challenge [change-the-color-of-an-svg-element](https://beta.freecodecamp.com/en/challenges/data-visualization-with-d3/change-the-color-of-an-svg-element) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<body>
  <script>
    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];
    
    const w = 500;
    const h = 100;
    
    const svg = d3.select(""body"")
                  .append(""svg"")
                  .attr(""width"", w)
                  .attr(""height"", h);
    
    svg.selectAll(""rect"")
       .data(dataset)
       .enter()
       .append(""rect"")
       .attr(""x"", (d, i) => i * 30)
       .attr(""y"", (d, i) => h - 3 * d)
       .attr(""width"", 25)
       .attr(""height"", (d, i) => 3 * d)
       // Add your code below this line
       .attr(""fill"", ""navy"");      
       
       // Add your code above this line
  </script>
</body>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15306
1,"TITLE: Create an ordered list has an issue with test cases. BODY: Challenge: Create an Ordered List
https://www.freecodecamp.com/challenges/create-an-ordered-list

My friend put the following in line 30 (i don't know why she did that):
<ol>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ol>

and the correct code at the end of the file:
<p>Top 3 things cats hate:</p>
<ol>
  <li>Cucumber</li>
  <li>Snake</li>
  <li>Dog</li>
</ol>

#### Issue Description
Following testcase fails:
You should have three li elements within your ol element.

The problem is that the testcase requirements are fullfilled, but fails because of the wrong code starting line 30.

The user now only looks on the li and ol elements, which is definitively correct. The app must recognize that it is because of another wrong insertion and inform the user.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15314
4,"TITLE: Modal heading color scheme BODY: Maybe this has already been discussed but I did a quick search and didn't find anything.

Regarding the success modal on the default color scheme (not night mode), I think the modal heading text should be white instead of dark-gray. Thoughts on this @freeCodeCamp/moderators? Screenshot below:

 ![Modal](http://i.imgur.com/7uKrMit.jpg)


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15588
3,"TITLE: Test case bug in 'Generate Random Whole Numbers within a Range' BODY: #### Challenge Name
<!-- Insert link to challenge below -->
[Generate Random Whole Numbers within a Range](https://www.freecodecamp.com/challenges/generate-random-whole-numbers-within-a-range)

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
One can simply use the code of the given function`ourRandomRange(ourMin, ourMax)` to solve the challenge.

However, calling this functions fails the test with the error message: ""randomRange should use both myMax and myMin, and return a random number in your range. ""

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js
// Example
function ourRandomRange(ourMin, ourMax) {
  return Math.floor(Math.random() * (ourMax - ourMin + 1)) + ourMin;
}

ourRandomRange(1, 9);

// Only change code below this line.
function randomRange(myMin, myMax) {
  return ourRandomRange(myMin, myMax); // Test Fails
}

// Change these values to test your function
var myRandom = randomRange(5, 15);
```

```js
// Example
function ourRandomRange(ourMin, ourMax) {
  return Math.floor(Math.random() * (ourMax - ourMin + 1)) + ourMin;
}

ourRandomRange(1, 9);

// Only change code below this line.
function randomRange(myMin, myMax) {
  return Math.floor(Math.random() * (myMax - myMin +1) + myMin); // Test success
}

// Change these values to test your function
var myRandom = randomRange(5, 15);
```
See how inlining the code from `ourRandomRange(ourMin, ourMax)` suddenly passes the test

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15322
2,"TITLE: CodePen to all-HTTPS, breaking all ajax calls to HTTP endpoints BODY: Challenge [Show the Local Weather](https://www.freecodecamp.com/challenges/show-the-local-weather) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

As of June 2, 2017, CodePen has moved to an all HTTPS format. This is has affected all ajax calls to HTTP endpoints and will cause pens to not function properly.

Suggesting instructions be reconsidered for at least the Free Weather App Project.

https://blog.codepen.io/2017/06/02/codepen-now-https/
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15324
3,"TITLE: Test seem to pass even if code is incorrect BODY: Challenge [create-strings-using-template-literals](https://beta.freecodecamp.com/en/challenges/es6/create-strings-using-template-literals) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.

The tests pass if I leave the code as it was origianlly or even if I just type something random as the value for resultDisplay. 


```js


const result = {
  success: [""max-length"", ""no-amd"", ""prefer-arrow-functions""],
  failure: [""no-var"", ""var-on-top"", ""linebreak""],
  skipped: [""id-blacklist"", ""no-dup-keys""]
};
// change code below this line
const resultDisplay = nil;
// change code above this line
console.log(resultDisplay);
/**
 * should look like this
 * <li class=""text-warning"">no-var</li>
 * <li class=""text-warning"">var-on-top</li>
 * <li class=""text-warning"">linebreak</li>
 **/

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15329
5,"TITLE: Inappropriate use of variables teaches bad habit BODY: Challenge [Convert Celsius to Fahrenheit](https://www.freecodecamp.com/challenges/convert-celsius-to-fahrenheit) has an issue. It teaches an inappropriate use of variables (a bad habit I often see campers using), because it's a bad example to use for teaching variables. I would certainly not write code like this:

```javascript
function convertToF(celsius) {
  var fahrenheit;
  fahrenheit = celsius * 9 / 5 + 32;
  return fahrenheit;
}
```

There's unnecessary creation of and assignment to a variable. I'm sure most of us would write:

```javascript
function convertToF(celsius) {
  return celsius * 9 / 5 + 32;
}
```

If it's important to get the word ""fahrenheit"" into the code for clarity, it should be in the function's name (convertToFahrenheit).",https://github.com/freeCodeCamp/freeCodeCamp/issues/15333
1,"TITLE: Rename Link from Smallest Common Multiple to Least Common Multiple BODY: I had to look at the Wiki to finally understand what was meant. It is misleading because the link is least common multiple, and for you to direct the user to that website implies Smallest Common Multiple is Least Common Multiple.

https://www.freecodecamp.com/challenges/smallest-common-multiple",https://github.com/freeCodeCamp/freeCodeCamp/issues/15338
2,"TITLE: CSS Naming Methodology, Unit and Integration Testing BODY: This isn't an issue but more so of a feature. I am not sure if this has been mentioned already and decided upon but I wanted to bring it up. CSS naming methodology will benefit many in the lines of reusable, specificity, maintainability and modularized css. Also with the non profit organization section you will have almost 0 conflicts when two or more people are working with CSS. BEM is the one i recommend but its more based on personal preference....

Unit and Integrations in my opinion is a must have feature just for any server side programming language. We all know the benefits of this. 

My apologies if this has already been mentioned.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15367
2,"TITLE: Challenge create-a-more-complex-shape-using-css-and-html has an issue. BODY: Challenge [create-a-more-complex-shape-using-css-and-html](http://beta.freecodecamp.com/en/challenges/applied-visual-design/create-a-more-complex-shape-using-css-and-html) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

Underlying code is wrong and does not create a heart. Yet keying this code will render a pass:

```html

<style>
.heart {
  position: absolute;
  margin: auto;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-color: pink;
  height: 50px;
  width: 50px;
  transform: rotate(-45deg);
}
.heart:after {
  background-color: pink;
  content: """";
  border-radius: 50%;
  position: absolute;
  width: 50px;
  height: 50px;
  top: 0px;
  left: 25px;
}
.heart:before {
  content: """";
  background-color: pink;
  border-radius: 50%;
  position: absolute;
  height: 50px;
  width: 70px;
  top: -50px;
  left: 5px;
}
</style>
<div class = ""heart""></div>

.heart { background-color: red;
  display: inline-block;
  height: 30px;
  margin: 0 10px;
  position: relative;
  top: 0;
  transform: rotate(-45deg);
  width: 30px;

```


Underlying code creates heart. taken from {https://css-tricks.com/hearts-in-html-and-css/}:


```html

<style>
body {
  background: #333;
  color: #fff;
  font-family: 'Archivo Black', sans-serif;
  font-size: 3em;
  margin-top: 1em;
  text-align: center;
  text-transform: uppercase;
}

.heart {
  background-color: red;
  display: inline-block;
  height: 30px;
  margin: 0 10px;
  position: relative;
  top: 0;
  transform: rotate(-45deg);
  width: 30px;
}

.heart:before,
.heart:after {
  content: """";
  background-color: red;
  border-radius: 50%;
  height: 30px;
  position: absolute;
  width: 30px;
}

.heart:before {
  top: -15px;
  left: 0;
}

.heart:after {
  left: 15px;
  top: 0;
}
</style>
I <span class=""heart""></span> you.
```
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15390
2,"TITLE: Broken in Firefox, but Works in Chrome. BODY: Challenge [use-css-selectors-to-style-elements](http://beta.freecodecamp.com/en/challenges/basic-css/use-css-selectors-to-style-elements) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; Linux x86_64; rv:53.0) Gecko/20100101 Firefox/53.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

The H2 element is indeed BLUE, but is not recognized as such in Firefox, although identical code is readily accepted when working in Chrome.

At least a dozen other exercises in this section appear to suffer from the same glitch, which renders them unsolvable.

```html

<style>
  h2 {color: blue;}
</style>
<h2>CatPhotoApp</h2>
<main>
  <p>Click here to view more <a href=""#"">cat photos</a>.</p>
  
  <a href=""#""><img src=""https://bit.ly/fcc-relaxing-cat"" alt=""A cute orange cat lying on its back.""></a>
  
  <div>
    <p>Things cats love:</p>
    <ul>
      <li>cat nip</li>
      <li>laser pointers</li>
      <li>lasagna</li>
    </ul>
    <p>Top 3 things cats hate:</p>
    <ol>
      <li>flea treatment</li>
      <li>thunder</li>
      <li>other cats</li>
    </ol>
  </div>
  
  <form action=""/submit-cat-photo"">
    <label><input type=""radio"" name=""indoor-outdoor"" checked> Indoor</label>
    <label><input type=""radio"" name=""indoor-outdoor""> Outdoor</label><br>
    <label><input type=""checkbox"" name=""personality"" checked> Loving</label>
    <label><input type=""checkbox"" name=""personality""> Lazy</label>
    <label><input type=""checkbox"" name=""personality""> Energetic</label><br>
    <input type=""text"" placeholder=""cat photo URL"" required>
    <button type=""submit"">Submit</button>
  </form>
</main>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15369
5,"TITLE: Remove the views for CoC, Privacy and the ToS BODY: #### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
~~The Beta Code of Conduct was updated but not the production one.~~
~~Updated: https://beta.freecodecamp.com/en/code-of-conduct ~~
~~Not updated: https://freecodecamp.com/en/code-of-conduct~~

Update(@raisedadead) :

The pages for code-of-conduct, privacy-policy and terms-of-service have moved to the independent static repos.
We just need to remove the routes and the views from the main repo.
This should happen once the redirects are done.

Thanks !! 
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15371
2,"TITLE: Wrong output test in advanced algorith challange: symmetric difference BODY: Challenge [Symmetric Difference](https://www.freecodecamp.com/challenges/symmetric-difference) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```javascript
function sym(args) {
  var input = Array.from(arguments);
  function diff(arr1, arr2) {
    var arr3= [];
    for(var i = 0; i < arr1.length; i++ ){
      var unique = true;
       for(var j=0; j < arr2.length; j++){
            if(arr1[i] == arr2[j]){
                 unique = false;
                 break;
            }
       }
    if(unique){
      arr3.push(arr1[i]);
    }
    }
     return arr3;
    }
  function diffArray(arr1, arr2){
    return diff(arr1,arr2).concat(diff(arr2,arr1));
  }
  return input.reduce(diffArray);
  //.filter(function(item, pos, self) {
  //  return self.indexOf(item) === pos;}).sort(function(a, b){return a - b;});
}
//sym([1, 1, 2, 5], [2, 2, 3, 5], [3, 4, 5, 5]);
//sym([1, 2, 3], [5, 2, 1, 4]);
//sym([3, 3, 3, 2, 5], [2, 1, 5, 7], [3, 4, 6, 6], [1, 2, 3], [5, 3, 9, 8], [1]);
//sym([1, 2, 3], [5, 2, 1, 4]);
sym([3, 3, 3, 2, 5], [2, 1, 5, 7], [3, 4, 6, 6], [1, 2, 3], [5, 3, 9, 8], [1]);

```
Just run the code above and refer to the screen attached.
![bug](https://user-images.githubusercontent.com/10043733/27183871-df42ad6c-51e8-11e7-9b53-1e2fe349fe3c.png)

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15380
1,"TITLE: Applied Visual Design: Learn about Tertiary Colors BODY: Challenge [learn-about-tertiary-colors](http://beta.freecodecamp.com/en/challenges/applied-visual-design/learn-about-tertiary-colors) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

So I finished all the challenges on the Applied Visual Design chapter beside this one because I can't pass it as it says that only the cyan background-color is valid the other 2 background-color are not validated and I can't pass the challenge.I suppose this is a bug as this site is sill in beta but it might be that I didn't pick the right hex code for the colors?I can't get my certificate if I don't have everything completed 😆 

```html


<style>
  body {
    background-color: #FFFFFF;
  }
  
  .orange {
    background-color: #FFA500;
  }
  
  .cyan {
    background-color: #00FFFF;
  }
  
  .raspberry {
    background-color: #E30B5D;
  }
  
  div {
    height: 100px;
    width: 100px;
    margin-bottom: 5px;
  }
</style>
  
<div class=""orange""></div>
<div class=""cyan""></div>
<div class=""raspberry""></div>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15384
1,"TITLE: Map the Debris uses a straight equality check for double precision floating point numbers numbers. BODY: Challenge [map-the-debris](http://beta.freecodecamp.com/en/challenges/intermediate-algorithm-scripting/map-the-debris) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

This solution produces the correct answers as shown in the console logs with a variance small enough to be attributed to checking for equality between two floating point numbers. Because you are looking for a specific floating point number, any change in order of operations of calculating the orbital period will possibly produce a different result because of floating point rounding errors. 
The test for this should test the difference between the two values and check if it is less than 4 epsilon for IEEE double precision numbers at most. This is due to the rounding errors that could possibly propagate through the result. Due to the use of the exponent function to compute the orbital period, the possible error must be far higher than epsilon. It is 0.2935382368887076 in my case.

Another comparison operator should be used for this test.

```js


function orbitalPeriod(arr) {
  var GM = 398600.4418;
  var earthRadius = 6367.4447;
  return arr.map(function(el) {
    return {
      name: el.name,
      orbitalPeriod: 2 * Math.PI * Math.sqrt((Math.pow(el.avgAlt + earthRadius, 3))/(GM)),
    };
  });
}

console.log(orbitalPeriod([{name : ""sputnik"", avgAlt : 35873.5553}]));
console.log(orbitalPeriod([{name: ""iss"", avgAlt: 413.6}, {name: ""hubble"", avgAlt: 556.7}, {name: ""moon"", avgAlt: 378632.553}]));


orbitalPeriod([{name : ""sputnik"", avgAlt : 35873.5553}]);

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15386
5,"TITLE: Requesting several new lessons regarding functions in the Basic JavaScript Track BODY: #### Description
Greetings, as many of you know, I am extremely active in the Gitter HelpJavaScript chat.

Over the year that I've been helping people learn JavaScript in the help chatroom, I've started to notice more and more and more of a trend.

People do not understand function in their complete context. And utilizing function is a HUGE part of programming, especially with JavaScript.

I know that there are these lessons:
""Write Reusable JavaScript with Functions"".
""Passing Values to Functions with Arguments"" - change this lesson to just use 1 parameter

However, when people get to ""Convert Celsius to Fahrenheit"" they don't understand that `celsius` is a parameter. Then things really go down hill at Word Blanks and multiplyAll. Or even Stand In Line that there are two parameters to the function. (Everyone wants to use `testArr` as their variable value.)

Maybe we can try to find a way to introduce functions a little easier. Or just write better text to explain the process?

I'm requesting several new lessons to the Basic JavaScript Track:
1. Create a lesson that demonstrates if your function doesn't have a return statement. It will return `undefined`
2. Creating another lesson that deals with creating a function from scratch with a unique parameter
2.a. Create a function with a parameter. Calling the function by name and with an argument.
3. Creating a function with two parameters and how to use those parameters in the function.
3.a. How to make a function call with two arguments.

Further down the track, 
4. Create a function with a single parameter that also has an inner function with its own parameter.
5. Create a function with two parameters that also has an inner function that has its own parameter.
6. Using the return value of a function to supply a value to a variable. (This will help allow people to understand the return values of JavaScript Methods.)
7. Discuss the `arguments` object in detail and how it applies to passing in more values than the function has parameters allocated.

8. Try and find a way to show that each function (with an inner function) has its own unique `arguments` object reference


Here's some text and code that I paste into chat often to help explain this topic:

See: https://gist.github.com/revisualize/f5e812aa0838f24ea04220d22b79ab8d
See: https://gist.github.com/revisualize/3fb92987929aa5932c0bf33d229b28f6
See: https://gist.github.com/revisualize/ced4a3a6611c6c74bcab34a07eaa4ebf
I paste these links into the Gitter Chat ALLLLLLL the time to help people with these lessons and the issues that they are experiencing.


Parameters are like variables that represent the values that get passed into your function from the function call.
![Anatomy of a function](https://cs.wellesley.edu/~cs110/lectures/L16/images/function-anatomy.png)
Notice how the variables `level` and `score` in the function definition `addScore` are called parameters. 
However, when we invoke the function like in:
`addScore(3, 10)` or `addScore(6, 20)`
the values are called arguments. Here is an important lesson:
**You define a function with parameters, you call a function with arguments.**

Another example of this:
``` js
function hello(fName, uName) {
     return ""Hello "" + fName + "" "" + uName + "", How is your day?"";
}
hello(""Joseph"", ""@revisualize""); // ""Hello Joseph @revisualize, How is your day?""
hello(""Bella"", ""@bellaknoti""); // ""Hello Bella @bellaknoti, How is your day?""
hello(""Andy"", ""@dirn""); // ""Hello Andy @dirn, How is your day?""
```
You can use the `fName` and `uName` parameters just like a variable inside of your function.

Yet another example:
```js
function addThree (num) {
    var result;
    result = num + 3;
    return result;
}
```
So, when we make the function call of:
```js
addThree(10);
```
You're calling the function `addThree` You're also passing a value `10` as an argument.
In the function declaration of `function addThree (num) {` You see that there is a parameter defined of `num`
When we do `addThree(10)` then the value of the parameter `num` is passed the argument value of ... `10`
Then if you follow the code through.. `result = num + 3;` ... and we know the value of `num` is `10`.
Therefore, if we follow through the function we end up with ... `result = 10 + 3;` then `result = 13;` then we return the `result`.
...
If you then make another function call...
```js
addThree(39);
```
You can use the same function to follow the operation:
When we do `addThree(39)` then the value of the parameter `num` is passed the argument value of ... `39`
Then if you follow the code through.. `result = num + 3;` ... and we know the value of `num` is now `39`.
Therefore, if we follow through the function we end up with ... `result = 39 + 3;` then `result = 42;` then we return the `result`.

If you make the function call of `addThree(21)` the value of `num` inside the function is 21.
If you make the function call of `addThree(1000)` the value of `num` inside the function is 1000.
If you make the function call of `addThree(123456)` the value of `num` inside the function is 123456.

You can see how the parameter is used like a variable inside of the function.
And you can do mathematical operations to the parameter and assign the value to the variable `result`.

Other important things to remember:
A function can have zero parameters. You still have to use the parentheses to define it.
A function might have no return statements. In this case, we say that the function returns undefined.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15388
3,"TITLE: Adjusting the Padding of an Element-not mobile friendly BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
Adjusting the Padding of an Element
https://www.freecodecamp.com/challenges/adjusting-the-padding-of-an-element

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Using Chrome browser for Samsung Galaxy s5...
Basically, while attempting to change the green table's padding in this challenge, the padding size just shrinks and stays this way. It doesn't seem to matter what value is placed in the code, the green padding just stays at the smaller size. This includes having the correct value of 20px; and thus, the test will spit back an error every time, even with the correct code. This issue seems to have been brought up several times, but closed every time with little to no real investigation. Several of these challenges have similar issues when attempted from a mobile platform. It's frustrating not to be able to make progress when I don't have a pc available....


#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: chrome 58.0.3029.83
* Operating System: Android 6.0.1
* Mobile, Desktop, or Tablet: mobile phone- Samsung Galaxy s5

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js


<style>
  .injected-text {
    margin-bottom: -25px;
    text-align: center;
  }

  .box {
    border-style: solid;
    border-color: black;
    border-width: 5px;
    text-align: center;
  }

  .yellow-box {
    background-color: yellow;
    padding: 10px;
  }
  
  .red-box {
    background-color: red;
    padding: 20px;
  }

  .green-box {
    background-color: green;
    padding: 20px;
  }
</style>
<h5 class=""injected-text"">margin</h5>

<div class=""box yellow-box"">
  <h5 class=""box red-box"">padding</h5>
  <h5 class=""box green-box"">padding</h5>
</div>


```
#### Screenshot
<!-- Add a screenshot of your issue -->

https://plus.google.com/109521751887572320207
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15410
5,"TITLE: Wrong text in https://www.freecodecamp.com/challenges/use-spans-for-inline-elements BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
https://www.freecodecamp.com/challenges/use-spans-for-inline-elements

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
The text:
""Nest the word ""love"" in your ""Things cats love"" element below within a span element. Then give that span the class text-danger to make the text red.""

My comment:
""love"" in this case should be hate since it corresponds with ""btn-danger"" and the next paragraph clearly states ""hate"" rather than ""love"".

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Firefox 54.0
* Operating System: Ubuntu Linux 14.04
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js



```
#### Screenshot
<!-- Add a screenshot of your issue -->

![use spans for inline elements free code camp - mozilla firefox_134](https://user-images.githubusercontent.com/17229992/27255463-ecade034-53c8-11e7-9b99-f86eb3c66f3b.png)

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15414
1,"TITLE: Excercise based on deprecated API BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

#### Challenge Name
<!-- Insert link to challenge below -->
Use the Twitchtv JSON API

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
I realized, that the intermediate front-end project is based on now (since Feb. 14, 2017) deprecated API. 
Twitch.tv announced, that differences between V3 (current used in the exercise) and V5 (current supported version) are quite significant and there will not be any backward compatibility for these versions. 
Quoting the documentation: 

> The newest version of the API is 5.0. Major changes in 5.0 are: 
> - The new version of the API uses user IDs instead of user names to reference users.
> - The _links object was removed from all responses. Developers are now responsible for handling the paging offsets when polling the API.
Sub-second precision was added to time fields
> - The /games/featured endpoint was removed.
delay, background, and banner were removed from the channels response object.
> - For search endpoints, the q parameter is now called query, and the type parameter is always set to suggest.
> - The paywalled field was removed from the video response object.
> - The /kraken/chat endpoint was removed.

The twitch.tv highlight that: 
>The default version of the API is V3 until Feb. 14, 2018. However, V3 is scheduled to be deprecated (2017) and removed altogether (2018), so we strongly recommend you migrate to V5 now.

As I have taken side project using Twitch API nowadays, I feel I have to warn about the new version of API. Using the newer version of API is significantly harder, mainly because of the fact, that entire API is using OAuth 2.0 protocol. For developers it is meaningful, because of couple of facts I noticed:
1. Every developer using Twitch.tv API have to register himself and a domain (for local work it can be registered as localhost) at the site, in order to get a unique id, which is necessarily to authenticate every API call. 
2. Every call have to contain couple of HTTP headers.
3. There is lot more options for a response aside from JSON - it can be for instance HTML code, which contains a modal for user, that he confirms he knows about certain access to the account from the application.  

#### Concusion
As you can see, the newer version of API requires from user far deeper knowledge about making API calls and HTTP requests than the exercise assumes. We have got time to take an action until Feb. 14, 2018, (then API will be closed), but we have to be aware, that the exercise is not future-proof. I think, that idea of the exercise is both very good and practical, but after V3 of API removal there will be huge increase of entry threshold for a beginner user.  \

#### Possible solution
In my opinion the best solution is to find another simple, user-friendly API, because this intermediate project brings up one of the most important things connected to front-end development nowadays.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15419
3,"TITLE: Link to profile on beta fcc doesn't work BODY: <!-- freeCodeCamp Issue Template -->
#### Issue Description
http://beta.freecodecamp.com/w96k

Links to public profile on beta version of FreeCodeCamp doesn't work. It redirects to  http://beta.freecodecamp.com/en/map. Pretty sure I made dublicate issue :)


#### Browser Information
* Browser Name, Version: 
* Operating System: MacOs
* Mobile, Desktop, or Tablet: Desktop



",https://github.com/freeCodeCamp/freeCodeCamp/issues/15422
2,"TITLE: Error in Theory of JS BODY: Challenge [Generate Random Whole Numbers with JavaScript](https://www.freecodecamp.com/challenges/generate-random-whole-numbers-with-javascript) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.
The theory on this page says 

> Use another function, Math.floor() to round the number down to its nearest whole number.
Instead, it should be something like,

> Use another function, Math.floor() to truncate the decimal part of the number.
or

>  Use another function, Math.floor() to get the largest integer less than or equal to the number.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15431
5,"TITLE: Bug in the Editor, Applied Accessibility: Use tabindex to Specify the Order of Keyboard Focus for Several Elements BODY: Challenge [use-tabindex-to-specify-the-order-of-keyboard-focus-for-several-elements](http://beta.freecodecamp.com/en/challenges/applied-accessibility/use-tabindex-to-specify-the-order-of-keyboard-focus-for-several-elements) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.104 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.
## **screen shots**
**this pic is the last challenge from applied accessibility.**
![screenshot_2017-06-18_22-23-36](https://user-images.githubusercontent.com/24207309/27262675-22999e0c-5475-11e7-839d-8462ed8426f4.png)
**this pic is the second last challenge from applied accessibility.**
![screenshot_2017-06-18_22-23-51](https://user-images.githubusercontent.com/24207309/27262677-2975da2e-5475-11e7-9c16-acd731da286e.png)

conclusion
in editor the code did not update it remain same as the second last challenge so i am unable to complete the last challenge.
```html


<head>


  <style>
  p:focus {
    background-color: yellow;
  }
  </style>
</head>
<body>
  <header>
    <h1>Ninja Survey</h1>
  </header>
  <section>
    <form>
      
      
      <p tabindex=""0"">Instructions: Fill in ALL your information then click <b>Submit</b></p>
      
      
      <label for=""username"">Username:</label>
      <input type=""text"" id=""username"" name=""username""><br>
      <fieldset>
        <legend>What level ninja are you?</legend>
        <input id=""newbie"" type=""radio"" name=""levels"" value=""newbie"">
        <label for=""newbie"">Newbie Kitten</label><br>
        <input id=""intermediate"" type=""radio"" name=""levels"" value=""intermediate"">
        <label for=""intermediate"">Developing Student</label><br>
        <input id=""master"" type=""radio"" name=""levels"" value=""master"">
        <label for=""master"">9th Life Master</label>
      </fieldset>
      <br>
      <fieldset>
      <legend>Select your favorite weapons:</legend>
      <input id=""stars"" type=""checkbox"" name=""weapons"" value=""stars"">
      <label for=""stars"">Throwing Stars</label><br>
      <input id=""nunchucks"" type=""checkbox"" name=""weapons"" value=""nunchucks"">
      <label for=""nunchucks"">Nunchucks</label><br>
      <input id=""sai"" type=""checkbox"" name=""weapons"" value=""sai"">
      <label for=""sai"">Sai Set</label><br>
      <input id=""sword"" type=""checkbox"" name=""weapons"" value=""sword"">
      <label for=""sword"">Sword</label>
      </fieldset>
      <br>
      <input type=""submit"" name=""submit"" value=""Submit"">
    </form><br>
  </section>
  <footer>&copy; 2016 Camper Cat</footer>
</body>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15433
1,"TITLE: Counting Cards BODY: Challenge [Counting Cards](https://www.freecodecamp.com/challenges/counting-cards) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```javascript

var count = 0;

function cc(card) {
  // Only change code below this line
  switch(card) {
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  count+=1;
  break;
      
 
  case 10:
  case 'J':
  case 'Q':
  case 'K':
  case 'A':
  count-=1;
  break;
      
      
  }
  
  return count + (count  > 0  ?  "" Bet "" : "" Hold "");
  // Only change code above this line
}

// Add/remove calls to test your function.
// Note: Only the last will display
cc(2); cc(3); cc(7); cc('K'); cc('A');

```  i got 0 hold but it didnt go through

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15437
5,"TITLE: Pass allowed with wonkey result, Add Font Awesome Icons to our Buttons(76) BODY: This is just a PSA, since I can pass now.

On challenge 76  Add Font Awesome Icons to our Buttons, I created one thumbs up in the like button, with the word like beside it and couldn't pass. The screen shot below shows what was required to advance. As you can see, there are two thumbs up in the like button... weird. 

I just made this since I figured you would want to know.

#### Challenge Name
https://www.freecodecamp.com/challenges/add-font-awesome-icons-to-our-buttons


#### Issue Description
On challenge 76  Add Font Awesome Icons to our Buttons, I created one thumbs up in the like button, with the word like beside it and couldn't pass. The screen shot below shows what was required to advance. As you can see, there are two thumbs up in the like button... weird. 

As I said, I originally had it set up so there was only one thumbs up in the like button, it seemed very correct, but it wouldn't register that there was a thumb in the button. 


#### Browser Information
Firefox

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
      <button class=""btn btn-block btn-primary fa fa-thumbs-up"">
        <i class=""fa"" ""fa-thumbs-up""></i>
           Like
      </button>

**JUST FOR REFERENCE** Here is what the code looked like to get just one thumbs-up. I know it's wonkey too,(too many parentheses) but it looks better in practice!! : D

The real issue is why did I pass with two thumbs up? (since I know I did something wrong, in retrospect I know it was adding ""fa fa-thumbs-up"" to both the first and second class...)





![screenshot_codecamp](https://user-images.githubusercontent.com/29514150/27286236-66de04ec-54cd-11e7-9877-5dd33114787d.png)

MORE INFO:

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15440
4,"TITLE: Tests for Basic Node and Express doesn't work. [Beta] BODY: http://beta.freecodecamp.com/en/challenges/basic-node-and-express/meet-the-node-console test doesn't work, https://github.com/freeCodeCamp/boilerplate-express/ doesn't work as well.

Here's the error using glitch and my machine.

```TypeError: Cannot read property 'stack' of undefined
    at Object.setupBackgroundApp (/Users/mihailkirillov/Documents/boilerplate-express/node_modules/fcc-express-bground/index.js:149:31)
    at Object.<anonymous> (/Users/mihailkirillov/Documents/boilerplate-express/server.js:25:9)
    at Module._compile (module.js:570:32)
    at Object.Module._extensions..js (module.js:579:10)
    at Module.load (module.js:487:32)
    at tryModuleLoad (module.js:446:12)
    at Function.Module._load (module.js:438:3)
    at Module.runMain (module.js:604:10)
    at run (bootstrap_node.js:389:7)
    at startup (bootstrap_node.js:149:9)```
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15442
1,"TITLE: Feedback on page ""Basic Front End Development Projects"" / ""Get Set for our Front End Development Projects"" BODY: #### Get Set for our Front End Development Projects
[https://www.freecodecamp.com/challenges/get-set-for-our-front-end-development-projects](https://www.freecodecamp.com/challenges/get-set-for-our-front-end-development-projects)


#### Issue Description
Directions on the page are no longer explicit enough.

Codepen has revised the CSS inclusion list of versions so that saying one should apply ""Bootstrap"" is no longer explicit, since it includes Bootstrap versions 3 and 4.

> Click the gear in the upper left hand corner of the CSS box, then scroll down to ""Quick add"" and choose Bootstrap. Now give your h1 element the class of text-primary to change its color and prove that Bootstrap is now available.



#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Google Chrome, 58.0.3029.110 (Official Build) (64-bit) 
* Operating System: MacOS 10.12.5
* MacBook Pro laptop 

#### Screenshot
Codepen quick add option image:
![image](https://user-images.githubusercontent.com/3085716/27313300-3da6d72a-553b-11e7-854f-4afc52d98500.png)


#### ps - creating this in response from a received email sent by 

> ArielLeslie (totally not a bot) 
> June 19
> If there isn't one already, please create a GitHub Issue.

Forum issue was initially created at [https://forum.freecodecamp.com/t/feedback-on-page-basic-front-end-development-projects-get-set-for-our-front-end-development-projects/128511?u=chuckthenerd](https://forum.freecodecamp.com/t/feedback-on-page-basic-front-end-development-projects-get-set-for-our-front-end-development-projects/128511?u=chuckthenerd)",https://github.com/freeCodeCamp/freeCodeCamp/issues/15449
3,"TITLE: FreeCodeCamp Badges BODY: I have been talking with @QuincyLarson about the possibility of a badge system for FCC. There are a few old issues discussing this... #9108 #604 #1296 #913 but they are closed so I thought I would open up a new one and look to actually put this into action.

I think using Mozilla Open Badges is a good idea. 

So, my initial thoughts are different badges for certain tasks or achievements throughout the map, but keep it totally separate to the points system which I know there is discussion about at the moment.

Badges you wont get as often as points, so it would add a new level of reward on top of the points system.

Here is the design idea I had...

<div align=""center"">

![fcc_badges](https://user-images.githubusercontent.com/13764272/27394078-d5157748-56a2-11e7-9bc6-305053c53bc4.jpg)

</div>

So essentially, the harder the task you completed, or better the achievement, the more stars on the badge, going from 1 - 5. 

Obviously there can be lots more achievements along the way, so there could be badges for:

- Completing your first challenge
- Completing a particular set of challenges
- Completing a particular set of projects
- Completing all the projects

That is the basic idea anyway. I have not looked into how hard this will be to implement, but I reckon I could have a good crack at it. I just wanted to get some feedback and make sure I am heading in the right direction before I make a start. 
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15467
3,TITLE: Border-radius displays as right angle BODY: Just a heads up that the code that passes the test has no visible effect on the element in the preview box. Is SASS just not working at this point on FCC beta?,https://github.com/freeCodeCamp/freeCodeCamp/issues/15470
4,"TITLE: Challenge [use-class-syntax-to-define-a-constructor-function] passes with incorrect solution BODY: Challenge [use-class-syntax-to-define-a-constructor-function](http://beta.freecodecamp.com/en/challenges/es6/use-class-syntax-to-define-a-constructor-function) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```js


/* Alter code below this line */
class Vegetable {
  
}
/* Alter code above this line */
const carrot = new Vegetable('carrot');
console.log(carrot.name); // => should be 'carrot'

```
the above code will pass even though console.log(carrot.name) returns undefined
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15472
2,"TITLE: its not going further i wrote the code right BODY: Challenge [Nest an Anchor Element within a Paragraph](https://www.freecodecamp.com/challenges/nest-an-anchor-element-within-a-paragraph) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```html

<link href=""https://fonts.googleapis.com/css?family=Lobster"" rel=""stylesheet"" type=""text/css"">
<style>
  .red-text {
    color: red;
  }

  h2 {
    font-family: Lobster, Monospace;
  }

  p {
    font-size: 16px;
    font-family: Monospace;
  }

  .thick-green-border {
    border-color: green;
    border-width: 10px;
    border-style: solid;
    border-radius: 50%;
  }

  .smaller-image {
    width: 100px;
  }
</style>

<h2 class=""red-text"">CatPhotoApp</h2>
<p>view more  <a href=""http://www.freecatphotoapp.com"">cat photos</a>cat photos</p>

<img class=""smaller-image thick-green-border"" src=""https://bit.ly/fcc-relaxing-cat"" alt=""A cute orange cat lying on its back. "">

<p class=""red-text"">Kitty ipsum dolor sit amet, shed everywhere shed everywhere stretching attack your ankles chase the red dot, hairball run catnip eat the grass sniff.</p>
<p class=""red-text"">Purr jump eat the grass rip the couch scratched sunbathe, shed everywhere rip the couch sleep in the sink fluffy fur catnip scratched.</p>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15477
1,"TITLE: ""Hello World"" Run Test issue on Win 10 Edge Browser BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
[Hello World](https://www.freecodecamp.com/challenges/say-hello-to-html-elements)


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
I've been using the site via Microsoft Edge without issue up until the [Hello World](https://www.freecodecamp.com/challenges/say-hello-to-html-elements) page. Entering the code for ""Hello World"", and clicking on either ""Run Test"" or ""ctrl+enter"" does nothing. I thought I was going crazy for a bit, but both operations on Firefox 54.0 perform perfectly. I'll be using firefox for now, but I thought I should bring this up.


#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Microsoft Edge 40.15063.0.0
* Operating System: Windows 10 Home
* Mobile, Desktop, or Tablet: Razer Blade 2015

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js
<h1>Hello World</h1>



```
#### Screenshot
<!-- Add a screenshot of your issue -->
![hello](https://user-images.githubusercontent.com/5152229/27416319-94f5045c-56c1-11e7-897a-1353732f2138.JPG)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15478
4,"TITLE: Issue: Not registering the task is complete BODY: Challenge [Quoting Strings with Single Quotes](https://www.freecodecamp.com/challenges/quoting-strings-with-single-quotes) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.109 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
```javascript

var myStr = 'This string has ""double quotes"" in it. And ""probably"" lots of them.';



```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15480
2,"TITLE: Cant' understand how we are going to target 2nd child of 'well' if we have not mentioned element 'well' anywhere in the query.. BODY: Challenge [Target a Specific Child of an Element Using jQuery](https://www.freecodecamp.com/challenges/target-a-specific-child-of-an-element-using-jquery) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

My code:
html

<script>
  $(document).ready(function() {
    $(""#target1"").css(""color"", ""red"");
    $(""#target1"").prop(""disabled"", true);
    $(""#target4"").remove();
    $(""#target2"").appendTo(""#right-well"");
    $(""#target5"").clone().appendTo(""#left-well"");
    $(""#target1"").parent().css(""background-color"", ""red"");
    $(""#right-well"").children().css(""color"", ""orange"");
 ------->   $("".target:nth-child(2)"").addClass(""animated bounce"");

  });
</script>

<!-- Only change code above this line. -->

<div class=""container-fluid"">
  <h3 class=""text-primary text-center"">jQuery Playground</h3>
  <div class=""row"">
    <div class=""col-xs-6"">
      <h4>#left-well</h4>
      <div class=""well"" id=""left-well"">
        <button class=""btn btn-default target"" id=""target1"">#target1</button>
        <button class=""btn btn-default target"" id=""target2"">#target2</button>
        <button class=""btn btn-default target"" id=""target3"">#target3</button>
      </div>
    </div>
    <div class=""col-xs-6"">
      <h4>#right-well</h4>
      <div class=""well"" id=""right-well"">
        <button class=""btn btn-default target"" id=""target4"">#target4</button>
        <button class=""btn btn-default target"" id=""target5"">#target5</button>
        <button class=""btn btn-default target"" id=""target6"">#target6</button>
      </div>
    </div>
  </div>
</div>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15496
5,"TITLE: Beta: ES6: Create an Export Fallback with export default BODY: Challenge [create-an-export-fallback-with-export-default](https://beta.freecodecamp.com/en/challenges/es6/create-an-export-fallback-with-export-default) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.86 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

The code below is what the test is currently expecting, but default exports cannot be used with var, let, or const
[Ref here under 'using default export'](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export#Using_the_default_export)
```js

export default const subtract = (x,y) => {return x - y};

assert(code.match(/export\s+default\s+const\s+subtract\s+=\s+\(x,y\)\s+=>\s+{return\s+x\s-\s+y;}/ig))

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15507
2,"TITLE: Sticky Highlighting on 'Community' Nav Bar Button BODY: On beta/staging, if you click the community button on the nav bar, it remains highlighted even after you navigate away and the menu closes. I believe this is unintentional and if the menu is not open, it should not remain highlighted in the navbar. 

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15509
2,"TITLE: Bug in Build a Recipe Box reference implementation BODY: #### Challenge Name
[Build a Recipe Box](https://www.freecodecamp.com/challenges/build-a-recipe-box)


#### Issue Description

Steps to reproduce:

1. Visit reference implementation at: https://codepen.io/FreeCodeCamp/full/xVXWag/
2. Open one of the recipes
3. Click the recipe's ""Edit"" button
4. Change the recipe's name
5. Click ""Edit Recipe"" to save

Current behavior: a **duplicate** recipe with the changed name is **created**, and the old one remains there with the same name as before.

Expected behavior: only the name of the recipe is changed, and no new recipe is created.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15590
4,"TITLE: Sass Use @each to map over items in a list BODY: <!-- freeCodeCamp Issue Template -->
I can entering in correct code in Sass Use @each to map over items in a list but not passing the tests.

#### Challenge Name
<!-- Insert link to challenge below -->
https://beta.freecodecamp.com/en/challenges/sass/use-each-to-map-over-items-in-a-list

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->

This code works on codepen. but not in beta fcc. also, did not see $key syntax in @each section of Sass Docs.  the $key syntax did not work for me on codepen either. thanks.
#### Browser Information
<!-- Describe your workspace in which you are having issues-->
* Browser Name, Version: chrome latest version
* Operating System: Version 59.0.3071.91 (Official Build) (64-bit)
* Mobile, Desktop, or Tablet: chromebook acer 11

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```scss
@each $color in blue,black,red {
  .${$color}-bg {
    background-color: $color;
}
}


```
#### Screenshot
<!-- Add a screenshot of your issue -->
![screenshot 2017-06-23 at 6 47 51 pm](https://user-images.githubusercontent.com/28043421/27504720-7d88595c-5844-11e7-9d5d-5c046c681276.png)
![screenshot 2017-06-23 at 6 49 00 pm](https://user-images.githubusercontent.com/28043421/27504732-aa0808b0-5844-11e7-9331-568039999ed6.png)


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15510
3,"TITLE: Sass  Apply a Style Until a Condition is Met with @while BODY: Challenge [apply-a-style-until-a-condition-is-met-with-while](https://beta.freecodecamp.com/en/challenges/sass/apply-a-style-until-a-condition-is-met-with-while) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; CrOS x86_64 9460.60.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.91 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.
I am simply not passing the test even though code is valid and checked on codepen.  The challenges were fine until i hit the @for directive so far @for @each and now @while all wont pass me.
![screenshot 2017-06-23 at 7 00 30 pm](https://user-images.githubusercontent.com/28043421/27504801-437e0e76-5846-11e7-8660-792d650e3a77.png)


```html


<style>
 $x: 1;
  @while $x <= 10 {
    .text-${$x} { font-size: 5px * $x;}
    $x: $x + 1;
  }
  
  
</style>

<p class=""text-1"">Hello</p>
<p class=""text-2"">Hello</p>
<p class=""text-3"">Hello</p>
<p class=""text-4"">Hello</p>
<p class=""text-5"">Hello</p>
<p class=""text-6"">Hello</p>
<p class=""text-7"">Hello</p>
<p class=""text-8"">Hello</p>
<p class=""text-9"">Hello</p>
<p class=""text-10"">Hello</p>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15511
4,"TITLE: Create static page to replace current ""How our Nonprofit Projects Work"" page BODY: In #15474 Quincy suggested creating a separate issue for any pages that could potentially be factored out as static pages. I believe the current [How our Nonprofit Projects Work](https://www.freecodecamp.com/how-nonprofit-projects-work) page could be factored out as a static page. 

I'd like to work on this issue if it's approved.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15521
4,"TITLE: Move from freecodecamp.com to freecodecamp.org BODY: Since we're a donor-supported nonprofit, we've long intended to transition from freeCodeCamp.com  to freeCodeCamp.org. Since we're bracing for a lot more campers when we release our new certificates and our Guides section, we should go ahead and make the transition now.

To preserve our standings in Google results, we'll want to [use 301 redirects throughout](https://www.hobo-web.co.uk/how-to-change-domain-names-keep-your-rankings-in-google/) and minimize broken links.

Here's what will be necessary:
- [x] Transition medium.freecodecamp.com
- [x] Transition forum.freecodecamp.com

- [x] Update any references within our codebase

- [x] Spin up new instance of production
    - [x] Add Facebook auth token
    - [x] Add GitHub auth token
    - [x] Add Google auth token
    - [x] Add Twitter auth token
    - [x] Add nginx route handler

- [x] Move dns to cloudflare
  - [x] Replicate previous dns records
  - [ ] Add .com to .org redirect to current production
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15523
3,"TITLE: error on api of fcc BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->



#### Challenge Name
Image Search Abstraction Layer
https://www.freecodecamp.com/challenges/image-search-abstraction-layer

#### Issue Description
when you click on the link to the cats images it return an error


#### Screenshot
<!-- Add a screenshot of your issue -->


![image](https://user-images.githubusercontent.com/20336964/27572207-2df20754-5b13-11e7-8c50-ca81a5902452.png)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15547
2,"TITLE: Lessons that I've Taken are Not Showing as Completed! BODY: I have taken hundreds of lessons here on Free Code Camp. But when I go to the ""Map"" menu, none of the lessons that I have taken previously are showing as greyed out and checkmarked! I'm afraid that this might affect me getting my certification. Can anyone tell me why this is happening? I need an explanation now!


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15560
4,"TITLE: Applied Visual Design: Adjust the background-color Property of Text BODY: Hi there,

As someone who often uses the ""night mode"" option for Free Code Camp I found the visually it was hard to distinguish the subtle changes in night mode.

You may want to also include a colour modifier to the background instead of using a shade to have it better stand out in both Day/Night modes.



Challenge [adjust-the-backgroundcolor-property-of-text](https://beta.freecodecamp.com/en/challenges/applied-visual-design/adjust-the-backgroundcolor-property-of-text) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<style>
  h4 {
    text-align: center;
    padding: 10px;
    background-color: rgba(45, 45, 45, 0.1)
    
  }
  p {
    text-align: justify;
  }
  .links {
    text-align: left;
    color: black;
  }
  .fullCard {
    width: 245px;
    border: 1px solid #ccc;
    border-radius: 5px;
    margin: 10px 5px;
    padding: 4px;
  }
  .cardContent {
    padding: 10px;
  }
  .cardText {
    margin-bottom: 30px;
  }
</style>
<div class=""fullCard"">
  <div class=""cardContent"">
    <div class=""cardText"">
      <h4>Alphabet</h4>
      <hr>
      <em><p>Google was founded by Larry Page and Sergey Brin while they were <u>Ph.D. students</u> at <strong>Stanford University</strong>.</p></em>
    </div>
    <div class=""cardLinks"">
      <a href=""https://en.wikipedia.org/wiki/Larry_Page"" target=""_blank"" class=""links"">Larry Page</a><br><br>
      <a href=""https://en.wikipedia.org/wiki/Sergey_Brin"" target=""_blank"" class=""links"">Sergey Brin</a>
    </div>
  </div>
</div>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15565
4,"TITLE: Firefox doesn't play animations on first try BODY: To reproduce (on Firefox):
Reset challenge
Paste in correct code and Run Tests

Expect Behavior: screen shake and button bounce
Actual Behavior: no animations

Fixed after refreshing page.  The animations start after the page is refreshed and the ""Run Tests"" button is pushed.

I had the same problem on the previous jQuery challenge (Target HTML Elements with Selectors Using jQuery).

Challenge [target-elements-by-class-using-jquery](http://beta.freecodecamp.com/en/challenges/jquery/target-elements-by-class-using-jquery) has an issue.
User Agent is: <code>Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:54.0) Gecko/20100101 Firefox/54.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```html


<script>
  $(document).ready(function() {
    $(""button"").addClass(""animated bounce"");
    $("".well"").addClass(""animated shake"");
  });
</script>

<!-- Only change code above this line. -->

<div class=""container-fluid"">
  <h3 class=""text-primary text-center"">jQuery Playground</h3>
  <div class=""row"">
    <div class=""col-xs-6"">
      <h4>#left-well</h4>
      <div class=""well"" id=""left-well"">
        <button class=""btn btn-default target"" id=""target1"">#target1</button>
        <button class=""btn btn-default target"" id=""target2"">#target2</button>
        <button class=""btn btn-default target"" id=""target3"">#target3</button>
      </div>
    </div>
    <div class=""col-xs-6"">
      <h4>#right-well</h4>
      <div class=""well"" id=""right-well"">
        <button class=""btn btn-default target"" id=""target4"">#target4</button>
        <button class=""btn btn-default target"" id=""target5"">#target5</button>
        <button class=""btn btn-default target"" id=""target6"">#target6</button>
      </div>
    </div>
  </div>
</div>

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15568
4,"TITLE: Change color/background color in Night Mode preview BODY: Challenge [create-visual-balance-using-the-textalign-property](http://beta.freecodecamp.com/en/challenges/applied-visual-design/create-visual-balance-using-the-textalign-property) has an issue.
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/603.2.4 (KHTML, like Gecko) Version/10.1.1 Safari/603.2.4</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

Please, is it possible to change
a) font color or
b) background color of preview window 
in the Night Mode? 
The black text on dark grey background is pretty hard to read (and especially with lower contrast - which is widely used at night)

Screenshot here: [http://vlastapolach.cz/download/nightMode.png](http://vlastapolach.cz/download/nightMode.png)

Thank you",https://github.com/freeCodeCamp/freeCodeCamp/issues/15572
1,"TITLE: React : Challenge no. 47  BODY: The  challenge ""Use Array.map() to dynamically render elements"" has a problem. The solution is correct, and it shows a error ""Test case not passed"", for the last case. Even, pressing the ""Get solution code button"" didn't worked. Everything was working, according to the challenge.

#### Screenshot
![fcc](https://user-images.githubusercontent.com/29104610/27764327-50763ca6-5eb4-11e7-8132-73358a29003e.png)



",https://github.com/freeCodeCamp/freeCodeCamp/issues/15577
2,"TITLE: Missing tests. Poss related to issue #13498 BODY: #### Challenge Name
Basic Algorithm Scripting: Where do I Belong
[http://beta.freecodecamp.com/en/challenges/basic-algorithm-scripting/where-do-i-belong](http://beta.freecodecamp.com/en/challenges/basic-algorithm-scripting/where-do-i-belong)



#### Issue Description
I have written the code correctly.  On printing the output to the console, I see that it does NOT test the following:

getIndexToIns([2, 5, 10], 15) should return 3.
getIndexToIns([2, 5, 10], 15) should return a number.
getIndexToIns([], 1) should return 0.
getIndexToIns([], 1) should return a number.

The last item tested (output from my console) is:

(3) [2, 10, 20]
VM820:18 num = 19
VM820:19 item = 2
VM820:20 index = 2

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome
* Operating System: Windows 10
* Mobile, Desktop, or Tablet: Laptop

#### Your Code

Not relevant.



",https://github.com/freeCodeCamp/freeCodeCamp/issues/15578
2,"TITLE: Functional Programming Challenges introduced later BODY: In the Map for the Beta, there are a number of exercises in sections before Functional Programming is introduced that use Map, reduce, or filter, and others that are easier solved with them. Either the Functional Programming section should be introduced sooner, or exercises covering these functions should appear earlier.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15579
3,"TITLE: Use Colorblind-OK colors in box model challenges  BODY: #### Challenge Name
https://www.freecodecamp.com/challenges/adjusting-the-padding-of-an-element and the subsequent challenges


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
These challenges rely on the user being able to discern between red and green, and red-green colorblindness is common. We should change these colors to colors that are less likely to be confused, and be sure to update the copy and tests for these challenges where necessary.

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15580
5,"TITLE: Manage a Book Trading Club Application Error BODY: __Manage a Book Trading Club__  Example Application not working.

It was working but when i've tried to add a book with a wrong title it crashed (the dummy title was something like 'jhasdghfdk')...

@clnhll Can you check this one out?

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15583
2,"TITLE: Recieveing error stating that i used a case, switch, or if else statement but did not use any of them. BODY: Challenge [using-objects-for-lookups](http://beta.freecodecamp.com/en/challenges/basic-javascript/using-objects-for-lookups) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.


```js


// Setup
function phoneticLookup(val) {
  var result = """";

  // Only change code below this line
  var lookup = {
    ""alpha"": ""Adams"",
       ""bravo"": ""Boston"",
       ""charlie"": ""Chicago"",
      ""delta"": ""Denver"",
      ""echo"": ""Easy"",
    ""foxtrot"": ""Frank""
  };
  
  result = lookup[val];

 
  // Only change code above this line
  return result;
}

// Change this value to test
phoneticLookup(""charlie"");

```
my code 
// Setup
function phoneticLookup(val) {
  var result = """";

  // Only change code below this line
  var lookup = {
    ""alpha"": ""Adams"",
       ""bravo"": ""Boston"",
       ""charlie"": ""Chicago"",
      ""delta"": ""Denver"",
      ""echo"": ""Easy"",
    ""foxtrot"": ""Frank""
  };
  
  result = lookup[val];

 
  // Only change code above this line
  return result;
}

// Change this value to test
phoneticLookup(""charlie"");

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15585
5,"TITLE: Use a Mixin Under Object Oriented Programming FCC Beta BODY: Challenge [use-a-mixin-to-add-common-behavior-between-unrelated-objects](https://beta.freecodecamp.com/en/challenges/object-oriented-programming/use-a-mixin-to-add-common-behavior-between-unrelated-objects) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.

The condition to solve the challenge requires the mixin to be named ""Mixing"", but it was said that the name should be ""Mixin"". Just a typo in the assert probably.


let bird = {
  name: ""Donald"",
  numLegs: 2
};

let boat = {
  name: ""Warrior"",
  type: ""race-boat""
};

// Add your code below this line
let glideMixing = function(obj){
  obj.glide = function(){
    return""I'm soaring!"";
  };
};

glideMixing(bird);
glideMixing(boat);




```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15591
5,"TITLE: Testing bug BODY: Challenge [use-a-retina-image-for-higher-resolution-displays](http://beta.freecodecamp.com/en/challenges/responsive-web-design-principles/use-a-retina-image-for-higher-resolution-displays) has an issue.
User Agent is: <code>Mozilla/5.0 (Windows NT 10.0; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0</code>.
Please describe how to reproduce this issue, and include links to screenshots if possible.
![error1](https://user-images.githubusercontent.com/7410189/27805906-62bc04ca-6005-11e7-818c-6d56cb9b7386.png)

```html


<style>
  img {height:100px;width:100px;}
</style>

<img src=""https://s3.amazonaws.com/freecodecamp/FCCStickers-CamperBot200x200.jpg"" alt=""freeCodeCamp sticker that says 'Because CamperBot Cares'"">

```

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15592
2,"TITLE: JSON & API curriculum doesn't prepare students for Intermediate Front-End Challenges BODY: #### JSON & APIs  --> Intermediate Front-End Projects

#### Issue Description
I've been leading my students through the FCC exercises. Thanks for the amazing curriculum! Today, I was going through the JSON & API section to prepare for our next class. I looked ahead to the first Intermediate Front-End Project, and see that the students are to use the Twitter API. FCC hasn't provided instructions or tutorials on API keys, keeping API keys secret, how to hit a live API endpoint, how to code an HTTP request, etc. (except for the limited cat API example). The way the curriculum is currently structured, it seems like a huge leap from the exercises provided to using the Twitter API. I'm very much in favor of letting the students puzzle things out on their own for awhile, but there seem to be some major concepts that are missing. Is this something FCC is already working on? Thanks!

Another student has discovered this and posted in the forum as well: https://forum.freecodecamp.org/t/where-to-learn-about-api-weather-api-resources-needed/80090/5


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15594
5,"TITLE: Archive and close Core Team chat room in favor of Contributors room BODY: In the past, we’ve talked about merging the core team room into the https://gitter.im/FreeCodeCamp/Contributors room. Now is as good a time as any to make this change.

I propose we all start chatting in https://gitter.im/FreeCodeCamp/Contributors instead.

By the way, all core team members who have set their visibility to public are publicly visible here: https://github.com/orgs/freeCodeCamp/people

Hope to see you all in https://gitter.im/FreeCodeCamp/Contributors

- [ ] Archive the [Core Team room](https://gitter.im/FreeCodeCamp/CoreTeam) using the Gitter API, like we did here https://github.com/freeCodeCamp/freeCodeCamp/issues/8418
- [ ] Upload the resulting TSV file to https://github.com/freeCodeCamp/gitter-history
- [ ] Once we're certain everything is properly backed up, Delete the Core Team room itself",https://github.com/freeCodeCamp/freeCodeCamp/issues/15595
5,"TITLE: Accessing Nested Objects - get a hint - link private? BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
Accessing Nested Objects (https://www.freecodecamp.com/challenges/accessing-nested-objects)

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
The get a hint button is linked to a thread that's private.

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Safari
* Operating System: macOS
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js
Not relevant to the issue


```
#### Screenshot
<!-- Add a screenshot of your issue -->
![Image of issue](http://i.imgur.com/CHBslHD.png)

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15609
4,"TITLE: issue found inspite the right code (target even number elements using jQuery) BODY: ![untitled](https://user-images.githubusercontent.com/30015751/27991725-9dc6e368-649d-11e7-85fa-f15a742c3ef2.jpg)
please find if something is wrong and help me out!",https://github.com/freeCodeCamp/freeCodeCamp/issues/15610
3,"TITLE: Counting Cards is unclear or too difficult BODY: According to Google Analytics, the [Counting Cards challenge](https://www.freecodecamp.com/challenges/counting-cards) is way too hard, and is taking campers an average of 8 minutes to finish (if they finish - a lot of them seem to give up). 

According to this table, campers spend more time on it than they do on the algorithm challenges.

![](https://www.evernote.com/l/Ar9YCZe5amdJxo7PxclM03fMCHcDIQYSKZwB/image.png)

We need to either reword this or simplify the challenge so it can be completed in closer to 3 minutes. Otherwise, we should move it back to the algorithm section.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15615
3,"TITLE: Profile Lookup is unclear or too difficult BODY: According to Google Analytics, the [Profile Lookup challenge](https://www.freecodecamp.com/challenges/profile-lookup) is way too hard, and is taking campers an average of 7 minutes and 25 seconds to finish (if they finish - a lot of them seem to give up). 

According to this table, campers spend more time on it than they do on most of the algorithm challenges.

![](https://www.evernote.com/l/Ar9YCZe5amdJxo7PxclM03fMCHcDIQYSKZwB/image.png)

We need to either reword this or simplify the challenge so it can be completed in closer to 3 minutes. Otherwise, we should move it back to the algorithm section.
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15616
4,"TITLE: beta HTML does not preload for any challenge BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
All challenges on the beta site I've encountered thus far (I'm up to #106).

Name of current challenge is ""Applied Visual Design: Use the CSS Transform scale Property to Change the Size of an Element"" but like I said, applies to all on beta. subdomain.

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Every time I progress to the next challenge, the challenge's HTML is NOT preloaded - I have to click on ""Reset

"" for the challenge's HTML to show up on the right hand side (previous to any changes for the challenge, I mean).


#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome, version 59.0.3071.115 (Official Build) (64-bit)
* Operating System: Windows 8.1
* Mobile, Desktop, or Tablet: Desktop

#### Screenshot
<!-- Add a screenshot of your issue -->
Before I hit ""Reset""
![beta-site-html-not-loading-issue](https://user-images.githubusercontent.com/6607799/28024003-22e1937e-6555-11e7-823f-12b4a18a5cf1.jpg)
After I hit ""Reset""
![screenshot of applied visual design- use the css transform scale property to change the size of an element - freecodecamp](https://user-images.githubusercontent.com/6607799/28024183-90f2623a-6555-11e7-9862-1e6331da48d1.jpg)


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15620
1,"TITLE: Return statement  not displaying in Beta BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
For all challenges.

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
In JS exercise console.log() is not displaying anything and also not displaying anything while using return statement also.  This is a very helpful feature which helps in debugging and also seeing what the results are and what should be actual results. Instead here it is always displaying the same conditions in test-cases which I think is not necessary.    

#### Browser Information
<!-- Describe your workspace in which you are having issues-->
All browsers and OS

#### Screenshot
<!-- Add a screenshot of your issue -->


![image](https://user-images.githubusercontent.com/8538409/28048284-90a05158-660d-11e7-93f4-5963c1ff460d.png)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15623
1,"TITLE: Display meaningful placeholder usernames in for new signups BODY: Currently, the uuid has gotten very long. It's not a friendly identifier for users when they haven't yet linked a GitHub account.

![image](https://user-images.githubusercontent.com/1884376/28053337-80966dae-662d-11e7-9750-47e2335773c2.png)


~~We should rather display an email associated here as a place holder.~~ We should not display email.

We should have something meaningful and memorable.
Note: This DOES NOT mean we are changing the user id. This issue is just about the display fields on the rendered page.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15625
1,"TITLE: Invisible Challenge in Basic Algorithm Scripting (Beta) BODY: 
#### Challenge Name
Unconfirmed, but believed to be Slice and Splice --> Challenge can be found under [Basic Algorithm Scripting](http://beta.freecodecamp.com/en/map)


#### Issue Description
The challenge under the ``Title Case a Sentence`` challenge is missing. This could be a bug or it could be something that's worked on, but I'd rather bring something already known to attention rather than leave it there. When inspected, there appears to be an ``<a>`` tag to slice and spice.


#### Browser Information
* Browser Name, Version: Chrome 59.0.3071.115 
* Operating System:  MacOSX Sierra
* Mobile, Desktop, or Tablet: Desktop

#### Screenshot
![image](https://user-images.githubusercontent.com/24515342/28071024-d08399e2-661c-11e7-9225-5f8b97e28cb8.png)
![image](https://user-images.githubusercontent.com/24515342/28071220-4c73bb54-661d-11e7-933f-42fd09491dd7.png)


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15626
3,"TITLE: Accessibility: Windows and Mac: Screen Reader Will Not Speak the Edit Box in the Code Window BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
For all challenges, when a screen reader user enters the code window and presses any navigation key, such as arrows, PageUp, PageDown, etc., the screen reader says the word blank. The only way for a screen reader user to work with code is select all of the code, have a text editor on the computer ready to receive the code, paste, alter code, select all, copy or cut to clipboard, go to the site, and paste.

Platforms tried so far, Windows 10 with NVDA and Firefox, and Mac, using VoiceOver and Safari.

Interestingly, both set-ups speak the selected text in the edit window on the site before the user puts it on the clipboard.

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: 
* Operating System: 
* Mobile, Desktop, or Tablet: 

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js



```
#### Screenshot
<!-- Add a screenshot of your issue -->


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15638
5,"TITLE: Screen Reader Can't Get to the Button To Confirm a Code Reset BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Using Mac, Safari, and VoiceOver or PC running  Windows 10 with Firefox and NVDA, enter a challenge on the site and press the Reset Code button.

The result is that the content appears that asks the user to confirm that they want to reset the code, but the screen reader user cannot read normally to the control that resets the edit window nor can the user tab to the control and activate it with the keyboard without using screen reader reading keys (arrows, PageUp, etc. for PC, and Option-CTRL-arrows on Mac for Voiceover).

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: 
* Operating System: 
* Mobile, Desktop, or Tablet: 

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js



```
#### Screenshot
<!-- Add a screenshot of your issue -->


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15639
5,"TITLE: `box-sizing` for adding border css challenge BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
Live:
https://www.freecodecamp.org/challenges/add-borders-around-your-elements
Corresponding beta challenge:
https://beta.freecodecamp.com/en/challenges/basic-css/add-borders-around-your-elements

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
At least in the live version, all the ""kitty app"" stuff uses bootstrap, which sets `box-sizing` to `border-box` - this isn't explained, so could be confusing for newbies because the behavior is different from the standard (especially noticeable with huge 10px borders like in this challenge).

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome 55.0.2883.87
* Operating System: Win 7
* Mobile, Desktop, or Tablet: Desktop",https://github.com/freeCodeCamp/freeCodeCamp/issues/15644
3,"TITLE: Change mention of ""operator"" to ""notation"" in Object Access BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
https://www.freecodecamp.org/challenges/accessing-objects-properties-with-the-dot-operator

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
[Quoted](https://github.com/freeCodeCamp/freeCodeCamp/issues/6298#issuecomment-315369258) from @4mifix (bolded text was added for emphasis)

> The issue with this challenge is the Operator wording, **in Java most people know the word dot operator and in Javascript we use dot notation**. Basically the same thing but in this challenge for a beginner programmer the semantics can be confusing. With a little research and reading the difference becomes clear. I was confused about both until I did the research. .**Operator and .Notation slight difference but the challenge is about accessing Objects.** Dot operator originated in Java.

[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_Accessors) also uses the terminology of ""dot notation"", rather than ""dot operator"".

There is a nuance between the two, operator and notation, but I think for future use, it is an improvement. But as it was pointed out earlier, experienced programmers may be confused for a little bit when reading about this initially.

### Proposed Change

Change mentions of ""dot operator"" to ""dot notation"".

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome
* Operating System: macOS
* Mobile, Desktop, or Tablet: Laptop ",https://github.com/freeCodeCamp/freeCodeCamp/issues/15646
4,"TITLE: Find longest word in a string function naming BODY: #### Find the Longest Word in a String
<!-- Insert link to challenge below -->
https://beta.freecodecamp.com/en/challenges/basic-algorithm-scripting/find-the-longest-word-in-a-string

#### Issue Description
The function name `findLongestWord` is a little misleading as the challenge asks to return the length of the word not the word itself. How about `findLongestWordLength` instead?",https://github.com/freeCodeCamp/freeCodeCamp/issues/15652
2,"TITLE: Understanding Uninitialized Variables | Allows you to edit variable directly below allowed edits line. BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
Understanding Uninitialized Variables


#### Issue Description
The challenge allows me to skirt actually solving the challenge and edit the variable directly. This defeats the purpose of the challenge and should be updated as appropriate.  You should only be allowed to edit above the line otherwise a user may pass the challenge without understanding the actual concept.

#### Attribution
The user 'sonimadhuri' on Gitter pointed out this issue to me.

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Google Chrome
* Operating System: macOS
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
```
// Initialize these three variables
var a;
var b;
var c;

// Do not change code below this line

a = a + 1;
b = b + 5;
c = c + "" String!"";

var a = 6;
var b = 15;
var c = 'I am a String!';

```


#### Screenshot

<img width=""1280"" alt=""screen shot 2017-07-16 at 10 45 20 am"" src=""https://user-images.githubusercontent.com/8227641/28248554-661e63ec-6a14-11e7-8d98-7a68981730c5.png"">

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15657
2,"TITLE: Accessibility: Please add main landmark to indicate where main content starts  exercise screens for more efficient Navigation BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->


#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Using any screen reader, go to an exercise screen and navigate by landmark. There is no main landmark, so that the user can skim over the top portions of pages to get to the top of the exercise content quickly.

In Windows, using NVDA, use D to navigate downward and SHIFT+D to navigate upward..

On Mac, using VoiceOver, when on web content, use Option+CTRL+U to access  the rotor, use Left and Right Arrows to choose Landmark, and choose Up and Down arrows to navigate.

This symptom is also present in other screen readers. 

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: 
* Operating System: 
* Mobile, Desktop, or Tablet: 

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```js



```
#### Screenshot
<!-- Add a screenshot of your issue -->


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15658
4,"TITLE: [FCC Beta] Test suite failing on SASS Challenge (Use @each to Map Over Items in a List) BODY: #### Challenge Name
[Sass: Use @each to Map Over Items in a List](https://beta.freecodecamp.com/en/challenges/sass/use-each-to-map-over-items-in-a-list)


#### Issue Description
The test suite for this challenge should verify that:

- the `.blue-bg` class should have a `background-color` of blue,
- the `.black-bg` class should have a `background-color` of black,
- and the `.red-bg` class should have a `background-color` of red.

However, according to the 'pretty-fied' version of the test suite (extracted from the script in the html code of the webpage) of the challenge, it seems that it's testing for the `background-color` of the elements with the tags `<blue-bg>`, `<black-bg>` and `<red-bg>`. See for yourself:

```
""tests"": [
  ""assert(code.match(@each, 'message: Your code should use the @each code directive.');"",
  ""assert($('blue-bg').css('background-color') == 'rgb(0, 0, 255)', 'message: Your .blue-bg class should have a background-color of blue.');"",
  ""assert($('black-bg').css('background-color') == 'rgb(0, 0, 0)', 'message: Your .black-bg class should have a background-color of black.');"",
  ""assert($('red-bg').css('background-color') == 'rgb(255, 0, 0)', 'message: Your .red-bg class should have a background-color of red.');""
]
```
As you can see, the line `assert($('blue-bg').css('background-color') == 'rgb(0, 0, 255)` looks for html elements with the tag `<blue-bg>` and not the class name `.blue-bg`.

#### Browser Information
Chromium x86, Ubuntu 16.04

#### What I did to the cheat the test suites
Here's the code I submitted to trick 'em:
```
<style>

/* This would have worked if the SASS compiler on FCC worked  :/ */
@each $color in blue, black, red {
    .${$color}-bg { background-color: $color; }
  }
  
  /* Normally, the following hardcoded CSS code would have worked, unfortunately, the test suites are wrongly put together (they reference the blue-bg, black-bg and red-bg elements instead of the .blue-bg, .black-bg and .red-bg classes)... Oh well...
  .blue-bg {
    background-color: blue;
  }

  .black-bg {
    background-color: black;
  }

  .red-bg {
    background-color: red;
  }
  */

/*Test suite workaround... silly... */

  blue-bg {
    background-color: blue;
  }
  
  black-bg {
    background-color: black;
  }
  
  red-bg {
    background-color: red;
  }
  
  div {
    height: 200px;
    width: 200px;
  }
</style>

<div class=""blue-bg""></div>
<div class=""black-bg""></div>
<div class=""red-bg""></div>
<blue-bg></blue-bg>
<black-bg></black-bg>
<red-bg></red-bg>
```
I shamelessly inserted tags that don't exist just to pass the test!!!
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15659
5,"TITLE: Beta - Test Case Broken - Sass: Use @for to Create a Sass Loop  BODY: #### Challenge Name
<!-- Insert link to challenge below -->
http://beta.freecodecamp.com/en/challenges/sass/use-for-to-create-a-sass-loop?

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
The test case for this challenge is broken. 

SASS does not appear to be working for the in browser editor, as hitting submit doesn't properly show the SASS changes.

Using an editor like codepen that has sass configured will show that the code does what is instructed.

FCC says it fails these tests, but the code is correct, FCC is wrong.
Your .text-1 class should have a font-size of 10px.
Your .text-2 class should have a font-size of 20px.
Your .text-3 class should have a font-size of 30px.
Your .text-4 class should have a font-size of 40px.
Your .text-5 class should have a font-size of 50px.


#### Browser Information
<!-- Describe your workspace in which you are having issues-->
* Browser Name, Version:  Chrome
* Operating System:  Windows 10
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```

<style>
  @for $j from 1 to 6{
    .text-${$j} {font-size: 10px* $j};
  }
  
  
</style>

<p class=""text-1"">Hello</p>
<p class=""text-2"">Hello</p>
<p class=""text-3"">Hello</p>
<p class=""text-4"">Hello</p>
<p class=""text-5"">Hello</p>

```
#### Screenshot
<!-- Add a screenshot of your issue -->
![fcc](https://user-images.githubusercontent.com/8440420/28289172-a41ee9fe-6b0f-11e7-99ff-10b5a1aeb567.PNG)


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15662
2,"TITLE: Move Fahrenheit Variable Below Comment Line BODY: #### Convert Celsius to Fahrenheit
https://www.freecodecamp.org/challenges/convert-celsius-to-fahrenheit

#### Issue Description
There's an inconsistency between the forum solution to this module and the needed solution. In order to get the tests to pass, you need to modify the Fahrenheit variable, but it's above the comment that says to only modify code below that comment. 

My proposed solution is to update the content on the exercise so the variable is below the comment, so it would appear like this: 

```
function convertToF(celsius) {
  // Only change code below this line
  
  var fahrenheit 
  
  // Only change code above this line
  return fahrenheit;
}

// Change the inputs below to test your code
convertToF(30);
function convertToF(celsius) {
  var fahrenheit = (celsius * 9/5) + 32;
  // Only change code below this line
  
  // Only change code above this line
  return fahrenheit;
}

// Change the inputs below to test your code
convertToF(30);
```

Here's a link to the solution in the forum so you can see the discrepency: https://forum.freecodecamp.org/t/freecodecamp-challenge-guide-convert-celsius-to-fahrenheit/16806

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome
* Operating System: Mac OS Sierra
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
This is what I used to get the tests to pass. I had to modify ```var fahrenheit``` which is above the comment line. My sense is this is where a lot of the confusion from this exercise is coming from. 

```
function convertToF(celsius) {
  var fahrenheit = (celsius * 9/5) + 32;
  // Only change code below this line
  
  // Only change code above this line
  return fahrenheit;
}

// Change the inputs below to test your code
convertToF(30);
```
#### Screenshot
<!-- Add a screenshot of your issue -->
Notice how the comments between the exercise and the solution are not in the same place. This is what's creating the confusion because in order to solve the problem you need to modify the ```var``` that's above the comment in the exercise.  

<img width=""748"" alt=""screen shot 2017-07-18 at 10 55 35 pm"" src=""https://user-images.githubusercontent.com/136095/28348710-5e9f2526-6c0c-11e7-810c-281100deff74.png"">

<img width=""842"" alt=""screen shot 2017-07-18 at 10 56 14 pm"" src=""https://user-images.githubusercontent.com/136095/28348714-625f61f8-6c0c-11e7-9c93-5f80d486e6a4.png"">

",https://github.com/freeCodeCamp/freeCodeCamp/issues/15664
1,"TITLE: ActiveRecord::RecordNotUnique: Mysql2::Error: Duplicate entry '' for key 'PRIMARY': INSERT INTO ar_internal_metadata BODY: I recently upgraded to Rails 5.0.1 from 4.2.x, running with Ruby 2.4.0p0.  Upon attempting a db:migrate I encountered an issue with ar_internal_metadata, which appears to be incompatible with MySQL5.

To reproduce:

0. Drop the ar_internal_metadata table from the development database (if it's there).
1. Run ""bundle exec rake db:migrate""
2. Run it again.
3. On the second run (regardless of whether migrations are pending or not), this error is raised:

````
ActiveRecord::RecordNotUnique: Mysql2::Error: Duplicate entry '' for key 'PRIMARY': INSERT INTO ar_internal_metadata (created_at, updated_at) VALUES ('2017-04-30 20:49:17', '2017-04-30 20:49:17')
````

The ar_internal_metadata schema indicates to me that MySQL5 does seem to have a valid gripe: The primary key field is set up as not nil, but the default is nil. And, since it's a varchar(255) type, it can't auto-increment. Apparently, the ActiveRecord machinery is not providing a value for 'key'.

    mysql> desc ar_internal_metadata;
    +------------+--------------+------+-----+---------+-------+
    | Field      | Type         | nil | Key | Default | Extra |
    +------------+--------------+------+-----+---------+-------+
    | key        | varchar(255) | NO   | PRI | nil    |       |
    | value      | varchar(255) | YES  |     | nil    |       |
    | created_at | datetime     | NO   |     | nil    |       |
    | updated_at | datetime     | NO   |     | nil    |       |
    +------------+--------------+------+-----+---------+-------+

Here are the contents of ar_internal_metadata just before the second call to db:migrate:
    
    mysql> select * from ar_internal_metadata;
    +-----+-------+---------------------+---------------------+
    | key | value | created_at          | updated_at          |
    +-----+-------+---------------------+---------------------+
    |     | nil  | 2017-04-30 20:56:39 | 2017-04-30 20:56:39 |
    +-----+-------+---------------------+---------------------+



",https://github.com/rails/rails/issues/28949
4,"TITLE: ""Ask for help"" button that pre-populates forum post BODY: # User story
As a user, if I need help with a challenge, I can click a ""Ask for help on the forum"" button. A modal will pop up with the following text:

""If you've already tried [the Read-Search-Ask Method](https://forum.freecodecamp.org/t/the-read-search-ask-methodology-for-getting-unstuck/137307), then you can ask for help on the freeCodeCamp forum."" [Create a help post on the forum]

A new tab will open with a prep-populated forum post with: 
- the the title of my current challenge in the subject line
- the post body, which includes this:

#### What's happening
<!-- Describe any theories you may have about why your code isn't getting the challenge's tests to pass -->


#### My code so far
*this should be automatically populated and formatted*


#### My browser information
<!-- Describe your workspace in which you are having issues-->
User Agent is: <code>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36</code>.




# Discourse URL

Here's how to format a URL for creating a post on Discourse

`http://forum.freecodecamp.org/new-topic?title=**topic%20title**&body=**topic%20body**&category=help`

# UI element

Here's what the button should look like. This should be added to all views that have tests:

![](https://www.evernote.com/l/Ar8kFtBc42tICrz8ycUXkpCrIFT3Qak0mBoB/image.png)",https://github.com/freeCodeCamp/freeCodeCamp/issues/15669
1,"TITLE: Name attribute considered obsolete on anchor tags (Beta) BODY: <!-- freeCodeCamp Issue Template -->

<!-- Please provide as much detail as possible for us to fix your issue -->
<!-- Remove any heading sections you did not fill out -->

<!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
http://beta.freecodecamp.com/en/challenges/basic-html-and-html5/link-to-internal-sections-of-a-page-with-anchor-elements

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Above lesson,  instructs to use `name` attribute on the target anchor tag.  However I came across a few references that state that using `name` attribute on anchor tags is considered obsolete and that `id` tag should be used instead.  

From [W3C obsolete features](https://www.w3.org/TR/html5/obsolete.html#obsolete)

> Authors should not specify the name attribute on \<a\> elements. If the attribute is present, its value must not be the empty string and must neither be equal to the value of any of the IDs in the element's home subtree other than the element's own ID, if any, nor be equal to the value of any of the other name attributes on \<a\> elements in the element's home subtree. If this attribute is present and the element has an ID, then the attribute's value must be equal to the element's ID. In earlier versions of the language, this attribute was intended as a way to specify possible targets for fragment identifiers in URLs. The id attribute should be used instead.

It might be useful to update lesson to also include that you can use the `id` of an existing tag to jump to, for example:  
```
<a href=""#target"">Jump to Some Heading</a>
<h2 id=""target"">Some Heading</h2>
```
If approved as an issue, I'd love to submit a PR to update the lesson and test.    
Thanks for the great site and community!",https://github.com/freeCodeCamp/freeCodeCamp/issues/15672
5,"TITLE: Choose 5 algorithm challenges to be required for the new Algorithms and Data Structures certificate BODY: All of the certificates on beta require completing 5 projects. That is, all of the certificates except the Algorithms and Data Structures certificate, which instead requires completion of about 40 algorithm challenges.

This means we have to have the following text on the map: 
![a picture of the text ""Challenges required for certifications are marked with a *""](https://www.evernote.com/l/Ar8p1BiJ8OhGfKyAcvgH7a5EJs6OMGXmaaMB/image.png)

To make things simpler, we should just choose 5 of these algorithm challenges and make those the required ""Algorithm and Data Structures Projects"" like we've done for all the other sections.

Then we won't have to explain: ""In order to earn a certificate, complete its 5 required projects, except for the Algorithms and Data Structures certificate, where you'll need to complete 40 required  algorithm challenges.""

Instead we'll just be able to say: ""In order to earn a certificate, complete its 5 required projects.""

This also jives with our philosophy of campers being able to ""test out"" of certificates. If a developer who's already really good at algorithms and data structures wants to claim the algorithms and data structures certificate, they shouldn't need to work through 40 algorithms to prove themselves. 5 algorithm challenges should be plenty to verify that they're ready.

So the task at hand is to choose which 5 algorithm challenges we want promote to being required ""algorithm and data structure projects.""

My intuitive answer is ""we should just require them to pass the 5 hardest ones."" But I thought it'd be a good idea to get other contributors' opinions on this.",https://github.com/freeCodeCamp/freeCodeCamp/issues/15675
1,"TITLE: Course Idea: Online Interactivity (Canvas, SVG, etc) BODY: Excuse me if this is not the right place for this, since this is my first time contributing. I asked around in the Gitter and was told that I should open a new issue if I wanted to propose a new challenge or lesson.

I'd like to propose that we add a course, or a series of courses, on standard libraries for online interactivity - which is to say, canvas, SVG, and WebGL.

### Why this is needed

Nowadays, it's extremely common to need to implement graphics - interactive or not - within webpages. SVG is often used for logos and icons, while canvas and THREE.js are often used for interactive demos.

These have become vital skills in today's web development environment, as these libraries are often integrated into webpages to give them extra flair, or [cohesive interactive experiences.](http://lights.helloenjoy.com/)

Perhaps more importantly, these libraries can be used by new coders to quickly build up cool and interactive portfolios to show people. Many new coders spend a long time building apps, and only view programming in a static way. There is a paradigm difference between building apps and building animated displays, and coders on freeCodeCamp currently have no exposure to this.

Unfortunately, there is currently no documentation (as far as I'm aware) on freeCodeCamp on any of these libraries. I'm proposing that we add this.

### Structure

The stretch goal would be to have lessons and documentation on canvas, SVG, and THREE.js. It seems that the 'responsive visual design' module already has basic coverage of animation concepts. 

There is currently an empty module for Game Development which is 'coming soon.' The three libraries I allude to could be organized under a 'Game Development' module, or a new 'Interactive Media' module. Alternatively, they can be split up and each given their own module.

### Possible Action Plan

I have some time this summer, so I'd like to spend time writing a few lessons and/or challenges. If we decide that this is worth pursuing, I'd start off with a basic documentation of canvas, then write a few simple challenges, (make a physics sim, etc.) including integrating a canvas demo into a portfolio site.

Thoughts? Thanks!",https://github.com/freeCodeCamp/freeCodeCamp/issues/15687
5,"TITLE: Stuck on ""running tests"" for entire APIs and Microservices section BODY: <!-- NOTE: If your issue is CodePen Project / Test Suite related, please open it using the below URL instead -->
<!-- https://github.com/freeCodeCamp/testable-projects-fcc/issues/new -->

#### Challenge Name
<!-- Insert link to challenge below -->
http://beta.freecodecamp.com/en/challenges/managing-packages-with-npm/how-to-use-packagejson-the-core-of-any-nodejs-project-or-npm-package

#### Issue Description
<!-- Describe below when the issue happens and how to reproduce it -->
Upon providing a URL e.g. https://fanatical-psychiatrist.glitch.me/ for testing, the output reads ""// running tests"" and gets stuck there - no fail or pass.

#### Browser Information
<!-- Describe your workspace in which you are having issues-->

* Browser Name, Version: Chrome, 58.0.3029.81
* Operating System: Windows 10
* Mobile, Desktop, or Tablet: Desktop

#### Your Code
<!-- If relevant, paste all of your challenge code in here -->
```
{
	""name"": ""fcc-learn-npm-package-json"",
        ""author"": ""Oscar"",
	""dependencies"": {
		""express"": ""^4.14.0""
	},
	""main"": ""server.js"",
	""scripts"": {
		""start"": ""node server.js""
	},
	""engines"": {
		""node"": ""4.4.5""
	},
	""repository"": {
		""type"": ""git"",
		""url"": ""https://idontknow/todo.git""
	}
}
```




```
#### Screenshot
<!-- Add a screenshot of your issue -->
![capture](https://user-images.githubusercontent.com/12058020/28647704-f8b33296-7225-11e7-89b6-5346fbeb1692.JPG)
",https://github.com/freeCodeCamp/freeCodeCamp/issues/15688
4,"TITLE: User Profile Streak Chart uses different date/time than the table below it BODY: #### Issue Description
On the user profile page (i.e. https://www.freecodecamp.org/{username}, where it shows the chart with different months, and number of challenges per day on it, the chart seems to be using a different timing mechanism than the table below it. For example, if I'm in the Eastern U.S. timezone completing challenges at night, the table of completed challenges will show the following day, but the chart will show all of the challenges as having been completed on the current day. 

#### Browser Information
* Browser Name, Version: Chrome 59 (official build)
* Operating System: OS X Sierra
* Mobile, Desktop, or Tablet: Desktop


",https://github.com/freeCodeCamp/freeCodeCamp/issues/15689
5,"TITLE: Create a Controlled Form challenge does not actually create a form BODY: #### Challenge Name
http://hysterical-amusement.surge.sh/

React 30: Create a Controlled Form

#### Issue Description
The instructions for the challenge is as follows:

> The MyForm component is set up to handle changes on an input element. Add the input element in the return of the MyForm component, setting its value and onChange() attributes like the last challenge. Then, create a button with the text ""Submit"" to submit the input value. (The form won't submit anywhere, this is a simulation). The button should have an onClick() handler which triggers a method called handleSubmit(). This method should take the value that's currently in the input and set it to the submit property in local state. 

> Finally, create an h1 tag below the button which renders the submit value from the component's state. You can type in the form and click the button, and you should see your input rendered to the page.

I believe this challenge will teach students bad practice. In this form, the input element does not respond to the user pressing 'Enter' to submit the form.

I propose the solution require students to use a `<form>` tag with an `onSubmit` prop that is set to the `handleSubmit` function.  This is what is used in the [official React documentation](https://facebook.github.io/react/docs/forms.html#controlled-components).

#### Current Challenge Solution

```jsx
class MyForm extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			input: '',
			submit: ''
		};
	}
	handleChange = (event) => {
		this.setState({
			input: event.target.value
		});
	}
	handleSubmit = () => {
		this.setState({
			submit: this.state.input
		});
	}
	render() {
  	return (
	    <div>
        <input
        	value={this.state.input}
        	onChange={this.handleChange} />
        <button onClick={this.handleSubmit}>Submit!</button>
        <h1>{this.state.submit}</h1>
	    </div>
    );
  }
};
```
#### Proposed Challenge Solution
```jsx
class MyForm extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			input: '',
			submit: ''
		};
	}
	handleChange = (event) => {
		this.setState({
			input: event.target.value
		});
	}
	handleSubmit = () => {
		this.setState({
			submit: this.state.input
		});
	}
	render() {
  	return (
	    <form onSubmit={this.handleSubmit}>
        <input
        	value={this.state.input}
        	onChange={this.handleChange} />
        <button>Submit!</button>
        <h1>{this.state.submit}</h1>
	    </form>
    );
  }
};
```",https://github.com/freeCodeCamp/freeCodeCamp/issues/15690
3,"TITLE: rails new does not work with --webpack and --skip-bundle on Rails 5.1 BODY: ### Steps to reproduce

Run this command: `rails new --webpack --skip-bundle test_app`

### Expected behavior

Probably bailing out and informing the user that it's not possible to install webpacker without running bundle is the best option here.

### Actual behavior

It generates the initial project structure and then errors out at the `webpacker:install` step.

```
       rails  webpacker:install
Could not find gem 'rails (~> 5.1.0)' in any of the gem sources listed in your Gemfile.
Run `bundle install` to install missing gems.
```

### System configuration
**Rails version**: 5.1.0

**Ruby version**: 2.4.0p0

**bundler version**: 1.14.6",https://github.com/rails/rails/issues/28916
2,"TITLE: head method inside a format.any results in an incorrect Content-Type BODY: ### Steps to reproduce

In a controller's routed method:

```ruby
respond_to do |format|
  format.any  { head 404 }
end
```

then GET URI with a bogus extension, e.g. ```GET /1.foobar```

A full failing test example [here](https://gist.github.com/happycoloredbanana/3515bd8c6843b25fd2c686bd0a24b71a)

### Expected behavior
The response includes a ```Content-Type``` header that makes sense or no such header at all

### Actual behavior
```Content-Type``` that looks like this: ```#<Mime::nilType:0x00000009abcdef>```

### System configuration
**Rails version**: 5.0.2, 5.1.0

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/28927
2,"TITLE: System test with Selenium Fails with EOFError BODY: ### Steps to reproduce

Create a scaffold resource and run rails test:system.

Here is the repo: https://github.com/bparanj/r51st

### Expected behavior

The system test generated by the scaffold should run in the browser.

### Actual behavior

```
$ rails test:system
Run options: --seed 8150

# Running:

E

Error:
ThoughtsTest#test_visiting_the_index:
EOFError: end of file reached
    
Error:
ThoughtsTest#test_visiting_the_index:
EOFError: end of file reached

bin/rails test test/system/thoughts_test.rb:4

Finished in 2.928448s, 0.3415 runs/s, 0.0000 assertions/s.

1 runs, 0 assertions, 0 failures, 1 errors, 0 skips
```

### System configuration

**Rails version**: 5.1

**Ruby version**: ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin14]

ChromeDriver : 2.9
Capybara : 2.13.0
Mac OS : 10.10.5
Chrome : 58.0.3029.81 (64-bit)
	 	 

",https://github.com/rails/rails/issues/28940
2,"TITLE: `#blank?` fails on non-UTF8 strings BODY: ### Steps to reproduce

```
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  # Activate the gem you are reporting the issue against.
  gem ""activemodel"", ""5.1.0""
end

require ""active_model""
require ""minitest/autorun""
require ""logger""

# Ensure backward compatibility with Minitest 4
Minitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)

class BugTest < Minitest::Test
  def test_blankness
    non_utf8_string = ""my value"".encode(""UTF-16LE"")

    assert_false non_utf8_string.blank?
  end
end
```

### Expected behavior
`#blank?` should return false if the string is not blank.

### Actual behavior
An `Encoding::CompatibilityError` error is raised

### System configuration
**Rails version**: 5.1.0 (also tested on 5.0.2)

**Ruby version**: 2.4.0",https://github.com/rails/rails/issues/28953
1,"TITLE: How to disable stdout logger in development in 5.1 BODY: ### Steps to reproduce

Start rails server, logging appears in stdout

### Expected behavior
Logging would appear only in log/development.log

### Actual behavior
Undesiredly logging appears in stdout

### System configuration
**Rails version**:
5.1.0

**Ruby version**:
2.4.1

Trying right now using config/boot.rb
````
# No stdout for logger
require 'rack'
require 'rails/command'
require 'rails/commands/server/server_command'

module Rails
  class Server < ::Rack::Server
    alias_method :orig_start, :start

    def start
      orig_start
      options[:log_stdout] = false
    end

    private
    def log_to_stdout
      # No stdout for logger
    end
  end
end
```
However, after this still part of logging goes into stdout.
stdout:
```
...
::1 - - [03/May/2017:11:45:04 EEST] ""GET /favicon.ico HTTP/1.1"" 200 1193
http://localhost:3000/xxx -> /favicon.ico
... etc.
```
In <= 5.0 was possible to disable logging into stdout completely. 
",https://github.com/rails/rails/issues/28968
5,"TITLE: Inflector + I18n fallbacks do not play well together BODY: ### Steps to reproduce

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  # Activate the gem you are reporting the issue against.
  gem ""activesupport"", ""5.1.0""
  gem 'pry-byebug'
end

require ""active_support/core_ext/object/blank""
require ""minitest/autorun""
require 'active_support'
# require 'I18n'
require 'i18n/backend/fallbacks'
I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks)

# Ensure backward compatibility with Minitest 4
Minitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)

class BugTest < Minitest::Test
  def setup
    # Declare the available locales for my application
    I18n.available_locales = ['en', 'en-FR']
    # Create a fallback on 'en-fr' -> 'en' 
    I18n.fallbacks.map('en-FR': :en)
    # Memoize the fallbacks so we can test their presence.
    I18n.available_locales.map{|x| I18n.fallbacks[x]}
  end

  def test_locale_fallback_setup
    assert_equal I18n.fallbacks, {:en=>[:en], :""en-FR""=>[:""en-FR"", :en]}
  end

  def test_i18n_fallbacks_with_inflector
    assert_equal ActiveSupport::Inflector.inflections(:'en-FR'), ActiveSupport::Inflector.inflections(:'en')
  end

  def test_inflector_specific_rules_for_language
    assert_equal 'cats', ActiveSupport::Inflector.pluralize('cat', locale: 'en')
    assert_equal 'cats', ActiveSupport::Inflector.pluralize('cat', locale: :'en-FR')
    assert_equal 'cats', ActiveSupport::Inflector.pluralize('cat', locale: 'en-FR')
  end
end
```

### Expected behavior
`test_i18n_fallbacks_with_inflector` should return true
The second and third assertions should return true. 

### Actual behavior
Locale fallback is not used by the inflector. 
Also, I could not reproduce it here, but in Rails, behaviour are completly different if the locale is passed as a Symbol or as a String: 
```ruby
[10] pry(main)> helper.pluralize(2, 'cat', locale: 'en-FR')
=> ""2 cats""

[11] pry(main)> helper.pluralize(2, 'cat', locale: :'en-FR')
=> ""2 cat""
``` 

### System configuration
**Rails version**: 5.0.2

**Ruby version**: 2.4.1p111",https://github.com/rails/rails/issues/28972
4,"TITLE: Rails constant autoloading fails to load modules transitively. BODY: ### Steps to reproduce

Run [this small self contained rails application](https://github.com/mijoharas/rails-dependency-autoloading-bug-ssce) keeping `config.eager_load = false`. Try to navigate to root path `/`. Observe error message:

```
NameError (uninitialized constant TestClass::ChildClass):
  
app/models/test_class.rb:4:in `foobar'
app/controllers/test_controller.rb:3:in `test'
```
See [README.md](https://github.com/mijoharas/rails-dependency-autoloading-bug-ssce/blob/master/README.md) for a short explanation of what's going on.

### Expected behavior
When run with `config.eager_load = true` there is no error message and the page is displayed.

### Actual behavior
Constant autoloading has failed to load the transitively included class `TestClass`.

Explanation:

We have a class `TestClass` which includes a module `IncludeModule`. `IncludeModule` itself also includes a module called `ContainerModule` which contains a class `ChildClass`.

We simply want to access `ChildClass` from within `TestClass` to call a method on it. This does not seem to be allowed by rails constant autoloading.

### System configuration
**Rails version**: ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]

**Ruby version**: Rails 5.1.0
",https://github.com/rails/rails/issues/28997
5,"TITLE: assert_routing fails due to assert_recognizes not returning path in expected options BODY: ### Steps to reproduce

Create a route
```rb
namespace 'platform' do
  resources :administrators, only: [:index, :create, :update, :destroy]
end
```
Create a test
```rb
require 'test_helper'

class RoutesTest < ActionDispatch::IntegrationTest
  def test_platform_administrators
    assert_routing '/platform/administrators', controller: 'platform/administrators', action: 'index'
  end
end
```

Run tests

### Expected behavior

I would assume the expected result would include the asserted path '/platform/administrators'

### Actual behavior
```
The recognized options <{""controller""=>""platform/administrators"", ""action""=>""index"", ""path""=>""platform/administrators""}> did not match <{""controller""=>""platform/administrators"", ""action""=>""index""}>, difference:.
Expected: {""controller""=>""platform/administrators"", ""action""=>""index""}
  Actual: {""controller""=>""platform/administrators"", ""action""=>""index"", ""path""=>""platform/administrators""}
```
### Proposal
Shouldn't the expected above include the path key? `assert_routing` calls `assert_recognizes` where `assert_recognizes` fails to include the path within. I have modified the `assert_recognizes` and got my tests to work, please let me know what you think.

```rb

def assert_recognizes(expected_options, path, extras = {}, msg = nil)
    if path.is_a?(Hash) && path[:method].to_s == ""all""
      [:get, :post, :put, :delete].each do |method|
         assert_recognizes(expected_options, path.merge(method: method), extras, msg)
      end
    else
      request = recognized_request_for(path, extras, msg)

      expected_options = expected_options.clone

      # Documentation when using `assert_routing` includes a leading `/` however 
      # `request.path_parameters` does not return paths with the leading `/` so I have normalized the expected path here.
      if path.is_a?(Hash)
        # expected_options should include the path 
        expected_options[:path] = path[:path].gsub(/^\//, '')
      else
        # expected_options should include the path 
        expected_options[:path] = path.gsub(/^\//, '')
      end

      expected_options.stringify_keys!

      msg = message(msg, """") {
        sprintf(""The recognized options <%s> did not match <%s>, difference:"",
                request.path_parameters, expected_options)
      }

      assert_equal(expected_options, request.path_parameters, msg)
    end
end
```

With these changes I was able to get the following tests to pass

```rb
assert_routing '/platform/administrators', controller: 'platform/administrators', action: 'index'
assert_routing({path: '/platform/administrators', method: :post}, controller: 'platform/administrators', action: 'create')
assert_routing({path: '/platform/administrators/75', method: :put}, controller: 'platform/administrators', action: 'update', id: '75')
```

System configuration

Rails version:
5.0.1
Ruby version:
2.3.3p222

[Docs](http://api.rubyonrails.org/v5.1.0/classes/ActionDispatch/Assertions/RoutingAssertions.html)",https://github.com/rails/rails/issues/28998
2,"TITLE: Unexpected count value with Rspec + Worker +.deliveries.count BODY: Not really sure if this is due to something with Rspec or ActionMailer itself...please note that I didn't include the views for the mailers, but included everything else relevant.

### Steps to reproduce

1. Have a worker that triggers two mailers

```
class MailerWorker
  include Sidekiq::Worker

  def perform
    PrimaryMailer.email.deliver_later
    SecondaryMailer.email.deliver_later
    puts ""Primary mailer delivery count: ${PrimaryMailer.deliveries.count}""
    puts ""Secondary mailer delivery count: ${SecondaryMailer.deliveries.count}""
  end
end
```
2. Have the appropriate mailers

Primary:

```
class PrimaryMailer < ApplicationMailer
  def email
    mail(to: 'isuPatches@yahoo.com', subject: 'Primary Email')
  end
end
```

Secondary:

```
class SecondaryMailer < ApplicationMailer
  def email
    mail(to: 'isuPatches@yahoo.com', subject: 'Secondary Email')
  end
end
```

3. Run a set of specs

```
require 'spec_helper'

describe MailerWorker do
  it 'has the appropriate count for PrimaryMailer' do
    expect {
      perform_enqueued_jobs do
        subject.perform
      end
    }.to change{ PrimaryMailer.deliveries.count }.by(1)
  end

  it 'has the appropriate count for SecondaryMailer' do
    expect {
      perform_enqueued_jobs do
        subject.perform
      end
    }.to change{ SecondaryMailer.deliveries.count }.by(1)
  end
end
```

4. Note the count for both PrimaryMailer and SecondaryMailer is 2 instead of 1

```
Primary mailer delivery count: 2
Secondary mailer delivery count: 2
F

Failures:

  1) MailerWorker has the appropriate count for SecondaryMailer
     Failure/Error:
       expect {
         perform_enqueued_jobs do
           subject.perform
         end
       }.to change{ SecondaryMailer.deliveries.count }.by(1)
     
       expected `SecondaryMailer.deliveries.count` to have changed by 1, but was changed by 2
     # ./spec/workers/mailer_worker_spec.rb:13:in `block (2 levels) in <top (required)>'
```

### Expected behavior
PrimaryMailer.deliveries is 1
SecondaryMailer.deliveries is 1

### Actual behavior
PrimaryMailer.deliveries is 2
SecondaryMailer.deliveries is 2

### System configuration
**Rails version**: 5.0.2

**Ruby version**: 2.4.1

**Rspec version**: 3.6.0
",https://github.com/rails/rails/issues/29008
4,"TITLE: AR::Base#save doesn't assert valid keys BODY: ### Steps to reproduce
`save` doesn't use `assert_valid_keys`, so a typo of `save(validate: false)`, such as `save(validates: false)` will work unexpectedly.

### Expected behavior
`.save(validates: false)` raises `ArgumentError: Unknown key: :validates. Valid keys are: :validate, :touch`
or
`.save(validates: false)` raises `ArgumentError: unknown keyword: validates`
### Actual behavior
`.save(validates: false)` silently acts like `.save()` because `:validates` does nothing.

### System configuration
**Rails version**: 5.0.1
**Ruby version**: 2.3.1

because save is redefined so many times It wasn't a straightforward PR, but I can have a go if you agree this should be an ArgumentError
",https://github.com/rails/rails/issues/29011
3,"TITLE: Arrays of hashes deserialized with HWIA BODY: ### Steps to reproduce

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  # Activate the gem you are reporting the issue against.
  gem ""activerecord"", ""5.1.0""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# Ensure backward compatibility with Minitest 4
Minitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :posts, force: true do |t|
    t.text :content
  end
end

class Post < ActiveRecord::Base
  serialize :content, Array
end

class BugTest < Minitest::Test
  # This passes on Rails 5.0.x, fails on 5.1.x
  # The hashes in this array are Hash in 5.0, HashWithIndifferentAccess in 5.1
  def test_hashes_in_array
    post = Post.create!(content: [{ foo: 'bar' }])
    puts post.content.first.class
    assert_equal Hash, post.content.first.class
  end
end
```

### Expected behavior
Serialized hashes in arrays should deserialize as hashes

### Actual behavior
They're now HashWithIndifferentAccess

This might be intended (or not), whatever, but I even if it is I don't see any noted API change in the changelog. Does anyone know where and when did this change occurred?

### System configuration
**Rails version**: 5.1.0

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29013
2,"TITLE: MissingAttributeError goes away after save BODY: ### Steps to reproduce

Take a record from a scope that uses `select` to load only some columns.

If you try to reference once of the other columns that you didn't load, you will get a MissingAttributeError.

But if you first `save` or `save!` the record, you get `nil` instead of an error.

### Expected behavior
You should continue to get `MissingAttributeError` after `save`.

### Actual behavior
You get a nil from the attribute reader.

### System configuration
**Rails version**:
5.0.2 and 5.1.0

**Ruby version**:
2.3.1

This is because dirty.rb uses `@attributes = @attributes.map(&:forgetting_assignment)` which converts the `Attribute::Uninitialized` to an `Attribute::FromDatabase`.",https://github.com/rails/rails/issues/29017
4,"TITLE: url_for() produces path with double namespace BODY: I have routes defined like this:

```
 namespace :dealer, path: '' do
   resources :images, except: :index do
     resources :comments, only: [:create, :destroy] do
       resources :attachments, only: :show
     end
   end
 end
```

In my view using `link_to [@image, @comment]` results in a url named:

`dealer_image_dealer_comment_path` which doesn't exist. It should be `dealer_image_comment_path`. Any way to avoid the double namespace?

I'm receiving this error:

```
undefined method `dealer_image_dealer_comment_path' for #<#<Class:0x007fb599499520>:0x007fb5994980d0>
Did you mean?  dealer_image_comments_path
               dealer_image_comment_path
```

rake routes:

```
dealer_image_comments POST      /images/:image_id/comments(.:format)                                                                   dealer/comments#create {:subdomain=>""dealer""}
dealer_image_comment DELETE    /images/:image_id/comments/:id(.:format) 
```

**Rails version**: 5.0.2

**Ruby version**: 2.4.0
",https://github.com/rails/rails/issues/29019
3,"TITLE: Bring back before_filter and friends as aliases BODY: We deprecated `before_filter` and friends in favor of `before_action`. That's a win for new applications, but it's an undue burden for gem engines and people who use them. While you can easily upgrade your own app, it's a lot harder to just upgrade every dependency you rely on.

And that's just not a proportionate amount of pain to inflict on the ecosystem given the light weight of a few aliases.

So let's bring back `before_filter` and friends as documented, historical aliases to soothe the pain.

Mea culpa!",https://github.com/rails/rails/issues/29030
5,"TITLE: Validation run twice in association if parent updated since rails 5.1 BODY: I have an relation between order and order lines. Order has many OrderLine

In OrderLine I have one validation  where I save the order

```
validate: :check

def check
  puts 'Check'
  self.order.update_attributes!(check: true)
end
```

In rails 5.0 this scenario work fine.

```
order = Order.create 

order_line = order.lines.new(quantity: 1 , price: 10)
order_line.save
```

It create Order, update the check attributes, in once time

Since Rails 5.1 it pass to the validate, then on the line` self.order.update_attributes!(check: true)`, this produce a new pass in validate.
So this code print 'Check' twice.

For information, this code work on rails 5 and 5.1, the change is passing order as attribute or new OrderLine
```
order = Order.create 
order_line = OrderLine.new(quantity: 1 , price: 10, order: order)
order_line.save
```

I don't see anything in release log, but maybe is in...
",https://github.com/rails/rails/issues/29032
3,"TITLE: Flash.now is not rendered when form_with is used BODY: ### Steps to reproduce

Consider this controller action:

```ruby
def create
  @user = User.new(user_params)
  if @user.save
    flash[:notice] = ""User saved to database.""
    redirect_to user_url @user
  else
    flash.now[:alert] = ""Error: ${@user.errors.full_messages.join(', ')}""
    render :new
  end
end
```

This model:
```ruby
class User < ApplicationRecord
  validates :name, presence: true
end
```

And this form:
```ruby
<%= form_with @user do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <%= f.submit %>
<% end %>
```

This is pretty standard. Elsewhere in your application, the flash would be rendered if it is set.

The issue appears when we try to enter an empty name. Validation fails, and we should see a flash with the error message.


However, if the form that is used to call this is using the new `form_with` method, flash.now is not set. If you enter invalid input and cause the `else` path to be tripped, the flash will never be set. Using the older `form_for` method works as expected

### Expected behavior

flash.now should be set and be displayed.

### Actual behavior

The flash is not set. Including `flash debug` in the page shows that it is not set. Additionally, the page does not reload - meaning it does not jump back to the top of the page. This might indicate that `form_with` does some caching, which in this case causes the issue.

Using the old `form_for` helper fixes the issue, which leads me to believe the issue is caused by the new `form_with` helper.

### System configuration
**Rails version**: 5.1.0

**Ruby version**: ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin15]

**Google Chrome**: 
- Version: 57.0.2987.133 (Official Build) (64-bit) 
- Revision: ec33cd0c06881d919ac0de419d829ad914e0be8f-refs/branch-heads/2987@{#887}
- OS: Mac OS X 
- JavaScript: V8 5.7.492.71
",https://github.com/rails/rails/issues/29036
3,"TITLE: AR containing an attribute of it's pluralized name cause typecasting exceptions. BODY: ### Steps to reproduce
```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  # Activate the gem you are reporting the issue against.
  gem ""activerecord"", ""5.1.0""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# Ensure backward compatibility with Minitest 4
Minitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :users, force: true do |t|
  end

  create_table :hours, force: true do |t|
    t.integer  ""user_id""
    t.float :hours
  end
end

class User < ActiveRecord::Base
  has_many :hours
end

class Hour < ActiveRecord::Base
  belongs_to :user
end

class BugTest < Minitest::Test
  # This passes on Rails 5.0.x, fails on 5.1.x
  def test_collection_with_plural_of_class_name_as_attribute_fails_typecasting
    user = User.create!
    hour = user.hours.build
    assert hour.save
  end
end
```
### Expected behavior
A new hour object is built, and saved with only the attribute user_id assigned.

### Actual behavior
An error in typecasting attempted to convert the hash `{""user_id""=>1}` to a float.

### System configuration
Using activerecord 5.1.0
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]
",https://github.com/rails/rails/issues/29045
3,"TITLE: form_with - rails_ujs error on submit  BODY: Standard form_with tag being handled via js without setting local true when hitting submit and not filling in form data I get an error in the js console of Cannot read property 'call' of undefined. 

This error leads to line 34 of rails/actionview/app/assets/javascripts/rails-ujs/utils/event.coffee

It responds to my error and displays the errors on the front end once i set up the respond to but there is still an error in the base code as handler is not being set.
",https://github.com/rails/rails/issues/29046
3,"TITLE: More info on previous_changes deprecation message. BODY: Now when I try to use previous_changes in after_save callback I am greeted with
```md
DEPRECATION WARNING: The behavior of `previous_changes` inside of after callbacks is
deprecated without replacement. In the next release of Rails,
this method inside of `after_save` will return the changes that
were just saved.
```
I think the url to the original thread should also puts there inside the deprecation message.  
Here the original discussion thread: https://github.com/rails/rails/pull/25337  
  
Or I will never knows what's going on.  
This is not the first time the code references github thread.  
For instance:  
https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/activerecord/lib/active_record/associations/join_dependency/join_part.rb#L50  
also reference to a pull request.",https://github.com/rails/rails/issues/29047
5,"TITLE: Multiple calls to validate with same symbol will overwrite it BODY: It would be useful to be able to call validate with the same symbol multiple times.
This could be used when you have multiple blocks of `with_options if: -> { some_condition }` grouping some validations.

### Steps to reproduce
```
class MyModel
  include ActiveModel::Model   
  validate :validate_me, if: -> { true }
  validate :validate_me, if: -> { false }
end                     
Dbd.new.valid? # returns true
```

### Expected behavior
`NoMethodError: undefined method `validate_me' for #<MyModel:0x00557688c5bdf0>` since I didn't define that method.

### Actual behavior
The second `validate :validate_me` call overwrites the first one.
So it returns `true`

### System configuration
**Rails version**:
5.1

**Ruby version**:
2.3.4",https://github.com/rails/rails/issues/29048
1,"TITLE: db:structure:load broken on linux with a default postgres install BODY: ### Steps to reproduce

RE [this PR](https://github.com/rails/rails/pull/24773)

* Have a database with installed extensions, like `plpgsql`
* Run a default linux postgres install - meaning, you access postgres as a non-superuser.
* Attempt to load a `db/structure.sql` file that includes pointless but super-user only functions like

```
COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';
```

This is especially an issue for projects where folks work in mixed environments, say osx homebrew postgres (whjch runs all databases as a superuser for ""convenience"", I suppose) and default linux postgres installs.

Ultimately the issue is osx postgres running as superuser and creating dump files in that context, but I don't think this is going to change any time soon.

It'd be ideal to at least be able to disable this behavior, as it is now I can't set up a project. I imagine this is going to happen for some production / CI environments as well. I don't think the correct solution is to tell linux users to access their rails databases as superusers, that's the equivalent of running your machine as root.

### Expected behavior
It should work with warnings as it did on previous versions of rails.

### Actual behavior
It fails with:
```
psql:/home/dcollispuro/code/work/addons.heroku.com/db/structure.sql:27: ERROR:  42501: must be owner of extension plpgsql
LOCATION:  aclcheck_error, aclchk.c:3367
Time: 0.211 ms
rake aborted!
failed to execute:
psql -v ON_ERROR_STOP=1 -q -f /home/dcollispuro/code/work/addons.heroku.com/db/structure.sql addons-development

Please check the output above for any errors and make sure that `psql` is installed in your PATH and has proper permissions.
```

### System configuration
**Rails version**: 5.1.0

**Ruby version**: 2.3.1p112
",https://github.com/rails/rails/issues/29049
3,"TITLE: Record not touched when removing associated has_many through BODY: ### Steps to reproduce
https://gist.github.com/thomasfedb/04ca6b5d476679e6550d4b849531cf42

```ruby
class Post < ActiveRecord::Base
  has_many :taggings
  has_many :tags, through: :taggings
end

class Tagging < ActiveRecord::Base
  belongs_to :post, touch: true
  belongs_to :tag
end

class Tag < ActiveRecord::Base
end

class BugTest < Minitest::Test
  def test_has_many_through_touch
    post = Post.create!
    tag = Tag.create!

    updated_at_before_tag_added = post.updated_at
    post.update(tags: [tag])
    updated_at_after_tag_added = post.updated_at

    assert_equal 1, post.tags.count
    assert updated_at_before_tag_added < updated_at_after_tag_added

    updated_at_before_tag_removed = post.updated_at
    post.update(tags: [])
    updated_at_after_tag_removed = post.updated_at

    assert_equal 0, post.tags.count
    assert updated_at_before_tag_removed < updated_at_after_tag_removed,
      ""post is not touched""
  end
end
```

### Expected behavior
The post record should be touched both when the tag is added and when the tag is removed, as this results in a tagging being created and destroyed, which is configured with `touch: true`

### Actual behavior
The post record is touched when the tagging is created, but not when it is destroyed

### System configuration
**Rails version**: 5.1.1
**Ruby version**: 2.4.0
",https://github.com/rails/rails/issues/29078
3,"TITLE: enable_extension regression in 5.1? BODY: ### Steps to reproduce

When upgrading from Rails 5.0 to 5.1, it seems that there is a regression with `enable_extension`. I have in my schema the line:

```ruby
enable_extension ""intarray""
```

### Expected behavior

This should enable the `intarray` extension for Postgres, which includes adding an `idx` function.

### Actual behavior

When I run `rake db:reset` it runs as expected, but then when I try to make use of the `intarray` extension, I see an error:

```
ActiveRecord::StatementInvalid - PG::UndefinedFunction: ERROR:  function idx(integer[], bigint) does not exist
```

If I revert to Rails 5.1 and run `rake db:reset`, the `intarray` extension works.

### System configuration
**Rails version**: 5.1

**Ruby version**: 2.3.3
",https://github.com/rails/rails/issues/29080
2,"TITLE: weird behavior of per_form_csrf_tokens BODY: ### Steps to reproduce
I am created a demo app for testing [here](https://github.com/apinrdw/test-csrf-token), and also override the `RequestForgeryProtection#valid_authenticity_token?` for logging.
- open http://localhost:3000/posts/new
- fill and submit the form  
- and see the console.

### Expected behavior
```
per_form_csrf_tokens: true
compare_with_real_token: false
valid_per_form_csrf_token?: true
```

### Actual behavior
```
per_form_csrf_tokens: true
compare_with_real_token: true
valid_per_form_csrf_token?: false
```

### System configuration
**Rails version**:
5.0.3
**Ruby version**:
2.4.1",https://github.com/rails/rails/issues/29085
5,"TITLE: Special characters in app directory path causes 'rails server' to fail on Windows systems BODY: ### Steps to reproduce

1. On Windows 10 system, create directory: `C:\Rails Server Test Ø`
2. Open command prompt, then navigate to `C:\Rails Server Test Ø`
3. From within `C:\Rails Server Test Ø`, run `rails new MyTestApp`
5. From within `C:\Rails Server Test Ø\MyTestApp`, run `rails server`
6. Notice error message: _C:/Rails Server Test ?/MyTestApp/Gemfile not found_
7. Rename directory `C:\Rails Server Test Ø` to `C:\Rails Server Test` (removing `Ø`)
8. Repeat step 4; notice `rails server` now works as expected

### Expected behavior
Rails server starts under localhost.

### Actual behavior
Rails server does not start and misleading error message occurs:
_C:/Rails Server Test ?/MyTestApp/Gemfile not found_

Error message is misleading, because `Gemfile` actually does exist within the working directory.

### System configuration
**Operating system**:
Windows 10 Enterprise (64-bit)

**Rails version**:
Rails 5.1.1

**Ruby version**:
ruby 2.3.3p222 (2016-11-21 revision 56859) [i386-mingw32]",https://github.com/rails/rails/issues/29087
2,"TITLE: When migrating down, enable_extension will delete every column from every table that use the extension BODY: When independent migrations apply the same extension,

e.g.:

```ruby
class CreateItems < ActiveRecord::Migration
  def change
    enable_extension 'citext'
    create_table :items do |t|
      …
      t.citext      :code
      …
    end
    …
  end
end

class CreateMembers < ActiveRecord::Migration
  def change
    enable_extension 'citext'
    create_table :members do |t|
      …
      t.citext      :email
      …
    end
    …
  end
end

```

migrating down one of these (e.g. Items) results in the extension being deleted even if other table still needs it, and _every column using the extension is being deleted from every table_.

I.e., after taking down “items” table — `rake db:migrate:down VERSION=xxxx # Create Items`,

```diff
diff --git a/db/structure.sql b/db/structure.sql
index 559dfab..b92fa7e 100644
--- a/db/structure.sql
+++ b/db/structure.sql
@@ -23,20 +23,6 @@ CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;
 COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';
 
 
---
--- Name: citext; Type: EXTENSION; Schema: -; Owner: -
---
-
-CREATE EXTENSION IF NOT EXISTS citext WITH SCHEMA public;
-
-
…
@@ -103,7 +40,6 @@ CREATE TABLE members (
     …
-    email citext NOT nil,
     …
```

citext is deleted at a whole, and email column in “members” table is deleted as well.

Worst of all, if “items” is brought up again — `rake db:migrate:up VERSION=xxxx # Create Items`, the extension is re-introduced but the columns from other table are not.

It makes sense that the extension is declared by every migration that needs it, there are some scenarios where you may want to be able to take down or redo some migration without affecting others. But deleting every column using the same extension from every other table without even a warning is a dangerous side effect.

Some checks should be done to make sure the extension is not needed elsewhere before deleting it.",https://github.com/rails/rails/issues/29091
2,"TITLE: Clarify ActiveSupport String#first and String#last behavior for negative limit value BODY: ### Steps to reproduce

1. Create a string
```ruby
str = ""hello""
```
2. Use the ActiveSupport `first` and `last` methods with a negative limit:
```ruby
str.first(-1)
# => ""hell""
str.last(-2)
# => ""llo""
```

### Expected behavior

Personally I'd expect it to return a blank string or possibly raise an `ArgumentError`.

### Actual behavior

`first` returns the characters at indices up to the limit (non-inclusive)
`last` returns the characters from (limit - 1) to the end of the string.

This behavior appears to be [untested and undocumented](https://github.com/rails/rails/blob/master/activesupport/test/core_ext/string_ext_test.rb#L379-L413).

### System configuration

**Rails version**: 5.0

**Ruby version**: 2.3.4

### Pull Request

I've added a [Pull Request](https://github.com/rails/rails/pull/29105) proposing new behavior for this case.  It returns a blank string.
",https://github.com/rails/rails/issues/29106
4,"TITLE: rails db:migrate db:seed cannot be run in the same command as of v5.1 BODY: ### Steps to reproduce

1. Create a new Rails project with postgresql.
3. Add a migration that creates a table.
2. `echo 'ApplicationRecord.connection.reconnect!' > db/seeds.rb`  
3. Run `rails db:create db:migrate db:seed`

### Expected behavior

Finishes without errors.

### Actual behavior

Hangs on Rails 5.1.1.
Works on Rails 5.0.3.

### System configuration
**Rails version**: 5.1.1
**Ruby version**: 2.4.1

---

### Another way to reproduce (without `reconnect!`)

1. Create a `User` model and table with a `name` field.
2. Add this snippet to the user model
   
   ```ruby
   def name=(value)
     super(value)
   end
   ```
3. `echo 'User.create(name: ""Joe"")' > db/seeds.rb`
4. `rails db:create db:migrate db:seed`
    :boom: error, no superclass method `name=` defined.

Running `rails db:create db:migrate` and then `rails db:seed` works in both cases.",https://github.com/rails/rails/issues/29112
4,"TITLE: rails 5.1: validates_associated in polymorphic associations: parent is not set BODY: First of all, you can checkout a project where this can be reproduced under: https://github.com/gatperdut/testing

The scenario is as follows: I have 3 models, one of which is the parent (`Character`) and the other two are associations of it (`Inventory` and `SkillSet`). `Inventory` is polymorphic. Here they are:

```
class Character < ApplicationRecord

  has_one :skill_set, dependent: :destroy

  has_one :inventory, as: :parent, dependent: :destroy

  validates_associated :inventory, :skill_set

end
```

```
class Inventory < ApplicationRecord

  belongs_to :parent, polymorphic: true, validate: true

  #validate :fake_validation

  def fake_validation
    errors.add(:parent, ""why not"")
  end

end
```

```
class SkillSet < ApplicationRecord

  belongs_to :character

end

```

The migrations for the models are:

```
class CreateCharacters < ActiveRecord::Migration[5.1]
  def change
    create_table :characters do |t|

    end
  end
end
```

```
class CreateInventories < ActiveRecord::Migration[5.1]
  def change
    create_table :inventories do |t|
      t.references :parent, nil: false, index: true, polymorphic: true
    end
  end
end
```
```

class CreateSkillSets < ActiveRecord::Migration[5.1]
  def change
    create_table :skill_sets do |t|
      t.references :character, nil: false, index: true
    end
  end
end
```

As you can see, I'm using `validates_associated` in `Character` because I want the associated objects to be validated when the parent model is saved.

My problem is, when I save a new parent, the `SkillSet` gets a correctly assigned `character_id`, but for `Inventory` (the polymorphic one) the same does not happen:

```
c = Character.new(inventory: Inventory.new, skill_set: SkillSet.new)
c.save
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
=> false

irb(main):004:0> c.skill_set
=> #<SkillSet id: 1, character_id: 1>


irb(main):002:0> c.inventory
=> #<Inventory id: nil, parent_type: ""Character"", parent_id: nil>

c.inventory.errors.full_messages
=> [""Parent must exist""]
```

Is there any reason why this is so?

I tried a couple of alternatives:
a) just remove the `validates_associated`. In this case, `character` gets saved but the validations for `inventory` are not run. So even if I force `inventory` to be invalid (note `fake_validation`, I activate it in this scenario) it gets saved. Not good.
b) remove `validates_associated` and turn `has_one :inventory` in `character` into `has_one :inventory, validate: true`. Same behaviour.
c) remove `validates_associated` and turn `belongs_to :parent, polymorphic: true` in `inventory` into `belongs_to :parent, polymorphic: true, validate: true`. `Inventory` is not saved, but `character` is!.

I'm honestly at a loss here. Am I doing something wrong. Did I stumble upon a bug?
",https://github.com/rails/rails/issues/29121
3,"TITLE: ActiveRecord::HasManyThroughOrderError BODY: I have a has_one association between 3 models, but it have an error that says ""ActionView::Template::Error (Cannot have a has_many :through association 'Policy#intermediary' which goes through 'Policy#invoice' before the through association is defined.)""

```
class Policy < ApplicationRecord

    self.table_name = ""gipi_polbasic""
    self.primary_key = ""policy_id""

    has_one :invoice
    has_one :intermediary, through: :invoice, foreign_key: :intrmdry_intm_no
```
```
class Intermediary < ApplicationRecord
    self.table_name = ""giis_intermediary""
    self.primary_key = ""intm_no""

    has_one :invoice, foreign_key: :intrmdry_intm_no
    belongs_to :policy, foreign_key: :policy_id
```
```
class Invoice < ApplicationRecord
    self.table_name = ""gipi_comm_invoice""
    self.primary_key = ""intrmdry_intm_no""

    belongs_to :policy, foreign_key: :policy_id
    belongs_to :intermediary, foreign_key: :intrmdry_intm_no
```",https://github.com/rails/rails/issues/29123
4,"TITLE: Using .unscope with a default_scope that has .or(where....) in it BODY: ### Steps to reproduce

1. Create a default scope that includes a `where(x: nil).or(where('x > ?', Time.now))` for example
2. Try to unscope that one field (or two) using `.unscope(where: :x)`

### Expected behavior
I'm expecting the unscope to remove the default scope, both the first `where` and the where inside the `or`-block.

### Actual behavior
Nothing happens. I've reproduced the case in this repository, with a User model with a deleted_at field, that outputs a JSON in root, with the created queries using `.to_sql` for showing off what the actual output is from the query.
https://github.com/frederikspang/rails-test-unscoping 

```
{
  ""User.all (Correct)"": ""SELECT \""users\"".* FROM \""users\"" WHERE (\""users\"".\""deleted_at\"" IS nil OR (deleted_at >= '2017-05-17 16:50:01.378815'))"",
  ""User.all.unscope(where: :deleted_at)"": ""SELECT \""users\"".* FROM \""users\"" WHERE (\""users\"".\""deleted_at\"" IS nil OR (deleted_at >= '2017-05-17 16:50:01.380314'))"",
  ""User.all.unscope(:where)"": ""SELECT \""users\"".* FROM \""users\"""",
  ""User.all.unscoped"": ""SELECT \""users\"".* FROM \""users\""""
}
```

I've also set up 5 testcases that I believe covers the subject somewhat accurate.

### System configuration
**Rails version**: master-branch and tested with 5.1.0 and 5.0.1

**Ruby version**: 2.3.3, 2.4.1 (All probably)


Of course I'll provide any other info you might need, and I'll also go with any other solution that might solve the problem of default scope being ""not deleted, or deleted_at is in the future"". I haven't been able to solve this, no matter what I've tried. Only solution is to use `.unscoped` which creates a number of other issues.",https://github.com/rails/rails/issues/29125
3,"TITLE: `db:schema:load_if_ruby` also runs `db:create` BODY: The task `db:schema:load_if_ruby` does not simply call `db:schema:load` when the schema format is set to `:ruby` instead it also calls `db:create` which fails on systems where a user does not have super user access. 

This task was originally extracted from `db:setup` however I think that it was a mistake that `db:create` is called at this location. Here is the commit https://github.com/rails/rails/commit/38d26b0cb56d82093889efa95992a35ba3bb9f29.

If we do want the schema load to create a database we should add it to `db:schema:load` so the task is consistent with the task name.
",https://github.com/rails/rails/issues/29128
5,"TITLE: where.not(postgres_array_column: [nil, '{}']) generates different query in 5.1 BODY: Query generated from an expression aiming at checking for nil or empty array column in PostreSQL changed from Rails 5.0.2 to 5.1.1

### Steps to reproduce
Having a model `User` with the column `roles` defined as array:

    create_table :users do |t|
      t.integer :roles, array: true
    end

And the following query:
`User.where.not(roles: [nil, '{}']).to_sql`

### Expected behavior
In Rails 5.0.2 the output query is:
`SELECT users.* FROM users WHERE (NOT ((users.roles = '{}' OR users.roles IS nil)))`
This results for checking for nil or empty array.

### Actual behavior
In Rails 5.1.1 the generated query is:
`SELECT users.* FROM users WHERE (users.roles != '{nil,0}')`
This is obviously a different query than before.

### System configuration
**Rails version**:
5.1.1

**Ruby version**:
2.4.1
",https://github.com/rails/rails/issues/29133
1,"TITLE: Interface of ajax callbacks. BODY: Based on source code: [`fire` call](https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/features/remote.coffee#L61) and [`fire` definition](https://github.com/rails/rails/blob/master/actionview/app/assets/javascripts/rails-ujs/utils/event.coffee#L22)

`ajax:beforeSend`, `ajax:success`, `ajax:error` and etc callbacks are fired by `CustomEvent ` that contains `event.detail` argument with an array of callback options.

**Previously:** 
When we based on jquery-ujs we have next interface:

```
function handleAjaxSuccess(event, data, status, xhr) {
  // ...
}
$(‘#form’).on('ajax:success', handleAjaxSuccess)
```
That contains `event` with `several parameters` ( depends from event )

**Now we have next:**
```
function handleAjaxSuccess(event) {
  console.log(event.details[0]) // xhr
  console.log(event.details[1]) // options
  // ...
}
$(‘#form’).on('ajax:success', handleAjaxSuccess)
```

What do you think to present(return) parameters in `event.details` like an associative array structure?

In this case interface will looks like:
```
function handleAjaxSuccess(event) {
  console.log(event.details.xhr)
  console.log(event.details.options)
  // ...
}
$(‘#form’).on('ajax:success', handleAjaxSuccess)
```

I can attach PR with such implementation. 
If current implementation is completely right - i can build kind of documentation of such behaviour. What do you think?

Thanks.",https://github.com/rails/rails/issues/29137
3,"TITLE: Random ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR(s) after upgrading to Rails 5.1.1 BODY: ### Steps to reproduce

I simply updated from Rails 5.0.3 to 5.1.1 in my project. 
Now, when I run tests while in development mode, I see errors like this:

ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation ""end_users"" does not exist...

### Expected behavior
Expected tests to run without error.

### Actual behavior
Various tests throw errors. I always get an error similar to `ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation ""end_users"" does not exist...`

But, I observed that the errors are not consistent - i.e. during some test runs I see the error on the end_users table, other times I see the error with other tables.

While googling this issue, I found a StackOverflow Q&A which gives me a hint that Spring preloader may be the culprit: [ActiveRecord error when running rails console](http://stackoverflow.com/questions/43863458/activerecord-error-when-running-rails-console)

Simply stopping Spring before running tests gives me inconsistent results (sometimes all tests pass, more often some fail).

However, when I do the following:

1. Open a new terminal
1. Navigate to my project directory
1. Do `spring stop` (returns Spring is not running)
1. Do `export DISABLE_SPRING=1`
1. Do `rails t`

All tests run fine and are green the _first time_ I run them!

If I do `rails t` _again_, within the same terminal some tests now fail (again, different tests fail each time).

Is there some special upgrade step I might have missed that would cause such an error? Is this a known issue with the Spring preloader? Is this a bug in ActiveRecord?

Thank you!

### System configuration
**Rails version**: 5.1.1

**Ruby version**: ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]
",https://github.com/rails/rails/issues/29164
5,"TITLE: Bug with tz aware range types array BODY: ### Steps to reproduce
https://github.com/rails/rails/commit/302e92359cc88258ae15a82454c58408a4b8157e

@sgrif your patch was meant to fix time-zone-aware `tsrange` types, it doesn't work though on array range type columns.

```ruby
config.active_record.time_zone_aware_types += [ :tsrange, :tstzrange ]
```

```ruby
create_table :events do |t|
  t.tsrange :durations, array: true
end
```

```ruby
Event.update durations: [ Time.current..3.hours.from_now ]
```

### Expected behavior
It should correctly map the actual values inside each duration.

### Actual behavior
can't iterate from ActiveSupport::TimeWithZone

### System configuration
**Rails version**: 5.1.1
**Ruby version**: 2.4.0
",https://github.com/rails/rails/issues/29186
3,"TITLE: Creating a scaffold for a Model with a reference shows the memory address of the associated model rather than the id in the index and show html files. BODY: ### Steps to reproduce
```
rails new myapp
rails g scaffold user 
rails g scaffold thing user:references
rake db:migrate
rails console
User.new.save
Thing.new(user:User.first).save
rails s
visit localhost:3000/things
visit localhost:3000/things/1
```

### Expected behavior
Scaffolding a model with a reference should lead to displaying that reference's id or a link to the show of that model if it exists.  In the json builder files and edit and update html files that are automatically created on a scaffold the Id is correctly displayed.  In the above example we see user_id: 1 for the user id in the json.

### Actual behavior
As it stands the object is referenced directly in the offending html files leads to the display of the memory address of the referenced object to the user.  The bug is essentially an extension of #11573 which modified the form when using scaffold with references but not the show or index.
You'll see something like this:
![Image of the issue](http://i.imgur.com/JtqpRsw.png)

### System configuration
**Rails version**:
5.1.1
**Ruby version**:
2.3.3p222",https://github.com/rails/rails/issues/29200
3,"TITLE: ActionCable: disconnect/unsubscribed never called BODY: ### Steps to reproduce
Create an `ActionCable` channel and subscribe to it. Unplug the client from the Internet and immediately call on server-side:
<pre>
ActionCable.server.remote_connections.where( :some_identifier => 'some suitable value for the disconnected client').disconnect
</pre>

### Expected behavior
Client should be `unsubscribed` from his channels and `disconnect` method on connection should be called.

### Actual behavior
`unsubscribed` and `disconnect` methods do not get called

### System configuration
**Rails version**:
Rails 5.1.0
ActionCable 5.1.0
(default setup)

**Ruby version**:
ruby-2.2.3p173

mac os 10.12.4

But should also affect **other versions**.",https://github.com/rails/rails/issues/29207
1,"TITLE: ActiveSupport::TimeZone.us_zones behavior changed between Rails 5.0.2 and 5.0.3 BODY: ### Steps to reproduce
1. Open a Rails console
2. Execute `ActiveSupport::TimeZone.us_zones`
3. Rails 5.0.2:
  ```
  irb(main):007:0> ActiveSupport::TimeZone.us_zones
[
    [0] #<ActiveSupport::TimeZone:0x0055c0da6952a8 @name=""Hawaii"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: Pacific/Honolulu>>,
    [1] #<ActiveSupport::TimeZone:0x0055c0d98606d8 @name=""Alaska"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Juneau>>,
    [2] #<ActiveSupport::TimeZone:0x0055c0da666598 @name=""Pacific Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Los_Angeles>>,
    [3] #<ActiveSupport::TimeZone:0x0055c0da660cb0 @name=""Arizona"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Phoenix>>,
    [4] #<ActiveSupport::TimeZone:0x0055c0da6460b8 @name=""Mountain Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Denver>>,
    [5] #<ActiveSupport::TimeZone:0x0055c0da60c5e8 @name=""Central Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Chicago>>,
    [6] #<ActiveSupport::TimeZone:0x0055c0d1e9b348 @name=""Eastern Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/New_York>>,
    [7] #<ActiveSupport::TimeZone:0x0055c0da5ff578 @name=""Indiana (East)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Indianapolis>>
]
  ```
4. Rails 5.0.3:
  ```
  irb(main):001:0> ActiveSupport::TimeZone.us_zones
[
    [ 0] #<ActiveSupport::TimeZone:0x005568a38f2828 @name=""America/Adak"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Adak>>,
    [ 1] #<ActiveSupport::TimeZone:0x005568a38f2800 @name=""Hawaii"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: Pacific/Honolulu>>,
    [ 2] #<ActiveSupport::TimeZone:0x005568a3683a60 @name=""Alaska"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Juneau>>,
    [ 3] #<ActiveSupport::TimeZone:0x005568a3683a88 @name=""America/Anchorage"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Anchorage>>,
    [ 4] #<ActiveSupport::TimeZone:0x005568a37492d8 @name=""America/Metlakatla"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Metlakatla>>,
    [ 5] #<ActiveSupport::TimeZone:0x005568a3871e08 @name=""America/Nome"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Nome>>,
    [ 6] #<ActiveSupport::TimeZone:0x005568a36fe530 @name=""America/Sitka"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Sitka>>,
    [ 7] #<ActiveSupport::TimeZone:0x005568a37a2d60 @name=""America/Yakutat"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Yakutat>>,
    [ 8] #<ActiveSupport::TimeZone:0x005568a353d390 @name=""Pacific Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Los_Angeles>>,
    [ 9] #<ActiveSupport::TimeZone:0x005568a3550f58 @name=""America/Boise"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Boise>>,
    [10] #<ActiveSupport::TimeZone:0x005568a3550f30 @name=""Arizona"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Phoenix>>,
    [11] #<ActiveSupport::TimeZone:0x005568a3493728 @name=""Mountain Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Denver>>,
    [12] #<ActiveSupport::TimeZone:0x005568a3235648 @name=""America/Indiana/Knox"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Knox>>,
    [13] #<ActiveSupport::TimeZone:0x005568a31adf68 @name=""America/Indiana/Tell_City"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Tell_City>>,
    [14] #<ActiveSupport::TimeZone:0x005568a32c6738 @name=""America/Menominee"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Menominee>>,
    [15] #<ActiveSupport::TimeZone:0x005568a3493750 @name=""America/North_Dakota/Beulah"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/North_Dakota/Beulah>>,
    [16] #<ActiveSupport::TimeZone:0x005568a3384da0 @name=""America/North_Dakota/Center"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/North_Dakota/Center>>,
    [17] #<ActiveSupport::TimeZone:0x005568a342b5d8 @name=""America/North_Dakota/New_Salem"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/North_Dakota/New_Salem>>,
    [18] #<ActiveSupport::TimeZone:0x005568a305a2b0 @name=""Central Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Chicago>>,
    [19] #<ActiveSupport::TimeZone:0x005568a2e0bc98 @name=""America/Detroit"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Detroit>>,
    [20] #<ActiveSupport::TimeZone:0x005568a2f9cbc0 @name=""America/Indiana/Marengo"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Marengo>>,
    [21] #<ActiveSupport::TimeZone:0x005568a30226d0 @name=""America/Indiana/Petersburg"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Petersburg>>,
    [22] #<ActiveSupport::TimeZone:0x005568a305a2d8 @name=""America/Indiana/Vevay"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Vevay>>,
    [23] #<ActiveSupport::TimeZone:0x005568a2f3e6b0 @name=""America/Indiana/Vincennes"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Vincennes>>,
    [24] #<ActiveSupport::TimeZone:0x005568a2f66e30 @name=""America/Indiana/Winamac"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Winamac>>,
    [25] #<ActiveSupport::TimeZone:0x005568a2e4dcd8 @name=""America/Kentucky/Louisville"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Kentucky/Louisville>>,
    [26] #<ActiveSupport::TimeZone:0x005568a2e9e840 @name=""America/Kentucky/Monticello"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Kentucky/Monticello>>,
    [27] #<ActiveSupport::TimeZone:0x005568a2d225c0 @name=""Eastern Time (US & Canada)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/New_York>>,
    [28] #<ActiveSupport::TimeZone:0x005568a2e9e7a0 @name=""Indiana (East)"", @utc_offset=nil, @tzinfo=#<TZInfo::DataTimezone: America/Indiana/Indianapolis>>
]
```

### Expected behavior
Keep behavior of public methods consistent between patch versions of release.  In fact, based on code I see in our app, the Rails 5.0.2 behavior has been consistent for several *major* versions of Rails.

### Actual behavior
The list of us_zones is larger in Rails 5.0.3

### System configuration
**Rails version**:
5.0.3
**Ruby version**:
2.3.1

### Note
This issue was filed as a result of discussion in separate issue starting here: https://github.com/rails/rails/issues/28431#issuecomment-303251396",https://github.com/rails/rails/issues/29210
4,"TITLE: Entire Rails.root is being watched when watchable_dirs contains non-existing directory BODY: ### Steps to reproduce

* Create an app with _lots_ of files somewhere below `Rails.root` (but outside the usual directories where Rails expects files to be able to reload in development mode)
* Start the rails console, or a rake task, do anything that boots the Rails environment
* The boot process takes long (up to a minute with thousands of files), you can watch Rails stat'ing each of the files using strace

### Expected behavior

We have a large number of files below `Rails.root.join(""import_data""), that Rails should not care about. Boot times should not be affected.

### Actual behavior

Boot is slow, and the console / rake task / ... performs badly for some time afterwards, while the process is still stat'ing files.

### System configuration

Rails 5.1.0.rc1, ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]",https://github.com/rails/rails/issues/29750
2,"TITLE: ActiveRecord::AttributeMethods::Dirty 5.1 stuck in inconsistent state if autosave :has_many aborts save. BODY: ### Steps to reproduce

```ruby
Class Parent < ApplicationRecord
  has_many :children, autosave: true
end

Class Child < ApplicationRecord
  before_save :do_a_think_that_might_abort
  def do_a_thing_that_might_abort
    throw(:abort)
  end
end

existing_parents.attributes = { ... }
existing_parent.changes_to_be_saved # { ... }
existing_parent.save # false
existing_parent.changes_to_be_saved # {}
```
### Expected behavior
If the parent record fails to save because an autosave child aborts save, the parent record's mutation_trackers should revert to the state it was in before the save. 

### Actual behavior
 Instead, it is stuck between the states produced by `changes_internally_applied` and `changes_applied`.  

### System configuration
**Rails version**: New for rails 5.1.  Problem did not exist in 5.0

**Ruby version**: Tested with 2.3.4, but looking through code does not appear relevant.

The problem stems from Rails 5.1's transition to new definitions of ""what is changed"" during after_save callbacks.  It doesn't seem to revert its state after_rollback, nor does it appear to be able to do so.
",https://github.com/rails/rails/issues/29241
3,"TITLE: Reformat implicit render exception BODY: We want to change how we render our big implicit rendering exception, in order to make it more approachable for users. Below are the requested changes to the exception handling :)

### Requested changes

- [ ] Create a new error subclass of `ActionController:: ActionControllerError ` for the error raised [here](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/implicit_render.rb#L53), with naming of your choice. Possible candidates are `ActionController::MissingExactTemplate` / `ActionController::MissingExactTemplate`.
- [ ] Turn the [long exception message](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/implicit_render.rb#L42-L51) into a custom HTML template, similar to how we do it [here](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/exception_wrapper.rb#L27) and [here](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb).
- [ ] Submit a PR with the changes!",https://github.com/rails/rails/issues/29280
5,"TITLE: PG::AmbiguousColumn: ERROR:  column reference ""name"" is ambiguous BODY: ### Steps to reproduce
I am having three tables locations, accounts, states. locations and states both have column 'name'. I am running this query to get all the locations

`@locations = @account.locations.includes(:state)`
I am using `ilike` to find all the matching locations.

`@locations = @locations.where(""name ilike ?"", ""%params[:search]%"")`

Now the issue is whenever I enter a name with '.' in it, e.g. ""google inc."", it returns this error `PG::AmbiguousColumn: ERROR:  column reference ""name"" is ambiguous`

I know I haven't specified the table name before the column name in the second query so Postgres is confused which `name` to use. But my doubt is if that's the case then why it's not giving this error for all the params which don't have a '.' in it. I have tried with all other special characters and query works fine. Only for the names with a '.' are getting this error.

### Expected behavior
`@locations = @locations.where(""name ilike ?"", ""%params[:search]%"")`
returning locations, so it should also return all the locations if any matches the name with '.'  in it.

### Actual behavior
Its returning this error `PG::AmbiguousColumn: ERROR:  column reference ""name"" is ambiguous`

### System configuration
**Rails version**: 4.0

**Ruby version**: 2.1.5
",https://github.com/rails/rails/issues/29283
3,"TITLE: Rails 5.1 STI - STI associations cannot be used with has_one BODY: ### Steps to reproduce

Run the following test (Also verified with the `mysql2` adapter

```
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  # Activate the gem you are reporting the issue against.
  gem ""activerecord"", ""5.1.1""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# Ensure backward compatibility with Minitest 4
Minitest::Test = MiniTest::Unit::TestCase unless defined?(Minitest::Test)

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :wedding do |t|
    t.string :name
    t.timestamps
  end
  create_table :url do |t|
    t.string :url
    t.string :type
    t.string :wedding_id
    t.timestamps
  end
end

class Url < ActiveRecord::Base
  self.table_name = 'url'
  belongs_to :wedding
end

class WeddingUrl < Url
end

class Wedding < ActiveRecord::Base
  self.table_name = 'wedding'
  has_one :wedding_url
end

class BugTest < Minitest::Test
  def test_sti_has_one
    w = Wedding.new(name: 'Test')
    w.save!
    url = WeddingUrl.new(url: 'http://www.test.com', wedding: w)
    url.save!
    puts w.wedding_url
  end
end
```

### Expected behavior
the wedding url object should be displayed

### Actual behavior
The following stack trace occurs:
```
Minitest::UnexpectedError: TypeError: can't cast Hash
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:45:in `rescue in type_cast'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:32:in `type_cast'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `block in type_casted_binds'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `map'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `type_casted_binds'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:206:in `exec_query'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:361:in `select'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:42:in `select_all'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/query_cache.rb:97:in `select_all'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/querying.rb:39:in `find_by_sql'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/statement_cache.rb:107:in `execute'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/singular_association.rb:50:in `find_target'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/association.rb:147:in `load_target'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/association.rb:53:in `reload'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/singular_association.rb:7:in `reader'
    /Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/builder/association.rb:111:in `wedding_url'
    /Users/asurin/Development/repro-issue/lib/script/test_template.rb:59:in `test_sti_has_one'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:45:in `rescue in type_cast'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:32:in `type_cast'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `block in type_casted_binds'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `map'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/quoting.rb:166:in `type_casted_binds'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:206:in `exec_query'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:361:in `select'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:42:in `select_all'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract/query_cache.rb:97:in `select_all'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/querying.rb:39:in `find_by_sql'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/statement_cache.rb:107:in `execute'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/singular_association.rb:50:in `find_target'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/association.rb:147:in `load_target'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/association.rb:53:in `reload'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/singular_association.rb:7:in `reader'
/Users/asurin/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.1/lib/active_record/associations/builder/association.rb:111:in `wedding_url'
/Users/asurin/Development/repro-issue/lib/script/test_template.rb:59:in `test_sti_has_one'
```

### System configuration
Rails: 5.1.1 (Cannot repro on Rails < 5.1)
Ruby: 2.4.1 (Can repro with 2.3.3)
Only gems installed/active are bundler, activerecord and sqlite3 (sqlite3-1.3.13)
Base system is OSX 10.12

",https://github.com/rails/rails/issues/29299
4,"TITLE: rails dev:cache failed to restart the Rails server with custom pid file path BODY: ### Steps to reproduce
1. Start rails server with a custom pid file: `rails s -P tmp/pids/dev.pid`.
2. Toggle dev cache: `rails dev:cache`.

### Expected behavior
Rails server should be restarted successfully.

### Actual behavior
Restarting failed. Log:
```
=> Booting Puma
=> Rails 5.1.1 application starting in development on http://localhost:3000
=> Run `rails server -h` for more startup options
Puma starting in single mode...
* Version 3.8.2 (ruby 2.3.3-p222), codename: Sassy Salamander
* Min threads: 5, max threads: 5
* Environment: development
* Listening on tcp://0.0.0.0:3000
Use Ctrl-C to stop
* Restarting...
=> Booting Puma
=> Rails 5.1.1 application starting in development on http://localhost:3000
=> Run `rails server -h` for more startup options
A server is already running. Check /tmp/rails-test/tmp/pids/dev.pid.
Exiting
```

### System configuration
**Rails version**: Rails 5.1.1

**Ruby version**: Ruby 2.3.3

### Potential Reason
1. The pid file path is hard coded in [dev_caching.rb](https://github.com/rails/rails/blob/92703a9ea5d8b96f30e0b706b801c9185ef14f0e/railties/lib/rails/dev_caching.rb#L20) as `""tmp/pids/server.pid""`
2. When restarting rails with Puma, it won't remove the pid file it generated.
",https://github.com/rails/rails/issues/29306
2,"TITLE: ActionCable::Connection::Base#disconnect not called if cable client lost network connection BODY: ### Steps to reproduce

Start Rails server with action cable enabled, then have any client connect to the cable server, and make the client lose network connection (eg. airplane your phone with websocket client runing on your phone).

```module ApplicationCable
  class Connection < ActionCable::Connection::Base
     def disconnect
      puts 'disconnect'
     end
  end
```

### Expected behavior

`disconnect` should have been called in 3 seconds( heartbeat interval) or less than 1 minute.

### Actual behavior

On Mac OS X: `disconnect` not called until ~1 minute later.
On Linux server: `disconnect` not called until ~15 minute later.

diagnosis:
After client lost network connection, https://github.com/rails/rails/blob/master/actioncable/lib/action_cable/connection/stream_event_loop.rb#L94 `@nio.select` does not return any monitor until 15 minute later on Linux (1 minute later on Mac OS X). Once it returns a monitor, and `io.read_nonblock(4096, exception: false)` will raise exception which triggers the `disconnect` callback. We expect `@nio.select` return monitors sooner, so that the server knows the client got disconnected.

a quick dummy fix: https://github.com/dechaoqiu/rails/commit/defe9cd02c3741fb93e4c339edbca11bf4dece71

### System configuration
**Rails version**:
5.1.1
**Ruby version**:
ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-linux]",https://github.com/rails/rails/issues/29307
5,"TITLE: after_commit doesn't work with optimistic locking BODY: ### Steps to reproduce

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  gem ""rails"", github: ""rails/rails""
  gem ""arel"", github: ""rails/arel""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :people do |t|
    t.string :name
    t.integer :lock_version, nil: false, default: 0
    t.timestamps
  end

  create_table :places do |t|
    t.string :name
    t.timestamps
  end
end

$with_optimistic_locking = []
$without_optimistic_locking = []

class Person < ActiveRecord::Base
  after_update do
    $with_optimistic_locking << 'after_update'
  end

  after_commit on: :update do
    $with_optimistic_locking << 'after_commit on: :update'
  end
end

class Place < ActiveRecord::Base
  after_update do
    $without_optimistic_locking << 'after_update'
  end

  after_commit on: :update do
    $without_optimistic_locking << 'after_commit on: :update'
  end
end

class BugTest < Minitest::Test

  def test_update_and_commit_with_optimistic_locking
    place = Person.new(name: 'Paris')
    place.save

    place.name = 'Georgia'
    place.save
    
    assert_equal [
      'after_update',
      'after_commit on: :update'
    ], $with_optimistic_locking
  end

  def test_update_and_commit_without_optimistic_locking
    place = Place.new(name: 'Adelaide')
    place.save

    place.name = 'Alberta'
    place.save

    assert_equal [
      'after_update',
      'after_commit on: :update'
    ], $without_optimistic_locking
  end

end
```

### Expected behavior
`after_commit on: :update` callbacks should fire even when optimistic locking is in use.

### Actual behavior
`after_commit on: :update` callbacks do not fire when optimistic locking is enabled.

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29318
5,"TITLE: Order of query results is inconsistent BODY: ### Steps to reproduce
I attempted to reproduce my production bug unsuccessfully here: 
https://gist.github.com/jvrsgsty/77ffbaae972a7b1b56cab7c80eba09da

Yet, the test case yields insight into the source of the bug I am seeing in production. 

The query I am creating in line 53 gets evaluated to SQL without an ""order by"" clause as soon as I execute line 55. Further evaluation of lines 56 and 57 yields no resulting SQL query (I am assuming the result of the query is cached somewhere in memory to save I/O access to disk). Thus, `query.last` gets evaluated the last record of a query with no ""order by"" clause. 

Problem is, `query.last` would be evaluated as the last record returned by the query **without** an ""order by"" clause, whereas `User.where(""email = '${email}'"").last` does issue an SQL statement **with** an ""order by"" clause. In this case, I was unable to generate a use case where the last result of the query without the ""order by"" clause differed from the last result of the query with the ""order by"" clause, yet this **could** happen for a larger database (as a matter of fact, it happens in our production database). 

### Expected behavior
A bit different from the test case I submitted, since my production app is more complex than this simple example. 

In production, I would expect the following code to work as per the Rails documentation. 
```ruby
params[:email].downcase!
# busqueda is evaluated without an ""order by"" clause
busqueda = Persona.where(""email = '${params[:email]}'"")
if !busqueda.nil? && busqueda.length > 0
  #Expected persona with the largest ID. Got a Persona with a smaller id
  id = busqueda.last.id 
end

# If I were to run the following line, it would evaluate to false
# The right part would issue a query with an ""order by"" clause
# whereas the left side would take the last record returned by the query without the ""order by"" clause
Persona.where(""email = '${params[:email]}'"").last.id == busqueda.last.id
```
to yield the last record on the query

### Actual behavior
Instead, I am getting the last record returned by the query without the ""order by"" clause and not the `last` record as specified in http://guides.rubyonrails.org/active_record_querying.html#last

### System configuration
**Rails version**: 5.0.0.1

**Ruby version**: 2.3.1
",https://github.com/rails/rails/issues/29363
1,"TITLE: model w/o primary key defined as association beeing eager loaded is not populated BODY: ### Steps to reproduce
migration:

```
def up
    create_table :institution_hierarchies, id: false do |t|
      t.integer :parent_id, index: true
      t.integer :child_id, index: true
    end
    create table :clients do |t|
      t.integer :institution_id
    end
end

```
models:
```
class InstitutionHierarchy < ActiveRecord::Base
end
```
```
class Client < ActiveRecord::Base
   has_many :institution_hierarchies, foreign_key: :child_id,  primary_key: :institution_id
end
```

reproduce:
  ```
InstitutionHierarchy.create!({child_id: 2, parent_id: 1})
  Client.create!({institution_id: 2})
  puts Client.eager_load(:institution_hierarchies).first.institution_hierarchies.inspect
```

### Expected behavior
The Collection with a single object representing the previously inserted row should be printed

### Actual behavior
An empty collection is printed

### Solution
execute following migration:
```
def change
    add_column :institution_hierarchies, :id, :primary_key
end
```

then execute:

```
puts Client.eager_load(:institution_hierarchies).first.institution_hierarchies.inspect
```

Now the collection contains the desired Object.
I'm not sure if this is in fact a bug or if i'm just missing something, but i could not find any documentation exactly on that topic.

### System configuration
**Rails version**:  4.2.1

**Ruby version**:  2.2.3

**Database**: postgresql 9.5
",https://github.com/rails/rails/issues/29374
2,"TITLE: action cable disconnects when files change BODY: ### Steps to reproduce

Touch an application source file (i.e. a view)
Do an HTTP request on the server
Action Cable connection is closed
It will immediately open again if you do a `.connection.open()` on the client

This prevents tools like js hot reloader from working.

### Expected behavior
There should be some kind of *documented* signal / callback so that the application knows that connection is offline

Better yet would be some way to turn off this behavior or choose what you want to do.
",https://github.com/rails/rails/issues/29384
2,"TITLE: Segmentation fault with postgresql_adapter BODY: ### Actual behavior
Sometimes will running test with guard and spring test crash.

```
10:16:57 - INFO - Running: spec/workers/.../...._spec.rb
Running via Spring preloader in process 45503
Run options: --seed 9030
/Users/bti/.rvm/gems/ruby-2.4.1@app/gems/activerecord-4.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:651: [BUG] Segmentation fault at 0x0000010abfaa3a
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]

-- Crash Report log information --------------------------------------------
   See Crash Report log file under the one of following:
     * ~/Library/Logs/DiagnosticReports
     * /Library/Logs/DiagnosticReports
   for more details.
Don't forget to include the above Crash Report log file in bug reports.

-- Control frame information -----------------------------------------------
c:0059 p:---- s:0296 e:000295 CFUNC  :initialize
c:0058 p:---- s:0293 e:000292 CFUNC  :new
c:0057 p:0017 s:0288 e:000287 METHOD /Users/bti/.rvm/gems/ruby-2.4.1@app/gems/activerecord-4.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:6
c:0056 p:0100 s:0283 e:000282 METHOD /Users/bti/.rvm/gems/ruby-2.4.1@app/gems/activerecord-4.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:2 [FINISH]
c:0055 p:---- s:0275 e:000274 CFUNC  :new
c:0054 p:0104 s:0267 e:000266 METHOD /Users/bti/.rvm/gems/ruby-2.4.1@app/gems/activerecord-4.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:4
c:0053 p:0028 s:0261 e:000260 METHOD /Users/bti/.rvm/gems/ruby-2.4.1@appaloosa/gems/activerecord-4.2.8/lib/active_record/connection_adapters/abstract/connection_poo
c:0052 p:0027 s:0257 e:000256 METHOD /Users/bti/.rvm/gems/ruby-2.4.1@app/gems/activerecord-4.2.8/lib/active_record/connection_adapters/abstract/connection_poo
....
```

### System configuration
**Rails version**:
4.2.8
**Ruby version**:
2.4.1p111

As note mention. At the end it can be cause by Ruby interpreter.
```
[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html
```
I have no idea of what can I do to fix this. ",https://github.com/rails/rails/issues/29394
5,"TITLE: :format in routes gets appended to url even if it's not there BODY: ### Steps to reproduce

Make route with :format in middle of string, observe format also appended to url
Testcase: https://gist.github.com/Voker57/8cad302dfb1bf14fefca5d3c7950eeb0

### Expected behavior
only :format is subsituted with format

### Actual behavior
format also gets appended to uri

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29402
4,"TITLE: Rails 5.1.x does blow up when queries are executed within model class definition BODY: When an autoload for any model class is triggered and it has a querying code in its class definition, then starting from Rails 5.1.0 it does not work anymore.

It happened to me in real life when running tests in CI by using `devise_for :users` helper (from Devise library) in routes, which in turn does `""user"".contantize` and this blows up since ActiveRecord tries to load `users` table, which does not yet exist (every time tests are ran, it starts from scratch, as usual). I understand that having a query in model class definition might not be a good practice (I'm using it to load administrators and cache them since it is a ""constant""), but it was working perfectly in Rails < 5.1.0 (this can be verified, by changing `RAILS_VERSION` constant to 5.0.3 within test script provided below and running it).

In addition to the crash itself - why are routes even loaded when trying to run any **db** specific tasks?

### Steps to reproduce

Here's a code, which can be ran in your terminal to reproduce the problem:
```
# setup
RAILS_VERSION=""5.1.1""

gem install rails -v $RAILS_VERSION && \
  rails _${RAILS_VERSION}_ new rails-${RAILS_VERSION}-test && \
  cd rails-${RAILS_VERSION}-test && \
  rails generate model User && \
  rails db:migrate && \
  echo 'class User < ActiveRecord::Base; FOO = where(id: [1]); end' > app/models/user.rb && \
  echo 'Rails.application.routes.draw { User }' > config/routes.rb

# test
RAILS_ENV=test rails db:drop && \
  RAILS_ENV=test rails db:create db:schema:load --trace

# cleanup
cd .. && \
  rm -rf rails-${RAILS_VERSION}-test
```

### Expected behavior

Expected behavior is no crashes or a better error message since behavior has changed between older versions of Rails.

### Actual behavior

It crashes with an error message like this:
```
rails aborted!
ActiveRecord::StatementInvalid: Could not find table 'users'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/sqlite3_adapter.rb:417:in `table_structure'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/abstract_adapter.rb:166:in `columns'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/schema_cache.rb:67:in `columns'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/connection_adapters/schema_cache.rb:73:in `columns_hash'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/model_schema.rb:451:in `load_schema!'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/attributes.rb:233:in `load_schema!'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/attribute_decorators.rb:50:in `load_schema!'
/Users/jarmo/.gem/ruby/2.3.1/gems/activerecord-5.1.1/lib/active_record/model_schema.rb:446:in `load_schema'
...
```

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.3.1p112
",https://github.com/rails/rails/issues/29419
2,"TITLE: Inconsistent collection setter behaviour (has_many / has_many through) BODY: Collection has a different setter logic for persistent and new record.

New record writes changes to the database only after **save** is triggered, persisted record on the contrary writes changes to the database once ids or array of records **assigned via setter** (which can happen before a setter in `assign_attributes`).  

This inconsistency leads to a different issues, even not related to the inconsistency between new and persisted record.
I just list some of them I already faced with in a production:

* **Validation raises an error.** Lets asume we have has_many records, which should create a has_many through associations while passing ids to the parent record via collection_ids. In case when has_many through will have a validation error - this will raise an error, which only could be rescued, even if record is saved with soft `save`, not `save!`.
* **Collection assignment writes changes at the moment of passing data via setter, not while `save` is invoked**. Lets asume I have a model with a lot of different associations. This model feeded via large form with different ids and other fields. When I set a parameters through a `assign_attributes` method (without any transaction block), and save returns false because of the validation failed, collection ids will be changed anyway. One of the solutions would be use transactions and raise an exception with ActiveRecord::Rollback. Other solution would be use update_attributes or update in the latest version of rails. Other one is to use undocumented with_transaction_returning_status.
* **Difference between new and persisted record.** I believe there are not many developers who work with rails framework know about the difference between new and persisted record with has_many and has_many through records.
* **has_one works differently.** Means you can update _id of a has_many or belongs_to via setter and it will not modify anything in the database.

Main case to reproduce an issue:

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end


gemfile(true) do
  source ""https://rubygems.org""
  gem ""rails"", path: ""../projects/rails/""
  gem ""sqlite3""
end


require ""active_record""
require ""minitest/autorun""
require ""logger""


# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)


ActiveRecord::Schema.define do
  create_table :posts, force: true do |t|
  end


  create_table :comments, force: true do |t|
    t.integer :post_id
  end
end


class Post < ActiveRecord::Base
  has_many :comments
end


class Comment < ActiveRecord::Base
  belongs_to :post
end


class BugTest < Minitest::Test
  def test_association_stuff
    comment = Comment.create!
    attributes = {comment_ids: [comment.id]}
    
    #new_post = Post.new(attributes)
    #assert_equal 1, new_post.comments.size


    post = Post.create!
    post.assign_attributes(attributes)


    assert_equal 1, post.comments.size
    assert_equal 0, post.comments.count


    post.save!


    assert_equal 1, post.comments.size
    assert_equal 1, post.comments.count
  end
end
```


Please let me know if you would like to see the other cases I've listed above.

Solution would be to change behaviour for the autosave has_many records, so the associations of the autosave records will never modify database on data passed to a setter.

Please see real case of this issue here: https://github.com/activeadmin/activeadmin/issues/4815",https://github.com/rails/rails/issues/29420
3,"TITLE: Getting_started.md Basic Auth required twice BODY: ### Steps to reproduce
After following the [guide to create a basic rails app](https://github.com/rails/rails/blob/master/guides/source/getting_started.md#basic-authentication), the authentication has to be provided twice when creating a new article or editing article.

Basic Authentication has following code in ArticlesController:
```ruby
class ArticlesController < ApplicationController

  http_basic_authenticate_with name: ""dhh"", password: ""secret"", except: [:index, :show]

  def index
    @articles = Article.all
  end

  # snippet for brevity
```
The `except:` part should have `:create` too like:
```ruby
class ArticlesController < ApplicationController

  http_basic_authenticate_with name: ""dhh"", password: ""secret"", except: [:index, :show, :create]

  def index
    @articles = Article.all
  end

  # snippet for brevity
```

### Expected behavior
The user is asked to enter name/password when creating, editing, deleting article only once during the process.

### Actual behavior
The user has to authenticate twice, first when clicking new/edit article (method `new`/`create` is called) and a second time after clicking create in the `articles/new` or `articles/edit` (method `create` is called).

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.3.1
",https://github.com/rails/rails/issues/29421
4,"TITLE: ""Couldn't find template for digesting"" error with js.erb views BODY: ### Steps to reproduce

I have created the code and steps to reproduce the problem at https://github.com/saneef/reproduce-couldnt-find-template-for-digesting

### Expected behavior

Should do fragment caching without any issues 

### Actual behavior

Error: `Couldn't find template for digesting`

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.3.3

May be similar to #15255, but suggested hack like using full paths didn't fix the issue.",https://github.com/rails/rails/issues/29423
3,"TITLE: database.yml, Only numbers in database name BODY: ### Steps to reproduce

My database yml file look like this right now.
database.yml
```
development:
  adapter: postgresql
  database: 20170421
  pool: 25
  username: user
  password: pass
  host: localhost
```
When I run 
`rake db:structure:dump` 
I get this runtime error
```
rake aborted!
TypeError: no implicit conversion of Integer into String
/../gems/activerecord-5.1.1/lib/active_record/tasks/postgresql_database_tasks.rb:112:in `exec'
/../gems/activerecord-5.1.1/lib/active_record/tasks/postgresql_database_tasks.rb:112:in `run_cmd'
/../gems/activerecord-5.1.1/lib/active_record/tasks/postgresql_database_tasks.rb:71:in `structure_dump'
/../gems/activerecord-5.1.1/lib/active_record/tasks/database_tasks.rb:217:in `structure_dump'
/../gems/activerecord-5.1.1/lib/active_record/railties/databases.rake:277:in `block (3 levels) in <top (required)>'
Tasks: TOP => db:structure:dump
(See full trace by running task with --trace)
```

### More details I have found
It is due to that database is just numbers. Then it is read as a number. Later on when it is passed on to do the structure dump it uses Kernal.system.
https://github.com/rails/rails/blob/42a80721938453a2ecbba204ce21a0d496756178/activerecord/lib/active_record/tasks/mysql_database_tasks.rb#L150

I could change the name of the database or wrap it in "", but I wanted to see if we could make a nicer solution.

If I change [these](https://github.com/rails/rails/blob/42a80721938453a2ecbba204ce21a0d496756178/activerecord/lib/active_record/tasks/mysql_database_tasks.rb#L8-L10) to 
```ruby 
def initialize(configuration)
  configuration[""database""] = configuration[""database""].to_s
  @configuration = configuration
end
```
This isn't a nice solution.

### Expected behavior
I Expect it to work as normal.

### Actual behavior
It fails.

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29429
2,"TITLE: Session in controller to not always have the same class BODY: ### Steps to reproduce

Retrieving the session from the controller does not always return the same object type.

Normally the session would be of type `ActionDispatch::Request::Session`, but there are cases where it will be an empty `Hash`.

This makes it hard to use method that are only available in the `Session` class. (eg.: `session.loaded?`)

Around rails code there are conditionals to go around this by adding a conditional around the object type: https://github.com/rails/rails/blob/34fe2a4fc778d18b7fe6bdf3629c1481bee789b9/actionpack/lib/action_dispatch/middleware/session/abstract_store.rb#L73-L75 

In some other cases it check if the ""session"" respond to a specific method: https://github.com/rails/rails/blob/34fe2a4fc778d18b7fe6bdf3629c1481bee789b9/actionpack/lib/action_dispatch/http/request.rb#L327

I tried to poke around myself to open a draft, but this is spread all across the place. There seems to be session logic in many layers that don't have full context on the store being used.

The current code path I'm working on can reproduce the issue as I invoke a rails engine directly:
https://github.com/tjoyal/rails/blob/57877c2b2c21a926b86ba9f4a843e9606613f37d/railties/lib/rails/engine.rb#L520-L524 (I suspect there are easier way to reproduce the same result)

```ruby
env = Rack::MockRequest.env_for(path, input: body, method: method)
Something::Engine.call(env)
```
And then from a controller retrieving `session` gives me an empty `Hash`

### Expected behavior
I would expect a call to `session` from a controller to always return a `ActionDispatch::Request::Session` (or a `nil`)

### Actual behavior
Calling `session` can return a `ActionDispatch::Request::Session` or a `Hash` depending on different factors.

### System configuration
**Rails version**: 5.0.3

**Ruby version**: 2.3.3p222
",https://github.com/rails/rails/issues/29443
1,"TITLE: Scopes behaviour change? BODY: ### Steps to reproduce

download this project https://github.com/caiammm/test_rails_5_scopes
you can see the nested scopes in https://github.com/caiammm/test_rails_5_scopes/blob/master/app/models/course.rb

It doesn't work anymore in rails 5.0.3

you can run in rails console 
`Course.scope_multiple_things`

### Expected behavior

It should work like in rails 4.1.14.1, returning the relation
`SELECT ""courses"".* FROM ""courses"" INNER JOIN ""universities"" ON ""universities"".""id"" = ""courses"".""university_id"" WHERE (""courses"".""id"" BETWEEN 1 AND 300) AND ""courses"".""enabled"" = 't' AND ""universities"".""enabled"" = 't'`

### Actual behavior
It doesn't work
`SELECT ""courses"".* FROM ""courses"" INNER JOIN ""universities"" ON ""universities"".""id"" = ""courses"".""university_id"" WHERE (""courses"".""id"" BETWEEN 1 AND 300) AND ""courses"".""enabled"" = 't' AND ""universities"".""enabled"" = `

The last parameter for `universities.enabled` in the end of string is missing

### System configuration
**Rails version**:
the new one 5.0.3
the old one 4.1.14.1

**Ruby version**:
ruby 2.2.3p173",https://github.com/rails/rails/issues/29445
1,"TITLE: Active Model cache is out of date after using db:migrate as a prerequisite BODY: ### Steps to reproduce

1. Have a project with 42 migrations, where one near the end adds a attribute `how_to_fix` to a model called `Inspector`.

2. Create `lib/tasks/sample_data.rake`:

```ruby
namespace :db do
  desc 'Drop, create, migrate, seed and populate sample data'
  task seed_sample_data: [:drop, :create, :migrate, :seed, :populate_sample_data] do
  end

  desc 'Populate the database with sample data'
  task populate_sample_data: :environment do
    puts Inspector.column_names.include?('how_to_fix')
    # create my sample data...
  end
end
```

3. Run `bundle exec rake db:populate_sample_data`

Output printed is `true` as expected.

4. Run `bundle exec rake db:seed_sample_data`


### Expected behavior

Expect `true`.

In other words, I expect the model attribute `how_to_fix` to exist.

### Actual behavior

Output printed is  for the final rake run is `false`.

It appears that the cache of the ActiveRecord Model/Attributes is out of date. I can access some of the attributes, but not all of them (not the ones in later migrations). If I add this I get the correct output:

```ruby
Inspector.reset_column_information
```

### System configuration
**Rails version**:

```
$ bundle exec rails --version
Expected string default value for '--rc'; got false (boolean)
Rails 4.2.6
```

**Ruby version**:

```
$ ruby --version
ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin15]
```",https://github.com/rails/rails/issues/29448
2,"TITLE: Can't find partial when controller subclasses another controller BODY: ### Steps to reproduce

1. Generate new Rails app
1. Generate scaffold for Articles
1. Move article table row of index into partial (its filepath is `articles/_article` to match its `to_partial_path`)
1. Generate `Articles::DraftController` which subclasses from `ArticlesController`
1. Route `/articles/draft` to `Articles::DraftController#index`

[Example repo](https://github.com/zachahn/rails_partial_path_example)

(I wrote seeds which create two articles for this example.)


### Expected behavior

http://localhost:3000/articles/draft should find the article partial located in `articles/_article`, and the page should render exactly the same as http://localhost:3000/articles, except with the published articles filtered out


### Actual behavior

http://localhost:3000/articles/draft looks for the article partial at `articles/articles/_article`, and the page fails to render.

```
Started GET ""/articles/draft"" for 127.0.0.1 at 2017-06-15 23:54:39 +0900
Processing by Articles::DraftController#index as HTML
  Rendering articles/index.html.erb within layouts/application
  Article Load (0.3ms)  SELECT ""articles"".* FROM ""articles"" WHERE (""articles"".""published"" != ?)  [[""published"", ""t""]]
  Rendered articles/index.html.erb within layouts/application (8.2ms)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 1.0ms)



ActionView::Template::Error (Missing partial articles/articles/_article with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :coffee, :jbuilder]}. Searched in:
  * ""/path/to/rails_partial_path_example/app/views""
):
    12:   </thead>
    13:
    14:   <tbody>
    15:     <%= render @articles %>
    16:   </tbody>
    17: </table>
    18:

app/views/articles/index.html.erb:15:in `_app_views_articles_index_html_erb__3270307881277883589_70318547216560'
```


### System configuration

**Rails version**: `Rails 5.1.1`

**Ruby version**: `ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]`
",https://github.com/rails/rails/issues/29468
4,"TITLE: rails-ujs prematurely enables disabled elements for XHR requests with redirects BODY: ### Steps to reproduce

```
rails new rails-ujs-test
```

```
# config/routes.rb

Rails.application.routes.draw do
  resources :users
end
```

```
# app/controllers/users_controller.rb

class UsersController < ApplicationController
  def index
    sleep 2
  end

  def new
  end

  def create
    sleep 2
    redirect_to users_path
  end
end
```

```
# app/views/users/new.html.erb

<h1>Users#new</h1>

<%= form_with url: users_path do |form| %>
  <%= form.submit ""Create user"", data: { disable_with: ""Creating user..."" } %>
<% end %>
```

```
# app/views/users/index.html.erb

<h1>Done!</h1>
```

Start the server, visit http://localhost:3000/users/new and click on the submit button.

### Expected behavior

When the form is submitted, the submit button should be disabled until the redirect action finishes. This is the behaviour which happens for non-XHR requests.

### Actual behavior

The submit button is disabled during the `create` action. But the `create` action redirects us to the `index` action and button is enabled again in the meantime.

This is caused by combination of rails-ujs and Turbolinks.

`redirect_to users_path` is automatically converted to

```
Turbolinks.clearCache()
Turbolinks.visit(""http://localhost:3000/users"", {""action"":""replace""})
```

for XHR requests. This is a HTTP 200 reply and when rails-ujs receives it, then it enables the button again which allows users to click on it again. This is happening in our real world app even if the responses are pretty fast.

You can see it here:

![ujs-test](https://user-images.githubusercontent.com/522375/27210987-8e142704-5256-11e7-812d-7c2b9a1b10df.gif)

I've reported this issue to the original rails-ujs repository some time ago. But it doesn't exist anymore and I can't reference the original report. However, I've tried to fix it, but I did not find a workable solution. It should be probably fixed in rails-ujs which shouldn't enable elements again if a response contains `Turbolinks.visit`.

### System configuration
**Rails version**: 5.1.1 and `master` branch

**Ruby version**: 2.4.1p111

**Turbolinks version**: 5.0.1
",https://github.com/rails/rails/issues/29473
2,"TITLE: Problem in ActiveJob::QueueAdapters::SneakersAdapter::JobWrapper reads only from default queue BODY: There is a fundamental flaw in the ActiveJob Sneakers adaptor (https://github.com/rails/rails/blob/master/activejob/lib/active_job/queue_adapters/sneakers_adapter.rb). When you use enqueue you insert the job into the queue specified in the job. So this job

class MyJob < ApplicationJob
    queue_as :my_queue

    def perform()
        puts ""working...""
    end
end

will (correctly) insert the job into the rabbit-queue named ""my_queue"". However, the JobWrapper will never read from this queue. The JobWrapper is hardcoded to read only from the ""default"" queue. Which means that the message will be stuck in ""my_queue"" forever, never getting processed.

I'm not sure what the correct way to solve this particular problem is. It seems that the JobWrapper should be able to take a parameter that specifies which queue to read from, depending on the job it is wrapping. 

If anyone else has run into the same problem, I'd love to know if you found a way to work around it.

This problem exists in every rails version that has ActiveJob as far as I can tell.",https://github.com/rails/rails/issues/29478
1,"TITLE: Rails stats command counts files only from the hardcoded list BODY: Steps to reproduce:

1. `rails new myapp`
2. Create `app/policies/my_policy.rb` that would contain a hundred lines of code
3. `bin/rails stats` output won't include any files in `app/policies`.

The issue comes from the fact that `rails stats` is using a hardcoded list of directories to count stats:

```
STATS_DIRECTORIES = [
  %w(Controllers        app/controllers),
  %w(Helpers            app/helpers),
  %w(Jobs               app/jobs),
  %w(Models             app/models),
  %w(Mailers            app/mailers),
  %w(Channels           app/channels),
  %w(JavaScripts        app/assets/javascripts),
  %w(Libraries          lib/),
  %w(APIs               app/apis),
  %w(Controller\ tests  test/controllers),
  %w(Helper\ tests      test/helpers),
  %w(Model\ tests       test/models),
  %w(Mailer\ tests      test/mailers),
  %w(Job\ tests         test/jobs),
  %w(Integration\ tests test/integration),
  %w(System\ tests      test/system),
]
```

Which obviously won't include anything custom like `app/policies` or `app/services`.

I think we could potentially leverage `Rails.application.config.paths` to make stats command use all directories in the app and calculate more realistic stats. This would require loading environment (right now the stats task doesn't load it).

Thoughts? @matthewd @rafaelfranca 

I have a draft of the patch that I'll be happy to submit.",https://github.com/rails/rails/issues/29497
1,"TITLE: Objects built by ActiveRecord::AssociationRelation#or have incorrect associations? BODY: Hello. I am fairly new to rails and I'm not sure if this is a bug or I'm understanding something wrong. 
If it's the latter, I'd be really grateful if you can help me correct my understanding. Thanks in advance!

### Steps to reproduce
user has_many publications through user_publications
publication has_many users through user_publications
user has_many comments
publication has_many comments

Loop through all publications associated with a user and build a Relation of all comments under that publication using #or
Now the resulting Relation seems to have the right comment objects, but the wrong comment.publication associations

It might be more clearly described with this reproduction script that I created using the bug report template.
https://gist.github.com/dicemanx/0ba9f227613600246178ab9537265a0a

### Expected behavior
Comments taken from the resulting Relation should return the correct associated publication

### Actual behavior
Comments taken from the resulting Relation always seem to return the associated publication as the first publication

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.3.1p112
",https://github.com/rails/rails/issues/29515
4,"TITLE: `rails server` doesn't listen on `localhost` on Linux BODY: In the past, after running `rails server` without the `-b` option, it was possible to access the Rails app on http://localhost:3000. Since Rails 5 (or 5.1?), it will bind to the system's hostname instead.

I've tracked this down to the use of the `$HOST` env variable in https://github.com/rails/rails/blob/master/railties/lib/rails/commands/server/server_command.rb, which is used together with `$PORT` to determine the listening options for the webserver. It seems this was done to make it configurable by setting these variables explicitly; however on some Linux variants (at least SuSE), `$HOST` is set by default and is equal to `$HOSTNAME`. This can either cause the server to bind to that hostname, or even, if the hostname doesn't resolve, to refuse to start.",https://github.com/rails/rails/issues/29516
2,"TITLE: `ActionDispatch::DebugExceptions` won't show an exception if it itself throws an exception BODY: `ActionDispatch::DebugExceptions` won't show an exception if it itself throws an exception making it difficult to trace the initial exception.

In my particular case, `ActionDispatch::DebugExceptions` received an exception that responds to `annoted_source_code`, but that function returns `nil` which ends up in [`log_array` raising `NoMethodError: undefined method 'join' for nil:NilClass`](https://github.com/rails/rails/blob/55a443b847ccf37aa8fb62fbc827f5b540980dd9/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb#L177-L183).

To go a step further, the underlying exception was an `ActionView::Template::Error`, and the `line_number` of the exception was beyond the number of lines in the underlying template.

### Steps to reproduce

Unfortunately, I haven't been able to create an MVP to reproduce this issue.

### Expected behavior
Although it's expected for this to happen, my expectation is that `DebugExceptions` would be as immune as possible to throwing any exceptions. In this particular case, I'd expect it to show the exception backtrace without any annotated source code.

### Actual behavior
`DebugExceptions` middleware throws its own exception, making it difficult to know what the underlying exception actually was.

### System configuration
**Rails version**:
5.0.3

**Ruby version**:
2.3.3",https://github.com/rails/rails/issues/29537
5,"TITLE: actioncable reconnect same connection and resend same actions again. BODY: ### Steps to reproduce

This was generated using a standalone javascript client 

1. Start server then start your client.
2. After actioncable on client successfully connected to server, stop rails server.
3. Wait until actioncable client connection fails and starts retrying to reconnect to server.
4. Reboot your server.

### Expected behavior
Actioncable should not recreate duplicate connection with same messages again, which duplicate whatever the behavior is in the sent to-channel, as an example: if i create a record on a sent action called ""speak"", after reconnecting again during the same session, ""speak"" action is called again which will duplicate the record with unessential call from actioncable.

### Actual behavior
Actioncable start another connection similar to the already fired 101-one at the very beginning.

### System configuration
**Rails version**: 5.0.2
**Ruby version**: ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]
",https://github.com/rails/rails/issues/29545
2,"TITLE: No route matches [GET] ""/favicon.ico"" BODY: ### Steps to reproduce

Create new rails API project:

`rails new testapp --api`

Run the rails server for the project:

`rails s`

Open the rails welcome page on http://localhost:3000

### Expected behavior

It should just appear the welcome page without errors or warnings.

### Actual behavior

The welcome page appears, but it also returns an error related with the favicon:

```
Started GET ""/favicon.ico"" for 127.0.0.1 at 2017-06-21 10:10:01 +0100

ActionController::RoutingError (No route matches [GET] ""/favicon.ico""):

actionpack (5.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.1) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.1) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.1) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.1) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.1) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.1) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.1) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.1) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.1) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.1) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.1) lib/rails/engine.rb:522:in `call'
puma (3.9.1) lib/puma/configuration.rb:224:in `call'
puma (3.9.1) lib/puma/server.rb:602:in `handle_request'
puma (3.9.1) lib/puma/server.rb:435:in `process_client'
puma (3.9.1) lib/puma/server.rb:299:in `block in run'
puma (3.9.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
````

### System configuration
**Rails version**:  5.1.1 and 5.2.0.alpha

**Ruby version**: 2.4.1 (x86_64-darwin16)",https://github.com/rails/rails/issues/29578
2,"TITLE: Params wrapper is trying to safe_constantize wrong class based on url instead of what is present  BODY: ### Steps to reproduce
1. Clone and run this app https://github.com/anildigital/wrap_parameters_bug_app
2. Run below curl command
```curl -H ""Content-Type: application/json"" http://localhost:3000/api/v1/me/stars/hello```
3. See exception thrown which should be something like

```
Started GET ""/api/v1/me/stars/hello"" for 127.0.0.1 at 2017-06-29 17:47:18 +0530
Klass name
Api::V1::Me::StarsController
Model name
Api::V1::Me::Star

LoadError (Unable to autoload constant Star, expected /Users/anil/Code/ruby/rails/bugs/wrap_parameters_bug_app/app/models/galaxy/star.rb to define it):
```

In above logs, I have also printed `klass.name` and `model_name` from `_default_wrap_model` method of actionpack's params_wrapper.rb
i.e.
```
def _default_wrap_model
  return nil if klass.anonymous?
  model_name = klass.name.sub(/Controller$/, """").classify
  puts ""Klass name ""
  puts klass.name
  puts ""Model name""
  puts model_name
```

### Expected behavior
Looks like params wrapper is assuming there must be a class named `Star` in star.rb based on passed URL, but that's wrong, the related model class doesn't exist, but a name scoped class `class Galaxy::Star` actually exist there.


### Actual behavior
Should not throw the error. 

### System configuration
**Rails version**:
I have used Rails 5.1.2, but error exists for 5.0.1 app too.

**Ruby version**:
ruby 2.3.3p222",https://github.com/rails/rails/issues/29625
2,"TITLE: When LoadError#path is nil LoadError#is_missing? throws NoMethodError BODY: It's possible for `LoadError#path` to be `nil` when a mixin included in `ApplicationHelper` is misnamed, resulting in a crash on boot with a none-too-useful error:

```
web_1  | ./dev/.bundle/ruby/2.3.0/gems/activesupport-5.1.1/lib/active_support/core_ext/load_error.rb:12:in `is_missing?': undefined method `sub' for nil:NilClass (NoMethodError)
web_1  | 	from ./dev/.bundle/ruby/2.3.0/gems/actionpack-5.1.1/lib/abstract_controller/helpers.rb:189:in `rescue in default_helper_module!'
web_1  | 	from ./dev/.bundle/ruby/2.3.0/gems/actionpack-5.1.1/lib/abstract_controller/helpers.rb:185:in `default_helper_module!'
web_1  | 	from ./dev/.bundle/ruby/2.3.0/gems/actionpack-5.1.1/lib/abstract_controller/helpers.rb:36:in `block in inherited'
web_1  | 	from ./dev/.bundle/ruby/2.3.0/gems/actionpack-5.1.1/lib/abstract_controller/helpers.rb:36:in `class_eval'
...
```

Full stack trace here:

https://gist.github.com/nrser/f59050d699dbdcb8772a4afcee07be5d

### Steps to reproduce

I have several chunks of application-wide helper functionality split out into mixins like:

```ruby
# app/helpers/helper_mixins/css_helper.rb
module HelperMixins
  module CSSHelper
    # ...
  end
end
```

They are included in `ApplicationHelper`:

```ruby
module ApplicationHelper  
  include HelperMixins::CSSHelper
  # ...
end
```

Everything works fine when the names are correct, but when they aren't - say `ApplicationHelper` includes `HelperMixins::CssHelper` by accident - I get a crash on boot with the above stack trace.

It's worth noting that i'm using inflections to define a `CSS` acronym, though when messing around it doesn't seem to make a difference.

There are actually two `sub` calls on the line in question:

https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/load_error.rb#L12

But I hacked a `puts` in there and confirmed that it's `LoadError#path` that is `nil`.

### Expected behavior

The error message should reflect the problem - missing module, bad file name, etc.

### Actual behavior

The `LoadError#is_missing?` method itself errors, raising a `NoMethodError` that does little to indicate the underlying problem.

### System configuration
**Rails version**: 5.1.1

**Ruby version**: 2.3.4
",https://github.com/rails/rails/issues/29632
3,"TITLE: A question about cursors support BODY: AR fakes cursors in the find_each method using id lookup. Is there any reason why doesn't AR support cursors yet? At least, for some DBMS, I believe, it is possible to implement it on the driver level using the current approach as a fallback maybe.",https://github.com/rails/rails/issues/29648
1,"TITLE: Can't download attachments with russian letters in name (from issue) in Redmine 3.4.0 with Rails 4.2.9, but work corect with Rails 4.2.8 BODY: ### Steps to reproduce
1. Install Redmine 3.4.0.
2. Update Rails to 4.2.9.
3. Add issue in installed Redmine.
4. Attach file with russian letters in name to this issue.
5. Try do download this file.

### Expected behavior
Browser start downloading file.

### Actual behavior
Error 404.

### System configuration
**Rails version**: 4.2.9

**Ruby version**: 2.4.1

But it work fine with Rails 4.2.8 in same environment.

More information is here: https://www.redmine.org/issues/26337#note-9

With Rails 4.2.9 production.log:
```
Started GET ""/attachments/5450/%d0%a2%d0%97.pdf"" for 10.0.0.1 at 2017-07-04 08:12:53 +0300
Processing by AttachmentsController#show as HTML
  Parameters: {""id""=>""5450"", ""filename""=>""\xD0\xA2\xD0\x97.pdf""}
  Current user: VVD (id=3)
  Rendered common/error.html.erb within layouts/base (0.2ms)
Filter chain halted as :find_attachment rendered or redirected
Completed 404 Not Found in 76ms (Views: 28.6ms | ActiveRecord: 42.5ms)
```

With Rails 4.2.8 production.log:
```
Started GET ""/attachments/5450/%d0%a2%d0%97.pdf"" for 10.0.0.1 at 2017-07-04 11:06:56 +0300
Processing by AttachmentsController#show as HTML
  Parameters: {""id""=>""5450"", ""filename""=>""ТЗ.pdf""}
  Current user: VVD (id=3)
  Rendered common/_other.html.erb (0.8ms)
  Rendered layouts/_file.html.erb (17.1ms)
  Rendered attachments/other.html.erb within layouts/base (26.4ms)
Completed 200 OK in 123ms (Views: 76.3ms | ActiveRecord: 21.1ms)
```

Look at difference:
```
""filename""=>""\xD0\xA2\xD0\x97.pdf""
""filename""=>""ТЗ.pdf""
```",https://github.com/rails/rails/issues/29669
2,"TITLE: Deadlock between ParamsWrapper#model and Loadable#require_or_load BODY: ### Steps to reproduce

1. Create a Rails 5.1.2 app with Postgres DB (pg 0.20), puma server (puma 3.9.1, 5 threads).
2. Add some models and RESTful controllers. Keep default `wrap_parameters format: [:json]`. 
3. Make a large number (e.g., 5) of simultaneous GET requests to the controllers with `Accept: application/json` and `Content-Type: application/json; charset=utf-8` headers.

### Expected behavior
Requests succeed.

### Actual behavior
Requests cause a hangup almost consistently. Further investigation with `ActionDispatch::DebugLocks` [shows](https://gist.github.com/freeatnet/d0501319936f567d7d855e200201bf2b#file-2-rails-deadlock-log) threads end up deadlocked. 

### System configuration
**Rails version**: 5.1.2  
**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29693
3,"TITLE: Stray characters may be returned on render as xml BODY: I have created a program that accepts XML streams and saves them to a file, then sends back an XML response. However, the company sending me the XML stream claims extraneous characters are being sent along with the return output. Honestly I don't see this on my end at *all*.

### Steps to reproduce

1. Build any XML file. I personally used Nokogiri to do it. Here's an snippet taken out of context but this should be enough to mentally follow along:
```ruby
message_type = @p_data.xpath(""//MessageType"").children.to_s
    card_number = @p_data.xpath(""//CardNumber"").children.to_s
    transaction_id = @p_data.xpath(""//TransactionId"").children.to_s
    back = Nokogiri::XML::Builder.new do |xml|
      xml.send(:'ContinuousFeedResponse'){
        xml.send(:'MessageType', message_type)
        xml.send(:'Status', 'ACK')
        xml.send(:'Date', Time.now.strftime(""%m/%d/%Y""))
        xml.send(:'Time', Time.now.strftime(""%H:%M:%S""))
        xml.send(:'CardNumber', card_number)
        xml.send(:'TransactionID', transaction_id)
      }
    end
    render xml: back
``` 

### Expected behavior
```xml

<?xml version=""1.0""?>
<ContinuousFeedResponse>
  <MessageType>Transaction</MessageType>
  <Status>ACK</Status>
  <Date>07/19/2017</Date>
  <Time>10:54:47</Time>
  <CardNumber>[REDACTED]</CardNumber>
  <TransactionID>[REDACTED]</TransactionID>
</ContinuousFeedResponse>
```

### Actual behavior

**NOTE:** This is what the sender of the data *claims* they see as a response. Personally I see nothing of the sort when I do my tests.

```text
13b

<?xml version=""1.0""?>

<ContinuousFeedResponse>

  <MessageType>Transaction</MessageType>

  <Status>ACK</Status>

  <Date>07/19/2017</Date>

  <Time>16:23:27</Time>

  <CardNumber>[REDACTED]</CardNumber>

  <TransactionID>[REDACTED]</TransactionID>

</ContinuousFeedResponse>

 

0

```

But the ""Expected behavior"" section is what I see on my tests.

### System configuration
**Rails version**: 5.0.4

**Ruby version**:2.3.4p301

I'm not sure if this is even a bug or not - more of ""peace of mind"" that I'm not doing something wrong.",https://github.com/rails/rails/issues/29856
5,"TITLE: eager_loading has_one association not taking default scoped order into account  BODY: If we have a has_one relationship with a scope defining an order, this order is not taken into accounting during the eager_loading. Using preload works as expected.

Here is the test case that fails:
```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  gem ""rails"", github: ""rails/rails""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :documents, force: true do |t|
  end

  create_table :pages, force: true do |t|
    t.integer :document_id
  end
end

class Page < ActiveRecord::Base
  belongs_to :document
end

class Document < ActiveRecord::Base
  has_many :pages
  has_one :last_page, -> { order(id: :desc) }, class_name: 'Page'
end


class BugTest < Minitest::Test
  def test_last_page
    document = Document.create
    page1 = Page.create(document: document)
    page2 = Page.create(document: document)


    loaded_document = Document.eager_load(
        :last_page
    ).all

    assert_equal loaded_document[0].last_page, page2
  end

end
```
Unless I made a mistake, it fails on 4.2 but also on current master. I wondered if it was an issue similar to #28415 so I tested it also against @kamipo pull request #29154 but it looks like it still fails.",https://github.com/rails/rails/issues/29713
5,"TITLE: Which is the proper order to handle exception.cause  in ActiveSupport::Rescuable#rescue_from ? BODY: ### Summary

Since Rails 5.0, the order in which handler is applied for exceptions including cause has been changed.
It looks like a deliberate change as written in the #25018 comment, but I think there are at least the following problems.

### Probrem

```ruby
class ApplicationController < ActionController::Base
  protect_from_forgery with: :exception

  rescue_from StandardError, with: :handle_500
  rescue_from ActiveRecord::RecordNotFound, with: :handle_404

  private

  def handle_500(error)
    render 'errors/error', status: 500
  end

  def handle_404(error)
    render 'errors/error', status: 404
  end
end
```

```erb
<%= Article.find(10) %>
```

if Article with `id==10` does not exist, handle_ 404 was executed in Rails 4.2.8,
Since Rails 5.0.0, handle_ 500 is now executed.

Errors occurring in view are wrapped in ActionView::Template::Error.
In Rails 4.2.8, when error has cause, It looked for a handler that matched `exception.cause`.
For Rails 5.0.0 and later, the `exception.cause` check is done only if the wrapping error does not match any handler.

I think the behavior before 4.2.8 is preferable in the above case.

I know that shouldn't do `rescue_from StandardError` be listed in RailsGuide.
This may not be an appropriate example.
However, I think that we always encounter this problem when we need to reference cause and want to deal with special errors and generic errors in order.

### Solution
How about restoring the logic of #24158 to activesupport/lib/active_support/rescuable.rb ?

### System configuration
**Rails version**:
4.2.8, 5.0.0, 5.1.2

**Ruby version**:
2.3.1",https://github.com/rails/rails/issues/29739
2,"TITLE: [ActiveRecord] after_commit callback is called when update fails within explicit transaction block BODY: ### Steps to reproduce

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile(true) do
  source ""https://rubygems.org""
  gem ""rails"", github: ""rails/rails""
  gem ""arel"", github: ""rails/arel""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

# This connection will do for database-independent bug reports.
ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :posts, force: true do |t|
    t.string :arbitrary_column
  end
end

class Post < ActiveRecord::Base
  after_commit :my_callback

  validates :arbitrary_column, length: { minimum: 10 }

  def my_callback
    puts ""Callback was called""
    if changed?
      fail ""This callback should not be called""
    end
  end
end

class BugTest < Minitest::Test
  def test_callback_is_not_called_when_save_fails

    post = Post.create!(arbitrary_column: ""This is valid"")
    post = Post.find(post.id)

    Post.transaction do
      post.arbitrary_column = 'too short'
      assert !post.valid?
      post.save # This won't actually save, but the callback is (incorrectly) called anyway because the transaction commits
    end

  end
end
```

### Expected behavior

`after_commit` callbacks should only be called if the underlying record is successfully saved.
  
### Actual behavior

When updating an existing record, `after_commit` callbacks are called even if the update fails (when attempted update is within an explicit transaction block).

### Note

A similar issue was fixed for record creation in #9115

I believe the underlying problem is that https://github.com/rails/rails/blob/07ed697f7b0debd8736a188fad67fe5e0c98739e/activerecord/lib/active_record/transactions.rb#L341 uses `persisted?` to determine if the save succeeded. This isn't an adequate heuristic for existing records (because they are `persisted?` regardless of whether the underlying update succeeds).

I would be happy to work on a PR, if you can confirm that this is a bug.",https://github.com/rails/rails/issues/29747
3,"TITLE: rails new --webpack --skip-sprockets still creates the assets folder, doesn't set up Webpacker for CSS BODY: ### Steps to reproduce

Enter `rails new testapp --webpack --skip-sprockets`

### Expected behavior
The new app is created without the `app/assets` folder, and with Webpack configured to serve stylesheets from a documented location.

### Actual behavior
The `app/assets` folder, and its underlying structure, is created, despite the fact that dropping stylesheets into `app/assets/stylesheets` no longer causes them to be loaded. This is misleading, at best.

As Webpacker can replace Sprockets, this seems to be a use case that's going to become increasingly common. People doing this are going to want to use stylesheets — should `rails new` not set things up so there is a place to put stylesheets such that they'll be automatically packed into application.css, and should the docs not cover this use case a bit more clearly?

I've filed this under rails/rails, because it seems that `rails new` is erring by creating `app/assets` when the asset pipeline's not being used, but I suspect there are various places it could go; my apologies if I've got it wrong.

### System configuration
**Rails version**: 5.1.2

**Ruby version**: 2.4.1p111
",https://github.com/rails/rails/issues/29749
4,"TITLE: namespaced controller inside engine cannot be called in production BODY: ### Steps to reproduce

create a mountable engine `tickets`
in this engine
`rails g controller api/v1/tickets`
it should create controller that looks like
```ruby
require_dependency ""tickets/application_controller""

module Tickets
  class Api::V1::TicketsController < ...
```
in main app mount that with `mount Tickets::Engine, at: ""/""`
in engine routes
```ruby
Tickets::Engine.routes.draw do
  namespace :api do
    namespace :v1 do
      resources :tickets
    end
  end
end
```
### Expected behavior
GET /api/v1/tickets calls #index action

### Actual behavior
in development it works fine, in production it returns an error 
```
uninitialized constant Tickets::Api

Rails.root: /home/deploy/gazpro5/releases/20170720051152

Application Trace | Framework Trace | Full Trace
activesupport (5.1.2) lib/active_support/inflector/methods.rb:284:in `const_get'
activesupport (5.1.2) lib/active_support/inflector/methods.rb:284:in `block in constantize'
activesupport (5.1.2) lib/active_support/inflector/methods.rb:267:in `each'
activesupport (5.1.2) lib/active_support/inflector/methods.rb:267:in `inject'
activesupport (5.1.2) lib/active_support/inflector/methods.rb:267:in `constantize'
activesupport (5.1.2) lib/active_support/dependencies.rb:582:in `get'
activesupport (5.1.2) lib/active_support/dependencies.rb:613:in `constantize'
actionpack (5.1.2) lib/action_dispatch/http/request.rb:82:in `controller_class'
actionpack (5.1.2) lib/action_dispatch/routing/route_set.rb:43:in `controller'
actionpack (5.1.2) lib/action_dispatch/routing/route_set.rb:29:in `serve'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:46:in `block in serve'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.2) lib/action_dispatch/routing/route_set.rb:832:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
railties (5.1.2) lib/rails/railtie.rb:185:in `public_send'
railties (5.1.2) lib/rails/railtie.rb:185:in `method_missing'
actionpack (5.1.2) lib/action_dispatch/routing/mapper.rb:17:in `block in <class:Constraints>'
actionpack (5.1.2) lib/action_dispatch/routing/mapper.rb:46:in `serve'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:46:in `block in serve'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.2) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.2) lib/action_dispatch/routing/route_set.rb:832:in `call'
remotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'
warden (1.2.7) lib/warden/manager.rb:36:in `block in call'
warden (1.2.7) lib/warden/manager.rb:35:in `catch'
warden (1.2.7) lib/warden/manager.rb:35:in `call'
rack (2.0.3) lib/rack/etag.rb:25:in `call'
rack (2.0.3) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.3) lib/rack/head.rb:12:in `call'
rack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/cookies.rb:613:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.2) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.2) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.2) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.2) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.2) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.2) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.2) lib/action_dispatch/middleware/executor.rb:12:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.2) lib/rails/engine.rb:522:in `call'
unicorn (5.3.0) lib/unicorn/http_server.rb:606:in `process_client'
unicorn (5.3.0) lib/unicorn/http_server.rb:702:in `worker_loop'
unicorn (5.3.0) lib/unicorn/http_server.rb:549:in `spawn_missing_workers'
unicorn (5.3.0) lib/unicorn/http_server.rb:142:in `start'
unicorn (5.3.0) bin/unicorn:126:in `<top (required)>'
/home/deploy/gazpro5/shared/bundle/ruby/2.4.0/bin/unicorn:23:in `load'
/home/deploy/gazpro5/shared/bundle/ruby/2.4.0/bin/unicorn:23:in `<main>'
Routes

Routes match in priority from top to bottom
...
Routes for Tickets::Engine
...

api_v1_tickets_path | GET | /api/v1/tickets(.:format) | tickets/api/v1/tickets#index
  | POST | /api/v1/tickets(.:format) | tickets/api/v1/tickets#create
new_api_v1_ticket_path | GET | /api/v1/tickets/new(.:format) | tickets/api/v1/tickets#new
edit_api_v1_ticket_path | GET | /api/v1/tickets/:id/edit(.:format) | tickets/api/v1/tickets#edit
api_v1_ticket_path | GET | /api/v1/tickets/:id(.:format) | tickets/api/v1/tickets#show
  | PATCH | /api/v1/tickets/:id(.:format) | tickets/api/v1/tickets#update
  | PUT | /api/v1/tickets/:id(.:format) | tickets/api/v1/tickets#update
  | DELETE | /api/v1/tickets/:id(.:format) | tickets/api/v1/tickets#destroy
```

### System configuration
**Rails version**: 5.1.2

**Ruby version**: ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]
",https://github.com/rails/rails/issues/29863
5,"TITLE: Error in production env not manifested in dev/test environments BODY: ### Steps to reproduce
Standard out-of-the-box rails installation,
One of the views has an internationalized field translated with an interpolation argument, like:
=t('.greeting', name : 'Wilma')
so the locale file has:
`en:
    greeting: 'hello %{name}`

but due to a coding error, this translation is called without the interpolation argument at some point:
=t('.greeting')

### Expected behavior
Integration tests should fail, because in the production environment this will cause a failure and the page will not render. Therefore we need to discover this error in the development and test environments too.

### Actual behavior
In development and test environments, the translated locale string (in the above example) simply renders as ""Hello %{name}"".

But in the production environment (where the standard out-of-the-box i18n configuration in environments/production.rb has config.i18n.fallbacks = true), an error is raised in i18n and the page does not render.

### System configuration
**Rails version**: 5.1.2 (This problem did not exist in 5.0.x, I don't know why)
i18n version: 0.8.5

**Ruby version**: 2.4.0


### Solution?
configuring config.i18n.fallbacks = true in environments/development.rb and environments/test.rb solves the problem, but since this has only come about in Rails 5.1.2, it's possible that there is a more appropriate solution. My proposal, then, is for the standard rails dev/test environment config files to have config.i18n.fallbacks = true.

It's possible that the root cause of the error here is in the i18n gem, or it may be intentional behaviour of the i18n gem, but nevertheless, b/c the configuration in production is different from development/test, the error is not caught.",https://github.com/rails/rails/issues/29755
2,"TITLE: ActiveRecord::Relation#cache_key throws error for some distinct collections. BODY: When retrieving the `cache_key` of a distinct, ordered `ActiveRecord::Relation`, 
a `PG::InvalidColumnReference` error is thrown

```
ActiveRecord::StatementInvalid: PG::InvalidColumnReference: ERROR:  
  for SELECT DISTINCT, ORDER BY expressions must appear in select list
LINE 1: ...STINCT ""posts"".""updated_at"" FROM ""posts"" ORDER BY ""posts"".""n...
                                                             ^
: SELECT COUNT(*) AS ""size"", MAX(subquery_for_cache_key.updated_at) AS timestamp 
  FROM (SELECT  DISTINCT ""posts"".""updated_at"" FROM ""posts"" 
  ORDER BY ""posts"".""name"" ASC LIMIT $1) subquery_for_cache_key
    test.rb:41:in `test_association_stuff'
```

Once the relation is loaded, the cache_key is returned as expected.
While it works to avoid the bug, it is less efficient.

This is an example query which produces the issue:

``` ruby
Post.limit(10).order(:name).distinct.cache_key
```

### Steps to reproduce
Run the [test template](https://gist.github.com/martijnbleeker/c4682654ff9adca3e0481ae5b9d87680). 
It tries to use a postgres database named `test` by default.


### Expected behavior
The cache key is returned

### Actual behavior
A `PG::InvalidColumnReference` error is thrown

### System configuration
**Rails version**: 5.1.2

**Ruby version**: 4.2.1
",https://github.com/rails/rails/issues/29779
2,"TITLE: Polymorphic has_many :through, #association= does not delete existing join records if source is polymorphic BODY: Bonus bug: The Book can find the genres it is tagged with, but those genres cannot find the book they are tagging.

### Test
```ruby
require 'active_record'
require 'minitest/autorun'
# require 'pry-rails'

# ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Base.establish_connection adapter: 'sqlite3', database: ':memory:'

ActiveRecord::Base.connection.instance_eval do
  create_table(:books) do |t|
    t.string :name
  end

  create_table(:tags) do |t|
    t.string :name
    t.string :type
  end

  create_table(:taggings) do |t|
    t.belongs_to :tagged_item, polymorphic: true
    t.belongs_to :tag, polymorphic: true
  end
end

class Book < ActiveRecord::Base
  has_many :taggings, as: :tagged_item
  has_many :genres, through: :taggings, source: :tag, source_type: 'Genre'
  has_many :languages, through: :taggings, source: :tag, source_type: 'Language'
end

class Tagging < ActiveRecord::Base
  belongs_to :tag, polymorphic: true
  belongs_to :tagged_item, polymorphic: true
end

class Tag < ActiveRecord::Base
  has_many :taggings, as: :tag
end

class Genre < Tag
  has_many :books, through: :taggings, source: :tagged_item, source_type: 'Book'
end

class Language < Tag
  has_many :books, through: :taggings, source: :tagged_item, source_type: 'Book'
end

class PolymorphismTest < Minitest::Test
  def test_reciprocity
    book = Book.create(name: 'hello')
    genre = Genre.create(name: 'generic')
    lang = Language.create(name: 'english')
    book.genres = [genre]
    book.languages = [lang]

    assert_equal genre, book.genres.first # this works fine
    # However Genre looks for taggings with tag_type of 'Tag'
    assert_equal 1, genre.books.count # this fails
    assert_equal book, book.genres.first.books.first # this fails
  end

  # accessors don't work
  def test_destruction
    book = Book.create(name: 'hello')
    genre = Genre.create(name: 'generic')
    lang = Language.create(name: 'english')
    book.genres = [genre]
    book.languages = [lang]

    assert_equal genre, book.genres.first # this works fine
    Book.first.genres = []
    # this generates the query below, which uses the base class. However the Taggings are created using a tag_type of 'Genre'
    # SQL (0.1ms)  DELETE FROM ""taggings"" WHERE ""taggings"".""tagged_item_id"" = ? AND ""taggings"".""tagged_item_type"" = ? AND ""taggings"".""tag_type"" = 'Tag' AND ""taggings"".""tag_id"" = 1 AND ""taggings"".""tag_type"" = ?  [[""tagged_item_id"", 1], [""tagged_item_type"", ""Book""], [""tag_type"", ""Tag""]]

    assert_equal [], Book.first.genres.to_a # this works fine
  end
end
```

An alternate way to write this would be to use `source_type: 'Tag'` in the Book model. However, that also does not work(in the test_destruction example it would lead to languages being wiped as well as genres).

### Output
```
Run options: --seed 13306

# Running:

FF

Finished in 0.065200s, 30.6748 runs/s, 61.3497 assertions/s.

  1) Failure:
PolymorphismTest#test_reciprocity [tmp/test.rb:57]:
Expected: 1
  Actual: 0

  2) Failure:
PolymorphismTest#test_destruction [tmp/test.rb:70]:
--- expected
+++ actual
@@ -1 +1 @@
-[]
+[#<Genre id: 1, name: ""generic"", type: ""Genre"">]


2 runs, 4 assertions, 2 failures, 0 errors, 0 skips
```
### System configuration
**Rails version**: 5.1.2

**Ruby version**: 2.4.1
",https://github.com/rails/rails/issues/29836
3,"TITLE: bug template does not run  BODY: ### Steps to reproduce
Run `ruby guides/bug_report_templates/active_record_master.rb` in rails repository.

### Expected behavior
exit normally

### Actual behavior
```
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/object/blank.rb:104: warning: already initialized constant String::BLANK_RE
/usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/object/blank.rb:104: warning: previous definition of BLANK_RE was here
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:11: warning: already initialized constant Module::RUBY_RESERVED_KEYWORDS
/usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:11: warning: previous definition of RUBY_RESERVED_KEYWORDS was here
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:14: warning: already initialized constant Module::DELEGATION_RESERVED_KEYWORDS
/usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:14: warning: previous definition of DELEGATION_RESERVED_KEYWORDS was here
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:15: warning: already initialized constant Module::DELEGATION_RESERVED_METHOD_NAMES
/usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/core_ext/module/delegation.rb:15: warning: previous definition of DELEGATION_RESERVED_METHOD_NAMES was here
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/errors.rb:244: warning: already initialized constant ActiveRecord::UnknownAttributeError
/usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/errors.rb:244: warning: previous definition of UnknownAttributeError was here
/usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activesupport/lib/active_support/concern.rb:128:in `included': Cannot define multiple 'included' blocks for a Concern (ActiveSupport::Concern::MultipleIncludedBlocks)
	from /usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/relation/delegation.rb:50:in `<module:ClassSpecificRelation>'
	from /usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/relation/delegation.rb:47:in `<module:Delegation>'
	from /usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/relation/delegation.rb:2:in `<module:ActiveRecord>'
	from /usr/local/Cellar/rbenv/1.0.0/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/relation/delegation.rb:1:in `<top (required)>'
	from /usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/base.rb:21:in `require_relative'
	from /usr/local/opt/rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/bundler/gems/rails-1c2ed0a05440/activerecord/lib/active_record/base.rb:21:in `<top (required)>'
	from guides/bug_report_templates/active_record_master.rb:20:in `require'
	from guides/bug_report_templates/active_record_master.rb:20:in `<main>'
```

### System configuration
**Rails version**: master

**Ruby version**: 2.4.0

It goes wrong since #29638 and https://github.com/rails/rails/pull/29638#issuecomment-312584283 seems related.
My rbenv setup is symlinked:
```
ls -l /usr/local/opt/rbenv
lrwxr-xr-x  1 yskkin  admin  21  8 28  2016 /usr/local/opt/rbenv -> ../Cellar/rbenv/1.0.0
```

I think this is default for `brew install rbenv`.
",https://github.com/rails/rails/issues/29846
3,"TITLE: Reseeding ignores engines' migrations paths BODY: ### Steps to reproduce
- Create a new Rails app (5.0.3), with some migrations
- Create an engine, with some migrations and append the path to the migrations paths:

```
      initializer :append_migrations do |app|
        unless app.root.to_s.match root.to_s
          config.paths['db/migrate'].expanded.each do |expanded_path|
            app.config.paths['db/migrate'] << expanded_path
          end
        end
      end
```

- Run `rake db:reset` or `rake db:drop db:setup`

### Expected behavior
The schema_migrations table should contain the application's migrations versions AND the engine's migrations versions.

### Actual behavior
Only the application's migrations versions are stored in the schema_migrations table.
This causes problems with later migrations.

### System configuration
**Rails version**: 5.0.3

**Ruby version**: 2.3.1
",https://github.com/rails/rails/issues/29852
1,"TITLE: ActiveRecord's before_update is called on create BODY: ActiveRecord's before_update is called on create. This happens when the record being create has a belongs_to relationship which declares back a has_one relationship (the common User -> Profile pattern). 

```ruby
class User < ActiveRecord::Base
  belongs_to :profile
  before_update do
    # this shouldn't be called on create
  end
end

class Profile < ActiveRecord::Base
  has_one :user
end

# the following will call the before_update block
User.create!(email: ""john@domain.com"", profile: Profile.new(name: ""John""))
```

This seems to be caused by the `has_one`'s autosave. If the `has_one` has `autosave: false` the block isn't called.

I've briefly looked at the code and what I believe it's happening is:

- `User#save` is triggered
- `User#save` tries to save the `belongs_to` association (`Profile`)
  - `Profile#save` is triggered
  - `Profile#save` saves the `Profile` record
  - `Profile#save` saves the `has_one` associations though creating the `User` record
- `User#save` continues but record is already `persisted` so it will trigger the update callbacks

### Steps to reproduce

https://gist.github.com/cristianbica/b6f00b2ebb51b10986df3ff788e25885

### Expected behavior

`before_update` block shouldn't be called

### Actual behavior

`before_update` block is called

### System configuration

**Rails version**: master

**Ruby version**: ruby 2.4.1p111
",https://github.com/rails/rails/issues/29864
1,"TITLE: ruby  on rails guide 5.1.2 kindle download link is broken BODY: 
",https://github.com/rails/rails/issues/29865
3,"TITLE: Rails::Secrets.encrypt should work even if secrets.yml.key doesn't exist BODY: I don't want to show the production environment token to some developers. (e.g. temporary staff), so there are some developmers who can not access `secrets.yml.key`.

But, `Rails::Secrets.encrypt` is not working without `secrets.yml.key`(or `ENV[""RAILS_MASTER_KEY""]`).
https://github.com/rails/rails/blob/master/railties/lib/rails/secrets.rb#L51

So, I'm considering applying the following patch to `Rails::Secrets`.
https://github.com/rails/rails/blob/master/railties/lib/rails/secrets.rb#L38
This patch makes `Rails::Secrets.encrypt` work even without secrets.yml.key in development and test environments. (for temporary staff)
```
module Rails
  class Secrets
    class << self
      def key
        key = ENV[""RAILS_MASTER_KEY""] || read_key_file
        return key unless key.nil?

        if Rails.env.development? || Rails.env.test?
          # key must be 32 bytes
          return ""duuuuuuuuuuuuuuuuuuuuuuuuuuuuumy""
        end

        handle_missing_key
      end
    end
  end
end
```

Are there any good ideas?

### System configuration
**Rails version**:

5.1.1

**Ruby version**:

2.4.1p111",https://github.com/rails/rails/issues/29868
3,"TITLE: Unnecessary number of deprecation warnings in ActiveRecord::AttributeMethods::Dirty BODY: ### Steps to reproduce

In an `ApplicationRecord` instance, call an `attribute_was` method

### Expected behavior

Output 1 deprecation warning:

```
DEPRECATION WARNING: The behavior of `attribute_was` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `attribute_before_last_save` instead. (called from...)
```

### Actual behavior

Outputs 3 deprecation warnings:

```
DEPRECATION WARNING: The behavior of `attribute_was` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `attribute_before_last_save` instead. (called from...)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from...)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from...)
```

### System configuration
**Rails version**: 5.1.2 & 5.1.3r.rc1

**Ruby version**: 2.3.1, 2.3.3, 2.4.1

(I am gonna open a PR to fix this, opening this issue so that it's tracked)
",https://github.com/rails/rails/issues/29873
4,"TITLE: Strong parameters doesn't permit all nested attributes if key is not numeric BODY: ### Steps to reproduce
ppp = ActionController::Parameters.new( {""user_infos_attributes""=>{""1500663412001""=>{""address""=>""222"", ""city""=>""222""}, 'NEW_RECORD' => {""address"" => ""333"", ""city"" => ""333""}}})
aaa = [{:user_infos_attributes => [:address, :city]}]
ppp.permit(aaa)

vs

With removed non-numeric key 'NEW_RECORD':
ppp = ActionController::Parameters.new( {""user_infos_attributes""=>{""1500663412001""=>{""address""=>""222"", ""city""=>""222""}}})
aaa = [{:user_infos_attributes => [:address, :city]}]
ppp.permit(aaa)

(Guidelines for creating a bug report are [available
here](http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report))

### Expected behavior
Tell us what should happen
ppp.permit(aaa) should give a correct set:
<ActionController::Parameters {""user_infos_attributes""=><ActionController::Parameters {""1500663412001""=><ActionController::Parameters {""address""=>""222"", ""city""=>""222""} permitted: true>} permitted: true>} permitted: true>

""Strong parameters"" permitting should not think that keys of nested records are always numeric ('NEW_RECORD' or '12332435345'), anyway the keys are not used. Or at least only the record with non-numeric key should be unpermitted, but not all of the passed records.

### Actual behavior
Tell us what happens instead
ppp.permit(aaa) gives
<ActionController::Parameters {""user_infos_attributes""=><ActionController::Parameters {} permitted: true>} permitted: true>

### System configuration
**Rails version**:
Rails 5.0.4.
**Ruby version**:
2.4.1
",https://github.com/rails/rails/issues/29888
1,"TITLE: The X-Forwarded-Host HTTP header is always trusted and is used in url_for BODY: ### Background

This has been reported twice on the rails HackerOne program, and the recommendation (from Jeremy) was to open a GitHub issue:

- https://hackerone.com/reports/71835 (cache poisoning attack by users setting X-Forwarded-Host)
- https://hackerone.com/reports/246697 (same title as this issue)

### Steps to Reproduce

We're going to simulate a [host header attack](https://www.acunetix.com/blog/articles/automated-detection-of-host-header-attacks/) on a sample application. The sample application is a vanilla rails 5.1.2 application with a home page and one route added, `foo`, to redirect back to the home page. The code is available here: https://github.com/jdleesmiller/forwarded_host_demo

1. Visit http://forwarded-host-demo.herokuapp.com/ (it may need some time to boot up)

1. Open the network tools in your browser (I used Chrome) and tick the option to preserve requests.

1. Click the 'redirect back to home page' link. You are redirected to the home page.

1. Copy the corresponding request for `/foo` as a cURL command from the browser's network tools (right click, Copy, Copy as cURL).

1. To simulate a [host header attack](https://www.acunetix.com/blog/articles/automated-detection-of-host-header-attacks/), paste the curl command into a terminal and add `-H 'X-Forwarded-Host: evil.com'`. For example, for one of my requests:
   ```
   curl 'http://forwarded-host-demo.herokuapp.com/welcome/foo' -H 'Accept-Encoding: gzip, deflate, sdch' -H 'Accept-Language: en-GB,en-US;q=0.8,en;q=0.6' -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36' -H 'Accept: text/html, application/xhtml+xml' -H 'Referer: http://forwarded-host-demo.herokuapp.com/' -H 'Cookie: _forwarded_host_session=RjRsTFduOUg5ZStSUCtlVWtYOWN6cVVsVHNzV1Y5aWNWUlZYVXYvcGZKMVhTSmI3Njg5cURiUFltaTE2cVh0STNreENLbmJLR1pNWlkwWDA0UmhNdERpZzEzOW53aWk2QndkdHhNWkp2L0l2bnFoNlpwdUdNekJUVnBmcHc2SUwwZzdCSDh5RTNFOTdCUTVFRkZoLzFRPT0tLWU1M1k4OVpNZ0lIL0UyUXp0SHN0Rnc9PQ%3D%3D--a85dd504e2416f8cbb387b7bb32184dd9e31337a' -H 'Connection: keep-alive' -H 'Turbolinks-Referrer: http://forwarded-host-demo.herokuapp.com/' -H 'X-Forwarded-Host: evil.com' --compressed
   ```

### Expected Result

User is redirected to the home page:

```
<html><body>You are being <a href=""http://forwarded-host-demo.herokuapp.com/"">redirected</a>.</body></html>
```

### Observed Result

User is redirected to the home page on evil.com:

```
<html><body>You are being <a href=""http://evil.com/"">redirected</a>.</body></html>
```

(You can also verify the HTTP Location header for the redirect is set to `http://evil.com` by passing `-i` to curl.)

### System configuration
**Rails version**: 5.1.2

**Ruby version**: 2.4.0p0

### Analysis

As I understand it, rails uses the `X-Forwarded-Host` HTTP header in preference to the `Host` HTTP header in [ActionDispatch::Http::URL](https://github.com/rails/rails/blob/c8ce3459648ce0f86646b564ce1c0bb16a4b48eb/actionpack/lib/action_dispatch/http/url.rb#L220) to compute `request.host`. `request.host` is in turn used in `url_for`.

### Impact

This makes it very easy to create an open redirect in a rails application, in addition to creating many opportunities for reflection of URLs controlled by an attacker, since it affects all of rails's URL helpers through `url_for`.

To exploit it, the attacker needs to be able to inject the `X-Forwarded-Host` header, which can be accomplished by cache poisoning.

There is at least one public bug report on HackerOne that demonstrates an attack vector, https://hackerone.com/reports/487.

It seems that GitLab tried to patch this problem in https://gitlab.com/gitlab-org/gitlab-ce/issues/17877 by removing the header in their NGINX layer. However, this caused a number of problems, and they had to remove the patch. According to the issue, they are going to try again with a whitelist of hosts.

Whether the `X-Forwarded-Host` header is under the user's control does depend on the upstream proxy configuration. On heroku, the steps to reproduce above with my sample app show that it is under user control, so that accounts for a large number of rails applications.

### Mitigation

This list of best practices https://github.com/ankane/secure_rails says that you should set
```
config.action_controller.default_url_options = {host: ""www.yoursite.com""}
config.action_controller.asset_host = ""www.yoursite.com""
```
to avoid host injection, but when I tested it, it had no effect. (I tried it on this branch: https://github.com/jdleesmiller/forwarded_host_demo/tree/default-host .) I think the `request.host` takes precedence over the default setting, which is only used when operating without a request, for example in a background worker.

Express.js has a `trust proxy` setting that, among other things, [determines whether the app will trust `X-Forwarded-Host` to set the hostname](https://expressjs.com/en/guide/behind-proxies.html). I could not find any similar option for rails; rails has good handling of IP spoofing with `X-Forwarded-For`, but I cannot see any countermeasures against `X-Forwarded-Host` spoofing.

If the header is not required, removing it appears to solve the problem. One way to do this is with a small piece of Rack middleware in `config/application.rb`:

```
    class StripXForwardedHost
      def initialize(app)
        @app = app
      end

      def call(env)
        env.delete('HTTP_X_FORWARDED_HOST')
        @app.call(env)
      end
    end
    config.middleware.use StripXForwardedHost
```

This is the approach I'm trialling on my app, and so far it works OK.

Jeremy on HackerOne suggested:

> Ideally, we'd validate the host header against an allow-list. This is the approach we take for Action Cable allowed origins.

I'm not at this point what the best approach is, so I've opted to open an issue for discussion.

I hope that's all clear. Let me know if you have any questions.",https://github.com/rails/rails/issues/29893
5,"TITLE: bin/test is not using the Rails test reporter BODY: Since https://github.com/rails/rails/pull/29572, the output of `bin/test` and `bundle exec ruby -Itest ...` is slightly different output. `bin/test` doesn't load the Rails minitest plugin, which leads to minitest' default reporter used. Note that I'm talking about the rails/rails test suite.

I'm not 100% sure, but I think it happens because `bin/test` is calling `Rails::TestUnit::Runner.run(ARGV)` as another one is using `Minitest.run(ARGV)`

### Expected behavior

`bundle exec ruby -Itest test/cases/my_test.rb` and `bin/test test/cases/my_test.rb` should have the same output.

### Actual behavior

`bundle exec ruby -Itest test/cases/my_test.rb` is using shiny new Rails test reporter and prints rerun command:

<img width=""741"" alt=""screen shot 2017-07-23 at 23 01 29"" src=""https://user-images.githubusercontent.com/522155/28502433-31ed546a-6ffb-11e7-9090-01a189a41d7d.png"">

`bin/test test/cases/my_test.rb` is using minitest built-in reporter:

<img width=""995"" alt=""screen shot 2017-07-23 at 23 01 41"" src=""https://user-images.githubusercontent.com/522155/28502445-4abf75f4-6ffb-11e7-8c3e-e6e7111d0518.png"">
",https://github.com/rails/rails/issues/29899
3,"TITLE: Autoloading guide should mention `eager_load_paths` BODY: The [Autoloading guide](http://guides.rubyonrails.org/autoloading_and_reloading_constants.html). Mentions adding `lib` to `autoload_paths`, but does not mention anything about also adding it to `eager_load_paths`. Without `eager_load_paths` constants may fail to load in production.",https://github.com/rails/rails/issues/29920
1,"TITLE: Unable to parse `filter_parameters` in development environment leads to unclear error message BODY: When malformed query parameters are passed, a controller fails to parse the query parameters (which is expected). In production, this is ok because the `PublicExceptions` middleware catches it and shows the corresponding error page. In development on the other hand, the `DebugExceptions` middleware attempts to render the [request and response template](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb#L9) but is unable to parse `filtered_parameters` and doesn't display the correct error message. 

Here is the test that replicates the bug:

```diff
diff --git a/railties/test/application/middleware/exceptions_test.rb b/railties/test/application/middleware/exceptions_test.rb
index fe07ad3cbe..8ad218beb8 100644
--- a/railties/test/application/middleware/exceptions_test.rb
+++ b/railties/test/application/middleware/exceptions_test.rb
@@ -134,5 +134,21 @@ def index
       assert_match(/boooom/, last_response.body)
       assert_match(/測試テスト시험/, last_response.body)
     end
+
+    test ""displays diagnostics message when malformed query parameters are provided"" do
+      controller :foo, <<-RUBY
+        class FooController < ActionController::Base
+          def index
+          end
+        end
+      RUBY
+
+      app.config.action_dispatch.show_exceptions = true
+      app.config.consider_all_requests_local = true
+
+      get ""/foo?x[y]=1&x[y][][w]=2""
+      assert_equal 400, last_response.status
+      assert_match ""Rack::QueryParser::ParameterTypeError"", last_response.body
+    end
   end
 end
```

If you run the test above, it'll fail with the message below:

```
$ rails -v
Rails 5.2.0.alpha
$ ruby -v
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16]
$ ruby -I""lib:test"" test/application/middleware/exceptions_test.rb
Run options: --seed 20823

# Running:

......F

Failure:
ApplicationTests::MiddlewareExceptionsTest#test_displays_diagnostics_message_when_malformed_query_parameters_are_provided [test/application/middleware/exceptions_test.rb:151]:
Expected /Rack::QueryParser::ParameterTypeError/ to match """".
```",https://github.com/rails/rails/issues/29947
4,"TITLE: Class-specific virtual attribute not writable after using `becomes` BODY: If using STI and there’s a subclass containing a virtual attribute (not backend by a database column), this attribute can not be written on instances created by `superclass_instance.becomes(Subclass)`:

### Steps to reproduce

```ruby
begin
  require ""bundler/inline""
rescue LoadError => e
  $stderr.puts ""Bundler version 1.10 or later is required. Please update your Bundler""
  raise e
end

gemfile() do
  source ""https://rubygems.org""
  gem ""rails"", github: ""rails/rails""
  gem ""arel"", github: ""rails/arel""
  gem ""sqlite3""
end

require ""active_record""
require ""minitest/autorun""
require ""logger""

ActiveRecord::Base.establish_connection(adapter: ""sqlite3"", database: "":memory:"")
ActiveRecord::Base.logger = Logger.new(STDOUT)

ActiveRecord::Schema.define do
  create_table :people do |t|
    t.string :type
    t.string :name
  end
end

class Person < ActiveRecord::Base
  attribute :name, :string
end

class Friend < Person
  attribute :special, :boolean # virtual (not backed by a db column)
end

class BugTest < Minitest::Test
  def test_virtual_attribute
    friend = Friend.new
    friend.special = true
    assert friend.special
  end

  def test_virtual_attribute_after_becomes
    friend = Person.new.becomes(Friend)
    friend.special = true # raises ActiveModel::MissingAttributeError: can't write unknown attribute `special`
    assert friend.special
  end
end
```

Observations:
 * Reading the virtual attribute does not raise an error (it returns nil).
 * If the virtual attribute is defined on the superclass instead, everything works as expected.
 * If the attribute is backed by a column in the database, everything works as expected.
",https://github.com/rails/rails/issues/29949
4,"TITLE: Support for multiple foreign keys in ActiveRecord::Associations? BODY: ## Problem

Suppose you have a `User` model with a HABTM self-join relationship, maintained through a separate join table:

#### The `User` model

```
class User < ApplicationRecord
  has_many :followers, through: :supply_links
  has_many :followeds, through: :supply_links
  ...
end
```

#### The join model

```
class Following < ApplicationRecord
  belongs_to :followers, class_name: 'User'
  belongs_to :followeds, class_name: 'User'
  ...
end
```

As I currently understand it, if you want to add a has-many association on the `User` model for the join model itself, you have to create two separate associations:

```
# app/model/user.rb
class User < ApplicationRecord
  ...
  has_many :follower_connections, class_name: :followings, foreign_key: :follower_id
  has_many :followed_connections, class_name: :followings, foreign_key: :followed_id
  ...
end
```

Then, in order to get **all** join table records referencing a given user, you'd have to concatenate calls to each of these associations:

```
alice.follower_connections + alice.followed_connections
```

when really, all I want is to call:

```
alice.followings
```

## Proposal

What would the Rails team think about supporting the following syntax?

```
has_many :followings, foreign_keys: [:follower_id, :followed_id]
```

I'd be willing to take a stab at a PR, but I'd like to understand if there's a reason it doesn't work this way first. I've done a bit of digging on SO, and at least [a](https://stackoverflow.com/questions/39184047/rails-self-join-with-has-many-through-relationship) [few](https://stackoverflow.com/questions/6387355/rails-self-referential-has-many-through-i-cant-figure-out-what-im-doing-wro) [people](https://stackoverflow.com/questions/24642005/rails-association-with-multiple-foreign-keys) have been looking for something like this since 2011.",https://github.com/rails/rails/issues/29969
5,TITLE: ActionController::RoutingError returns 500 (via fail-safe) rather than the expected 400 when POST parameters are invalid BODY: ,https://github.com/rails/rails/issues/29983
3,"TITLE: Calling ""unscope"" from inside another scope breaks STI in 5.0.5 BODY: Invoking a scope on an STI class from inside another class breaks its `all` scope on Rails 5.0.5.rc2. It does not happen on 5.1.3.rc2. I imagine it might be possible to backport a fix, which I will investigate shortly.

### Steps to reproduce

A sample application [is attached here](https://github.com/rails/rails/files/1183895/ar_bug_demo.tar.gz).


I have 3 classes:

```ruby
class CreateAreas < ActiveRecord::Migration[5.1]
  def change
    create_table :areas do |t|
      t.string :name
      t.string :type
      t.integer :parent_id
      t.integer :state_area_id
      t.timestamps
    end
  end
end

class Area < ApplicationRecord
  scope :named, ->(value) { where(name: value) }
  scope :with_state, lambda {|name|
    where(state_area_id: State.unscoped.named(name))
  }
end

class City < Area
end

class State < Area
end
```

Execute this in the Rails console:

```
puts State.all.to_sql
Area.with_state(""Washington"")
puts State.all.to_sql
```
### Expected behavior

The output of `State.all.to_sql` should be identical.

### Actual behavior

The output of the second call to `State.all.to_sql` is:

```sql
SELECT ""areas"".* FROM ""areas""
```

rather than 

```sql
SELECT ""areas"".* FROM ""areas"" WHERE ""areas"".""type"" IN ('State')
```

### System configuration
**Rails version**:

rails-5.0.5.rc2

**Ruby version**:

ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]
",https://github.com/rails/rails/issues/29986
4,"TITLE: bundle exec rails new ~/my-test-app --dev failed on window host BODY: ### Steps to reproduce
use https://github.com/rails/rails-dev-box.git

bundle exec rails new ~/my-test-app --dev failed

### Expected behavior
source 'https://rubygems.org'
git_source(:github) { |repo| ""https://github.com/${repo}.git"" }
gem 'rails', path: ""/vagrant/rails""

### Actual behavior
source 'https://rubygems.org'
git_source(:github) { |repo| ""https://github.com/${repo}.git"" }
gem 'rails'
, path: ""/vagrant/rails""

### System configuration
Devbox",https://github.com/rails/rails/issues/29987
